# ************************************************************************************************
# Warning: YAML source code for Canvas Apps is in preview. The schema is being actively developed.
# Content may be incomplete and subject to change.
# This file is read-only and should only be used to review changes made within Power Apps Studio.
# This file isn't used when loading the app. External editing, merging and conflict resolution are
# not supported.
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  NhapChinhSach:
    Properties:
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |
        =ClearCollect(
            tmpDsGiatriCS,
            [
                {
                    Ma: "",
                    Ten: "",
                    Loai: "",
                    cr282_ten_gia_tri: ""
                }
            ]
        );
        //Kenh ban
        ClearCollect(
            tmpCSApdungKB,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "1"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                GROUP_CS
            )
        );
        ClearCollect(
            tmpCSLoaitruKB,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "2"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                GROUP_CS
            )
        );
        // them kenh ban
        ForAll(
            DM_KENH_BANS As kb,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kb.MA_KENH_BAN,
                    Ten: kb.TEN_KENH_BAN,
                    Loai: "MA_KB_DM",
                    cr282_ten_gia_tri: kb.TEN_KENH_BAN
                }
            )
        );
        ForAll(
            DM_LOAI_KENH_BANS As kb,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kb.MA_LOAI_KB,
                    Ten: kb.TEN_LOAI_KB,
                    Loai: "MA_KB_LOAI",
                    cr282_ten_gia_tri: kb.TEN_LOAI_KB
                }
            )
        );
        Collect(
            tmpDsGiatriCS,
            {
                Ma: "0",
                Ten: "Cá nhân",
                Loai: "MA_KB_NHOM",
                cr282_ten_gia_tri: "Cá nhân"
            },
            {
                Ma: "1",
                Ten: "Tổ chức",
                Loai: "MA_KB_NHOM",
                cr282_ten_gia_tri: "Tổ chức"
            }
        );
        //End Kenh ban
        //KHACH HANG
        ClearCollect(
            tmpCSApdungKH,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "1"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                GROUP_CS
            )
        );
        ClearCollect(
            tmpCSLoaitruKH,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "2"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                GROUP_CS
            )
        );
        ForAll(
            DM_NHOM_KH As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_NHOM_KH,
                    Ten: kh.TEN_NHOM_KH,
                    Loai: "MA_KH_NHOM",
                    cr282_ten_gia_tri: kh.TEN_NHOM_KH
                }
            )
        );
        Collect(
            tmpDsGiatriCS,
            {
                Ma: "0",
                Ten: "Cá nhân",
                Loai: "MA_KH_LOAI",
                cr282_ten_gia_tri: "Cá nhân"
            },
            {
                Ma: "1",
                Ten: "Tổ chức",
                Loai: "MA_KH_LOAI",
                cr282_ten_gia_tri: "Tổ chức"
            }
        );
        ForAll(
            DM_KHACH_HANG As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_KHACH_HANG,
                    Ten: kh.TEN_KHACH_HANG,
                    Loai: "MA_KH",
                    cr282_ten_gia_tri: kh.TEN_KHACH_HANG
                }
            )
        );
        //END KHACH HANG
        //PHAM VI
        ClearCollect(
            tmpCSApdungPV,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                GROUP_CS
            )
        );
        ClearCollect(
            tmpCSLoaitruPV,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "2"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                GROUP_CS
            )
        );
        ForAll(
            DM_PHAMVI_DIALYS As pv,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: pv.MA_PHAMVI,
                    Ten: pv.TEN_PHAMVI,
                    Loai: If(
                        pv.LOAI = "KHU_VUC",
                        "MA_KHU_VUC",
                        If(
                            pv.LOAI = "QUOC_GIA",
                            "MA_QG",
                            If(
                                pv.LOAI = "VUNG_MIEN",
                                "MA_VUNG_MIEN",
                                If(
                                    pv.LOAI = "TINH_TP",
                                    "MA_TINH_TP",
                                    If(
                                        pv.LOAI = "QUAN_HUYEN",
                                        "MA_QUAN_HUYEN",
                                        If(
                                            pv.LOAI = "DON_VI",
                                            "MA_DON_VI",
                                            "KHAC"
                                        )
                                    )
                                )
                            )
                        )
                    ),
                    cr282_ten_gia_tri: pv.TEN_PHAMVI
                }
            )
        );
        //END PHAM VI
        //SAN PHAM
        ClearCollect(
            tmpCSApdungSP,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "1"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                MA_PV_AD,
                TEN_PV_AD,
                GIATRI_TU,
                GIATRI_DEN,
                GROUP_CS
            )
        );
        ClearCollect(
            tmpCSLoaitruSP,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "2"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                MA_PV_AD,
                TEN_PV_AD,
                GIATRI_TU,
                GIATRI_DEN,
                GROUP_CS
            )
        );
        ForAll(
            DL_SAN_PHAM As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_SAN_PHAM,
                    Ten: kh.TEN_SAN_PHAM,
                    Loai: "MA_SP",
                    cr282_ten_gia_tri: kh.TEN_SAN_PHAM
                }
            )
        );
        ForAll(
            ' DL_SAN_PHAM_CT' As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_CHUONG_TRINH,
                    Ten: kh.TEN_CHUONG_TRINH,
                    Loai: "MA_CT",
                    cr282_ten_gia_tri: Concatenate(kh.MA_CHUONG_TRINH," - ",kh.TEN_CHUONG_TRINH) 
                }
            )
        );
        Patch(
            tmpDsGiatriCS,
            Defaults(tmpDsGiatriCS),
            {
                Ma: "SK",
                Loai: "LHNV",
                cr282_ten_gia_tri: "Sức khoẻ"
            }
        );
        Patch(
            tmpDsGiatriCS,
            Defaults(tmpDsGiatriCS),
            {
                Ma: "TAI_NAM",
                Loai: "LHNV",
                cr282_ten_gia_tri: "Tai nạn"
            }
        );
        Patch(
            tmpDsGiatriCS,
            Defaults(tmpDsGiatriCS),
            {
                Ma: "TN_DS",
                Loai: "LHNV",
                cr282_ten_gia_tri: "Trách nhiệm dân sự"
            }
        );
        //END SAN PHAM
        //SO TIEN
        ClearCollect(
            tmpCSApdungST,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "ST" && AP_DUNG = "1"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                MA_PV_AD,
                TEN_PV_AD,
                GIATRI_TU,
                GIATRI_DEN,
                GROUP_CS
            )
        );
        ClearCollect(
            tmpCSLoaitruST,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "ST" && AP_DUNG = "2"
                ),
                ID,
                MA_CHINH_SACH,
                AP_DUNG,
                MA_TIEU_CHI,
                TEN_TIEU_CHI,
                MA_PV_AD,
                TEN_PV_AD,
                GIATRI_TU,
                GIATRI_DEN,
                GROUP_CS
            )
        );
        ForAll(
            DM_THOIHAN_AD As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_THOIHAN_AD,
                    Ten: kh.TEN_THOIHAN_AD,
                    Loai: "MA_ST_LK",
                    cr282_ten_gia_tri: kh.TEN_THOIHAN_AD
                }
            )
        );
        //END SO TIEN
        ClearCollect(
            colAD,
            [
                {
                    Ten: "",
                    Loai: "",
                    Phamvi: "",
                    TenChiTieu:""
                }
            ]
        );
        ClearCollect(
            colLT,
            [
                {
                    Ten: "",
                    Loai: "",
                    Phamvi: "",
                    TenChiTieu:""
                }
            ]
        );
    Children:
      - Canvas1_1:
          Control: FluidGrid@2.3.0
          Properties:
            BorderThickness: =0
            Height: =968
            Width: =Parent.Width
            Y: =
          Children:
            - DataCard1:
                Control: DataCard@1.0.2
                Properties:
                  Height: =3408
                  Width: =Parent.Width
                Children:
                  - ContainerCS:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        BorderColor: =RGBA(255, 255, 255, 1)
                        BorderStyle: =BorderStyle.None
                        DropShadow: =DropShadow.None
                        Height: =718
                        Width: =Parent.Width-Self.X
                        X: =130
                      Children:
                        - Label1_23:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Justify
                              BorderColor: =RGBA(0, 0, 0, 0)
                              BorderStyle: =BorderStyle.None
                              BorderThickness: =2
                              Color: =RGBA(50, 49, 48, 1)
                              DisabledBorderColor: =RGBA(0, 0, 0, 0)
                              DisabledColor: =RGBA(161, 159, 157, 1)
                              FocusedBorderThickness: =4
                              Font: =Font.'Segoe UI'
                              FontWeight: =FontWeight.Bold
                              Height: =30
                              Size: =11
                              Text: ="1. Thông tin chung"
                              Width: =Parent.Width
                        - TTChungCS:
                            Control: Form@2.4.2
                            Variant: Classic
                            Layout: Vertical
                            Properties:
                              BorderColor: =RGBA(245, 245, 245, 1)
                              DataSource: =DL_CHINHSACH_CHUNG
                              DefaultMode: =FormMode.New
                              Height: =446
                              Item: =LookUp(DL_CHINHSACH_CHUNG, MA_CHINH_SACH=varMaCS)
                              Width: =Parent.Width
                              Y: =30
                            Children:
                              - SO_VB_DataCard3:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_so_vb"
                                    Default: =ThisItem.SO_VB
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_so_vb)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, cr282_so_vb)
                                    Required: =false
                                    Update: =DataCardValueSoCS.Text
                                    Width: =309
                                    X: =1
                                    Y: =0
                                  Children:
                                    - DataCardKey31:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Số văn bản"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardValueSoCS:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Open Sans'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          MaxLength: =Parent.MaxLength
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Size: =11
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey31.Y + DataCardKey31.Height + 5
                                    - ErrorMessage31:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardValueSoCS.Y + DataCardValueSoCS.Height
                                    - StarVisible28:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey31.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey31.Y
                              - HOAT_DONG_DataCard1:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    DataField: ="cr282_hoat_dong"
                                    Default: =ThisItem.HOAT_DONG
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_hoat_dong)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, cr282_hoat_dong)
                                    Required: =false
                                    Update: =DataCardHoatDong.Value
                                    Width: =309
                                    X: =3
                                    Y: =0
                                  Children:
                                    - DataCardKey26:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(0, 18, 107, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          Size: =11
                                          Text: ="Hoạt động"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - ErrorMessage14:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(168, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =14
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardHoatDong.Y + DataCardHoatDong.Height
                                    - StarVisible29:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(0, 18, 107, 1)
                                          Font: =Font.'Open Sans'
                                          Height: =DataCardKey26.Height
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey26.Y
                                    - DataCardHoatDong:
                                        Control: Classic/CheckBox@2.1.0
                                        Properties:
                                          BorderColor: =RGBA(71, 158, 245, 1)
                                          CheckboxBorderColor: =RGBA(0, 18, 107, 1)
                                          CheckmarkFill: =RGBA(0, 0, 0, 1)
                                          Default: =Parent.Default
                                          Font: =Font.'Open Sans'
                                          HoverColor: =RGBA(0, 18, 107, 1)
                                          Text: =""
                                          X: =30
                                          Y: =40
                              - MO_TA_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    DataField: ="cr282_mo_ta"
                                    Default: =ThisItem.MO_TA
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_mo_ta)
                                    Height: =162
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, cr282_mo_ta)
                                    Required: =false
                                    Update: =DataCardMoTa.Text
                                    Width: =1236
                                    Y: =2
                                  Children:
                                    - DataCardKey23:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          Size: =11
                                          Text: ="Mô tả"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardMoTa:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(214, 221, 224, 1)
                                          DisplayMode: =DisplayMode.Disabled
                                          Font: =Font.'Open Sans'
                                          Height: =102
                                          HintText: ="Hệ thống tự sinh"
                                          HoverBorderColor: =RGBA(0, 18, 107, 1)
                                          HoverFill: =RGBA(186, 202, 226, 1)
                                          MaxLength: =Parent.MaxLength
                                          Mode: =TextMode.MultiLine
                                          PaddingLeft: =5
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Size: =11
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey23.Y + DataCardKey23.Height + 5
                                    - ErrorMessage11:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(168, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =14
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardMoTa.Y + DataCardMoTa.Height
                                    - StarVisible23:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(0, 18, 107, 1)
                                          Font: =Font.'Open Sans'
                                          Height: =DataCardKey23.Height
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey23.Y
                              - TRANG_THAI_FIX_DataCard1:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_trang_thai_fix"
                                    Default: =ThisItem.TRANG_THAI_FIX
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_trang_thai_fix)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, cr282_trang_thai_fix)
                                    Required: =false
                                    Update: ="0"
                                    Visible: =false
                                    Width: =309
                                    Y: =3
                                  Children:
                                    - DataCardKey52:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Text: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardValue41:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          DisabledFill: =RGBA(242, 242, 241, 0)
                                          DisplayMode: =Parent.DisplayMode
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          MaxLength: =Parent.MaxLength
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey52.Y + DataCardKey52.Height + 5
                                    - ErrorMessage52:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardValue41.Y + DataCardValue41.Height
                                    - StarVisible49:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey52.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey52.Y
                              - MA_CHINH_SACH_DataCard1:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_ma_chinh_sach"
                                    Default: =ThisItem.MA_CHINH_SACH
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_ma_chinh_sach)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, cr282_ma_chinh_sach)
                                    Required: =true
                                    Update: =newMaCS
                                    Width: =309
                                    Y: =0
                                  Children:
                                    - DataCardKey20_1:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Mã (*)"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardValueMaCS:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =DisplayMode.Disabled
                                          Font: =Font.'Open Sans'
                                          HintText: ="Hệ thống tự sinh"
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          MaxLength: =Parent.MaxLength
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Size: =11
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey20_1.Y + DataCardKey20_1.Height + 5
                                    - ErrorMessage20_1:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardValueMaCS.Y + DataCardValueMaCS.Height
                              - NGAY_VB_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicDateTimeEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_ngay_vb"
                                    Default: =ThisItem.NGAY_VB
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_ngay_vb)
                                    Required: =false
                                    Update: =If(Not IsBlank(DateValueNgayCS.SelectedDate), DateValueNgayCS.SelectedDate)
                                    Width: =309
                                    X: =2
                                    Y: =0
                                  Children:
                                    - DataCardKey28:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Ngày văn bản"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DateValueNgayCS:
                                        Control: Classic/DatePicker@2.6.0
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          DefaultDate: =Parent.Default
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          EndYear: =Year(Today())+100
                                          Font: =Font.'Open Sans'
                                          Format: ="dd/mm/yyyy"
                                          IconBackground: =RGBA(0, 120, 212, 1)
                                          IconFill: =RGBA(255, 255, 255, 1)
                                          InputTextPlaceholder: =
                                          IsEditable: =true
                                          PaddingBottom: =0
                                          PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                          Size: =11
                                          StartYear: =1899
                                          Tooltip: =Parent.DisplayName
                                          Width: =(Parent.Width - 60)
                                          X: =30
                                          Y: =DataCardKey28.Y + DataCardKey28.Height + 5
                                    - Separator1_2:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Bold
                                          Height: =
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =":"
                                          Width: =10
                                          Wrap: =false
                                          X: =
                                          Y: =
                                    - ErrorMessage28:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =
                                    - StarVisible25:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey28.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey28.Y
                              - HIEU_LUC_TU_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicDateTimeEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_hieu_luc_tu"
                                    Default: =ThisItem.HIEU_LUC_TU
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_hieu_luc_tu)
                                    Height: =55
                                    Required: =false
                                    Update: =If(Not IsBlank(DateValueTuCS.SelectedDate), DateValueTuCS.SelectedDate)
                                    Width: =309
                                    Y: =1
                                  Children:
                                    - DataCardKey29:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Hiệu lực từ (*)"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DateValueTuCS:
                                        Control: Classic/DatePicker@2.6.0
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          DefaultDate: =Parent.Default
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          EndYear: =Year(Today())+100
                                          Font: =Font.'Open Sans'
                                          Format: ="dd/mm/yyyy"
                                          IconBackground: =RGBA(0, 120, 212, 1)
                                          IconFill: =RGBA(255, 255, 255, 1)
                                          InputTextPlaceholder: =
                                          IsEditable: =true
                                          PaddingBottom: =0
                                          PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                          Size: =11
                                          StartYear: =1899
                                          Tooltip: =Parent.DisplayName
                                          Width: =(Parent.Width - 60)
                                          X: =30
                                          Y: =DataCardKey29.Y + DataCardKey29.Height + 5
                                    - ErrorMessage29:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =
                                    - StarVisible26:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey29.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey29.Y
                              - HIEU_LUC_DEN_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicDateTimeEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_hieu_luc_den"
                                    Default: =ThisItem.HIEU_LUC_DEN
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_hieu_luc_den)
                                    Required: =false
                                    Update: =If(Not IsBlank(DateValueDenCS.SelectedDate), DateValueDenCS.SelectedDate)
                                    Width: =309
                                    X: =1
                                    Y: =1
                                  Children:
                                    - DataCardKey30:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Hiệu lực đến"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DateValueDenCS:
                                        Control: Classic/DatePicker@2.6.0
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          DefaultDate: =Parent.Default
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          EndYear: =Year(Today())+100
                                          Font: =Font.'Open Sans'
                                          Format: ="dd/mm/yyyy"
                                          IconBackground: =RGBA(0, 120, 212, 1)
                                          IconFill: =RGBA(255, 255, 255, 1)
                                          InputTextPlaceholder: =
                                          IsEditable: =true
                                          PaddingBottom: =0
                                          PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                          Size: =11
                                          StartYear: =1899
                                          Tooltip: =Parent.DisplayName
                                          Width: =(Parent.Width - 60)
                                          X: =30
                                          Y: =DataCardKey30.Y + DataCardKey30.Height + 5
                                    - ErrorMessage30:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =
                                    - StarVisible27:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey30.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey30.Y
                              - FILE_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicFileEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_file"
                                    Default: |-
                                      =If(!IsBlank(ThisItem.FILE.FileName), Table({DisplayName: ThisItem.FILE.FileName, Value: ThisItem.FILE.Value}), Blank())
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_file)
                                    Required: =false
                                    Update: =DataCardValueFileCS.Attachments
                                    Width: =309
                                    X: =2
                                    Y: =1
                                  Children:
                                    - DataCardKey21_1:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="File"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardValueFileCS:
                                        Control: Attachments@2.3.0
                                        Properties:
                                          AddAttachmentText: ="Chọn file"
                                          BorderColor: =RGBA(230, 230, 230, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          DisabledFill: =RGBA(242, 242, 241, 0)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          DropTargetBackgroundColor: =RGBA(255, 255, 255, 1)
                                          Font: =Font.'Segoe UI'
                                          Height: =106
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(245, 245, 245, 1)
                                          ItemColor: =RGBA(0, 0, 0, 1)
                                          ItemFill: =RGBA(0, 120, 212, 1)
                                          ItemHoverColor: =RGBA(50, 49, 48, 1)
                                          ItemHoverFill: =RGBA(245, 245, 245, 1)
                                          ItemSpacing: =12
                                          Items: =Parent.Default
                                          MaxAttachments: =1
                                          MaxAttachmentsText: =""
                                          NoAttachmentsColor: =RGBA(161, 159, 157, 1)
                                          NoAttachmentsText: =""
                                          PaddingBottom: =5
                                          PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                          PaddingRight: =5
                                          PaddingTop: =5
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 120, 212, 1)
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey21_1.Y + DataCardKey21_1.Height + 5
                                    - ErrorMessage21_1:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardValueFileCS.Y + DataCardValueFileCS.Height
                                    - StarVisible8_2:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey21_1.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey21_1.Y
                              - ID_DataCard3:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicNumberEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_id"
                                    Default: =ThisItem.ID
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,cr282_id)
                                    Required: =false
                                    Update: =newIDCS
                                    Visible: =false
                                    Width: =309
                                    X: =3
                                    Y: =1
                                  Children:
                                    - DataCardKey25:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Text: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardIDCS:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          DisabledFill: =RGBA(242, 242, 241, 0)
                                          DisplayMode: =Parent.DisplayMode
                                          Font: =Font.'Segoe UI'
                                          Format: =TextFormat.Number
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey25.Y + DataCardKey25.Height + 5
                                    - ErrorMessage25:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardIDCS.Y + DataCardIDCS.Height
                                    - StarVisible21_1:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey25.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey25.Y
                        - Label1_24:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Justify
                              BorderColor: =RGBA(0, 0, 0, 0)
                              BorderStyle: =BorderStyle.None
                              BorderThickness: =2
                              Color: =RGBA(50, 49, 48, 1)
                              DisabledBorderColor: =RGBA(0, 0, 0, 0)
                              DisabledColor: =RGBA(161, 159, 157, 1)
                              FocusedBorderThickness: =4
                              Font: =Font.'Segoe UI'
                              FontWeight: =FontWeight.Bold
                              Height: =30
                              Size: =11
                              Text: ="2. Chính sách áp dụng"
                              Width: =Parent.Width
                              Y: =476
                        - TTCSApDung:
                            Control: Form@2.4.2
                            Variant: Classic
                            Layout: Vertical
                            Properties:
                              BorderColor: =RGBA(245, 245, 245, 1)
                              BorderStyle: =BorderStyle.None
                              DataSource: =DL_CHINHSACH_APDUNG
                              DefaultMode: =FormMode.New
                              Fill: =RGBA(255, 255, 255, 1)
                              Height: =214
                              Item: =LookUp(DL_CHINHSACH_APDUNG, MA_CHINH_SACH=varMaCS)
                              Width: =Parent.Width
                              Y: =514
                            Children:
                              - HINH_THUC_DataCard1:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    DataField: ="cr282_hinh_thuc"
                                    Default: =ThisItem.HINH_THUC
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_hinh_thuc)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, cr282_hinh_thuc)
                                    Required: =false
                                    Update: =DataCardHinhThuc.Selected.MA
                                    Width: =309
                                    Y: =0
                                  Children:
                                    - DataCardKey33:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          Size: =11
                                          Text: ="Hình thức"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - ErrorMessage23:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(168, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =14
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardHinhThuc.Y + DataCardHinhThuc.Height
                                    - StarVisible31:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(0, 18, 107, 1)
                                          Font: =Font.'Open Sans'
                                          Height: =DataCardKey33.Height
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey33.Y
                                    - DataCardHinhThuc:
                                        Control: Classic/DropDown@2.3.1
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          ChevronBackground: =RGBA(255, 255, 255, 1)
                                          ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                                          ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                                          ChevronFill: =RGBA(54, 176, 75, 1)
                                          ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                                          ChevronHoverFill: =RGBA(50, 49, 48, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =If(Parent.Default="003", "Gộp", If(Parent.Default="002", "Lựa chọn", "Ưu tiên"))
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(245, 245, 245, 1)
                                          Items: =[{MA:"001",TEN:"Ưu tiên"},{MA:"002",TEN:"Lựa chọn"},{MA:"003",TEN:"Gộp"}]
                                          Items.Value: =TEN
                                          PaddingBottom: =5
                                          PaddingLeft: =12
                                          PaddingRight: =5
                                          PaddingTop: =5
                                          PressedBorderColor: =RGBA(16, 110, 190, 1)
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 120, 212, 1)
                                          SelectionColor: =RGBA(50, 49, 48, 1)
                                          SelectionFill: =RGBA(0, 120, 212, 1)
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: |
                                            =DataCardKey44.Y + DataCardKey44.Height + 5
                              - DONVI_TIEN_TE_DataCard1:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    DataField: ="cr282_donvi_tien_te"
                                    Default: =ThisItem.DONVI_TIEN_TE
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_donvi_tien_te)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, cr282_donvi_tien_te)
                                    Required: =false
                                    Update: =DataCardTienTe.Selected.TIEN_TE
                                    Width: =309
                                    X: =3
                                    Y: =0
                                  Children:
                                    - DataCardKey34:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          Size: =11
                                          Text: ="Đơn vị tiền"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - ErrorMessage26:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(168, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =14
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardTienTe.Y + DataCardTienTe.Height
                                    - StarVisible32:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(0, 18, 107, 1)
                                          Font: =Font.'Open Sans'
                                          Height: =DataCardKey34.Height
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey34.Y
                                    - DataCardTienTe:
                                        Control: Classic/DropDown@2.3.1
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          ChevronBackground: =RGBA(255, 255, 255, 1)
                                          ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                                          ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                                          ChevronFill: =RGBA(54, 176, 75, 1)
                                          ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                                          ChevronHoverFill: =RGBA(50, 49, 48, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(245, 245, 245, 1)
                                          Items: =BH_DM_TIENTES
                                          Items.Value: =cr282_tien_te
                                          PaddingBottom: =5
                                          PaddingLeft: =12
                                          PaddingRight: =5
                                          PaddingTop: =5
                                          PressedBorderColor: =RGBA(16, 110, 190, 1)
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 120, 212, 1)
                                          SelectionColor: =RGBA(50, 49, 48, 1)
                                          SelectionFill: =RGBA(0, 120, 212, 1)
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: |
                                            =DataCardKey43.Y + DataCardKey43.Height + 5
                              - KIEU_DU_LIEU_DataCard1:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    DataField: ="cr282_kieu_du_lieu"
                                    Default: =ThisItem.KIEU_DU_LIEU
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_kieu_du_lieu)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, cr282_kieu_du_lieu)
                                    Required: =false
                                    Update: =DataCardKieuDL.Selected.MA
                                    Width: =309
                                    Y: =1
                                  Children:
                                    - DataCardKey32:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          Size: =11
                                          Text: ="Kiểu dữ liệu"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - ErrorMessage17:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(168, 0, 0, 1)
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =14
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =
                                    - StarVisible30:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 1)
                                          Color: =RGBA(0, 18, 107, 1)
                                          Font: =Font.'Open Sans'
                                          Height: =DataCardKey32.Height
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey32.Y
                                    - DataCardKieuDL:
                                        Control: Classic/DropDown@2.3.1
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          ChevronBackground: =RGBA(255, 255, 255, 1)
                                          ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                                          ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                                          ChevronFill: =RGBA(54, 176, 75, 1)
                                          ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                                          ChevronHoverFill: =RGBA(50, 49, 48, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =If(Parent.Default="002", "Số tiền", "Tỷ lệ (%)")
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(245, 245, 245, 1)
                                          Items: =[{MA:"001",TEN:"Tỷ lệ (%)"},{MA:"002",TEN:"Số tiền"}]
                                          Items.Value: =TEN
                                          PaddingBottom: =5
                                          PaddingLeft: =12
                                          PaddingRight: =5
                                          PaddingTop: =5
                                          PressedBorderColor: =RGBA(16, 110, 190, 1)
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 120, 212, 1)
                                          SelectionColor: =RGBA(50, 49, 48, 1)
                                          SelectionFill: =RGBA(0, 120, 212, 1)
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey43.Y + DataCardKey43.Height + 5
                              - LOAI_DK_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_loai_dk"
                                    Default: =ThisItem.LOAI_DK
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_loai_dk)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, cr282_loai_dk)
                                    Required: =false
                                    Update: =DataCardLoaiDK.Selected.MA
                                    Width: =309
                                    X: =1
                                    Y: =0
                                  Children:
                                    - DataCardKey41:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Loại điều khoản"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - ErrorMessage41:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =
                                    - StarVisible38:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey41.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey41.Y
                                    - DataCardLoaiDK:
                                        Control: Classic/DropDown@2.3.1
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          ChevronBackground: =RGBA(255, 255, 255, 1)
                                          ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                                          ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                                          ChevronFill: =RGBA(54, 176, 75, 1)
                                          ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                                          ChevronHoverFill: =RGBA(50, 49, 48, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =If(Parent.Default="1", "Đơn", "Kết hợp")
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(245, 245, 245, 1)
                                          Items: =[{MA:"2",TEN:"Kết hợp"},{MA:"1",TEN:"Đơn"}]
                                          Items.Value: =TEN
                                          PaddingBottom: =5
                                          PaddingLeft: =12
                                          PaddingRight: =5
                                          PaddingTop: =5
                                          PressedBorderColor: =RGBA(16, 110, 190, 1)
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 120, 212, 1)
                                          SelectionColor: =RGBA(50, 49, 48, 1)
                                          SelectionFill: =RGBA(0, 120, 212, 1)
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey44.Y + DataCardKey44.Height + 5
                              - ANH_HUONG_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_anh_huong"
                                    Default: =ThisItem.ANH_HUONG
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_anh_huong)
                                    Height: =95
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, cr282_anh_huong)
                                    Required: =false
                                    Update: =DataCardAnhHuong.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1BMA'
                                    Width: =309
                                    X: =2
                                    Y: =0
                                  Children:
                                    - DataCardKey42:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Loại tác động"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - ErrorMessage42:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardAnhHuong.Y + DataCardAnhHuong.Height
                                    - StarVisible39:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey42.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey42.Y
                                    - DataCardAnhHuong:
                                        Control: Classic/DropDown@2.3.1
                                        Properties:
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          ChevronBackground: =RGBA(255, 255, 255, 1)
                                          ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                                          ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                                          ChevronFill: =RGBA(54, 176, 75, 1)
                                          ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                                          ChevronHoverFill: =RGBA(50, 49, 48, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =If(Parent.Default="2", "Giảm", "Tăng")
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(245, 245, 245, 1)
                                          Items: =[{MA:"1",TEN:"Tăng"},{MA:"2",TEN:"Giảm"}]
                                          Items.Value: =TEN
                                          PaddingBottom: =5
                                          PaddingLeft: =12
                                          PaddingRight: =5
                                          PaddingTop: =5
                                          PressedBorderColor: =RGBA(16, 110, 190, 1)
                                          PressedColor: =RGBA(255, 255, 255, 1)
                                          PressedFill: =RGBA(0, 120, 212, 1)
                                          SelectionColor: =RGBA(50, 49, 48, 1)
                                          SelectionFill: =RGBA(0, 120, 212, 1)
                                          Width: =Parent.Width - 60
                                          X: |
                                            =30
                                          Y: =DataCardKey43.Y + DataCardKey43.Height + 5
                              - SO_TIEN_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicNumberEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_so_tien"
                                    Default: =ThisItem.SO_TIEN
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_so_tien)
                                    Required: =false
                                    Update: =Value(DataCardVSoTienAD.Text)
                                    Visible: =If(DataCardKieuDL.Selected.MA="002",true,false)
                                    Width: =309
                                    X: =1
                                    Y: =1
                                  Children:
                                    - DataCardKey44:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Giá trị"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardVSoTienAD:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          Align: =Align.Right
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Open Sans'
                                          Format: =TextFormat.Number
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Size: =11
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey44.Y + DataCardKey44.Height + 5
                                    - StarVisible41:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey44.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey44.Y
                              - TY_LE_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicNumberEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_ty_le"
                                    Default: =ThisItem.TY_LE
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_ty_le)
                                    Required: =false
                                    Update: =Value(DataCardTyLeApDung.Text)
                                    Visible: =If(DataCardKieuDL.Selected.MA="002",false,true)
                                    Width: =309
                                    X: =2
                                    Y: =1
                                  Children:
                                    - DataCardKey43:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Giá trị"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardTyLeApDung:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          Align: =Align.Right
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Open Sans'
                                          Format: =TextFormat.Number
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Size: =11
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey43.Y + DataCardKey43.Height + 5
                                    - StarVisible40:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey43.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey43.Y
                              - SO_TIEN_TOI_DA_DataCard2:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicNumberEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_so_tien_toi_da"
                                    Default: =ThisItem.SO_TIEN_TOI_DA
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_so_tien_toi_da)
                                    Required: =false
                                    Update: =Value(DataCardSoTienToiDa.Text)
                                    Width: =309
                                    X: =3
                                    Y: =1
                                  Children:
                                    - DataCardKey45:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: ="Số tiền tối đa"
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardSoTienToiDa:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          Align: =Align.Right
                                          BorderColor: =RGBA(54, 176, 75, 1)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                          DisabledColor: =RGBA(0, 0, 0, 1)
                                          DisabledFill: =RGBA(230, 230, 230, 1)
                                          DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                                          Font: =Font.'Open Sans'
                                          Format: =TextFormat.Number
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Size: =11
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey45.Y + DataCardKey45.Height + 5
                                    - StarVisible42:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey45.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey45.Y
                              - MA_CHINH_SACH_DataCard3:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicTextualEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_ma_chinh_sach"
                                    Default: =ThisItem.MA_CHINH_SACH
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_ma_chinh_sach)
                                    MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, cr282_ma_chinh_sach)
                                    Required: =true
                                    Update: =newMaCS
                                    Visible: =false
                                    Width: =309
                                    Y: =2
                                  Children:
                                    - DataCardKey39:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Open Sans'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Size: =11
                                          Text: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardMaCSApDung:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          DisabledFill: =RGBA(242, 242, 241, 0)
                                          DisplayMode: =Parent.DisplayMode
                                          Font: =Font.'Segoe UI'
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          MaxLength: =Parent.MaxLength
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey39.Y + DataCardKey39.Height + 5
                                    - ErrorMessage39:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardMaCSApDung.Y + DataCardMaCSApDung.Height
                              - ID_DataCard5:
                                  Control: TypedDataCard@1.0.6
                                  Variant: ClassicNumberEdit
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    DataField: ="cr282_id"
                                    Default: =ThisItem.ID
                                    DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,cr282_id)
                                    Required: =false
                                    Update: =newIDCSApdung
                                    Visible: =false
                                    Width: =309
                                    X: =1
                                    Y: =2
                                  Children:
                                    - DataCardKey40:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =34
                                          PaddingLeft: =0
                                          Text: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          Wrap: =false
                                          X: =30
                                          Y: =10
                                    - DataCardIDCSApDung:
                                        Control: Classic/TextInput@2.3.2
                                        Properties:
                                          BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                          Color: =RGBA(50, 49, 48, 1)
                                          Default: =Parent.Default
                                          DelayOutput: =true
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          DisabledFill: =RGBA(242, 242, 241, 0)
                                          DisplayMode: =Parent.DisplayMode
                                          Font: =Font.'Segoe UI'
                                          Format: =TextFormat.Number
                                          HoverBorderColor: =RGBA(16, 110, 190, 1)
                                          HoverColor: =RGBA(50, 49, 48, 1)
                                          HoverFill: =RGBA(255, 255, 255, 1)
                                          PaddingLeft: =5
                                          PressedBorderColor: =RGBA(0, 120, 212, 1)
                                          PressedColor: =RGBA(50, 49, 48, 1)
                                          PressedFill: =RGBA(255, 255, 255, 1)
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Tooltip: =Parent.DisplayName
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardKey40.Y + DataCardKey40.Height + 5
                                    - ErrorMessage40:
                                        Control: Label@2.5.1
                                        Properties:
                                          AutoHeight: =true
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(168, 0, 0, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(168, 0, 0, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =10
                                          Live: =Live.Assertive
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Text: =Parent.Error
                                          Visible: =Parent.DisplayMode=DisplayMode.Edit
                                          Width: =Parent.Width - 60
                                          X: =30
                                          Y: =DataCardIDCSApDung.Y + DataCardIDCSApDung.Height
                                    - StarVisible37:
                                        Control: Label@2.5.1
                                        Properties:
                                          Align: =Align.Center
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderStyle: =BorderStyle.None
                                          BorderThickness: =2
                                          Color: =RGBA(50, 49, 48, 1)
                                          DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                          DisabledColor: =RGBA(161, 159, 157, 1)
                                          FocusedBorderThickness: =4
                                          Font: =Font.'Segoe UI'
                                          FontWeight: =FontWeight.Semibold
                                          Height: =DataCardKey40.Height
                                          PaddingLeft: =0
                                          Text: ="*"
                                          Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                          Width: =30
                                          Wrap: =false
                                          Y: =DataCardKey40.Y
                  - Container3.2:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        Fill: =RGBA(255, 255, 255, 1)
                        Height: =479
                        Width: =Parent.Width-Self.X-10
                        X: =130
                        Y: =1232
                      Children:
                        - Label6_9:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =41
                              Size: =11
                              Text: ="3.2 Kênh bán"
                              Width: =253
                        - RadioCSKB:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: =If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "KB" && AP_DUNG = "1" ).TEN_KIEU)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSKBCS)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =40
                              Y: =76
                        - GalleryKBCS:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSApdungKB
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                              Width: =965
                              X: =253.2
                              Y: =76
                            Children:
                              - DropKBCS:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(72, 163, 62, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KB")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboBoxCSKB)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboBoxCSKB:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(72, 163, 62, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = DropKBCS.Selected.MA_CHI_TIEU)
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =600
                                    X: =268
                                    Y: =5
                              - BtnXoaCSKB:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSApdungKB, cr282_id = ThisItem.cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - CSAD_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_id
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Segoe UI'
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: |
                                      =false
                                    X: =40
                                    Y: =6
                        - Label7_8:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Áp dụng"
                              X: =25
                              Y: =36
                        - RadioCSKB_LoaiTru:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: =If(IsBlank(varMaCS) Or varXoaKB_CS, "",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "KB" && AP_DUNG = "2" ).TEN_KIEU)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSKBCS_LT)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =41
                              Y: =312
                        - GalleryKBCS_LoaiTru:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSLoaitruKB
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =312
                            Children:
                              - DropKBCS_LoaiTru:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KB")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboBoxCSKB_LT)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboBoxCSKB_LT:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = DropKBCS_LoaiTru.Selected.MA_CHI_TIEU)
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["Loai"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =600
                                    X: =268
                                    Y: =5
                              - BtnXoaCSKB_LT:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSLoaitruKB, cr282_id = ThisItem.cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - CSAD_ID_LoaiTru:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_id
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Segoe UI'
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: =false
                                    X: =40
                                    Y: =6
                        - Label7_9:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Loại trừ"
                              X: =25
                              Y: =243
                        - BtnADCS_KB:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |
                                =Collect(
                                    tmpCSApdungKB,
                                    [{cr282_id:Value( Max (tmpCSApdungKB, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSKB.Selected.ID = 2, true)
                              Width: =91
                              X: =253.2
                              Y: =10
                        - BtnLTCS_KB:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |
                                =Collect(
                                    tmpCSLoaitruKB,
                                    [{cr282_id:Value( Max (tmpCSLoaitruKB, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                              Width: =91
                              X: =253
                              Y: =250
                        - ResetDSKBCS:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSApdungKB,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "1"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =157
                              Y: =41
                        - ResetDSKBCS_LT:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSLoaitruKB,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "2"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =170
                              Y: =274
                        - BadgeCanvas1_48:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =47
                        - Label9_30:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =47
                        - Label9_31:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                              Width: =72
                              X: =729
                              Y: =47
                        - BadgeCanvas1_49:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =255
                              Y: =283
                        - Label9_33:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =283
                        - Label9_35:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                              Width: =72
                              X: =729
                              Y: =282
                        - Icon2_6:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 1)
                              Color: =RGBA(0, 0, 0, 1)
                              Height: =20
                              Icon: =Icon.Cancel
                              OnSelect: |-
                                =Reset(RadioCSKB_LoaiTru);
                                Set(varXoaKB_CS, true);
                              Width: =20
                              X: =123
                              Y: =255
                  - Container3.3:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        Height: =484
                        Width: =Parent.Width-Self.X-10
                        X: =130
                        Y: =1711
                      Children:
                        - Label6_10:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =46
                              Size: =11
                              Text: ="3.3 Khách hàng"
                              Width: =Parent.Width
                        - RadioCSKH:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(54, 176, 75, 1)
                              Default: =If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH=varMaCS  && THANH_PHAN = "KH" && AP_DUNG ="1" ).TEN_KIEU)
                              DisabledBorderColor: =RGBA(255, 255, 255, 1)
                              DisabledFill: =RGBA(255, 255, 255, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSKHCS)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =40
                              Y: =76
                        - GalleryKHCS:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSApdungKH
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                              Width: =965
                              X: =253.2
                              Y: =77
                            Children:
                              - DropKHCS:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KH")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboKHCS)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboKHCS:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = DropKHCS.Selected.MA_CHI_TIEU)
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =600
                                    X: =268
                                    Y: =5
                              - Button5_17:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSApdungKH, cr282_id= ThisItem.cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - KH_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_id
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Segoe UI'
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: =false
                                    X: =60
                                    Y: =6
                        - Label7_10:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Áp dụng"
                              X: =25
                              Y: =36
                        - RadioCSKH_LoaiTru:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: |-
                                =If(IsBlank(varMaCS) Or varXoaKH_CS, "",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "KH" && AP_DUNG = "2" ).TEN_KIEU
                                )
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSKHCS_LT)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =41
                              Y: =321
                        - GalleryKHCS_LoaiTru:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSLoaitruKH
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =321
                            Children:
                              - DropKHCS_LoaiTru:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KH")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboKHCS_LT)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboKHCS_LT:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter(tmpDsGiatriCS, Loai = DropKHCS_LoaiTru.Selected.MA_CHI_TIEU)
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =600
                                    X: =268
                                    Y: =5
                              - Button5_18:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSLoaitruKH, cr282_id = ThisItem.cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - KHLT_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Default: =ThisItem.cr282_id
                                    Font: =Font.'Open Sans'
                                    HoverBorderColor: =RGBA(0, 18, 107, 1)
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    OnSelect: =Select(Parent)
                                    Visible: =false
                                    X: =40
                                    Y: =6
                        - Label7_11:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Loại trừ"
                              X: =25
                              Y: =244
                        - Button3_9:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |-
                                =Collect(
                                    tmpCSApdungKH,
                                    [{cr282_id:Value( Max (tmpCSApdungKH, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                              Width: =91
                              X: =253.2
                              Y: =11
                        - Button3_10:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |-
                                =Collect(
                                    tmpCSLoaitruKH,
                                    [{cr282_id:Value( Max (tmpCSLoaitruKH, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                              Width: =91
                              X: =253
                              Y: =251
                        - ResetDSKHCS:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSApdungKH,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "1"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =199
                              Y: =46
                        - ResetDSKHCS_LT:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSLoaitruKH,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "2"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =175
                              Y: =251
                        - BadgeCanvas1_51:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =48
                        - Label9_38:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =48
                        - Label9_39:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                              Width: =72
                              X: =729
                              Y: =47
                        - BadgeCanvas1_52:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =292
                        - Label9_40:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =292
                        - Label9_41:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                              Width: =72
                              X: =729
                              Y: =291
                        - Icon2_7:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 1)
                              Color: =RGBA(0, 0, 0, 1)
                              Height: =20
                              Icon: =Icon.Cancel
                              OnSelect: |-
                                =Reset(RadioCSKH_LoaiTru);
                                Set(varXoaKH_CS, true);
                              Width: =20
                              X: =123
                              Y: =254
                  - Container3.4:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        Height: =482
                        Width: =Parent.Width-Self.X-10
                        X: =130
                        Y: =2195
                      Children:
                        - Label6_11:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =46
                              Size: =11
                              Text: ="3.4 Phạm vi"
                              Width: =Parent.Width
                        - RadioCSPV:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: =If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "PV" && AP_DUNG = "1" ).TEN_KIEU)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSPVCS)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =40
                              Y: =76
                        - GalleryPVCS:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSApdungPV
                              TemplateSize: =35
                              Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                              Width: =965
                              X: =253.2
                              Y: =76
                            Children:
                              - DropPVCS:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "PV")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboPVCS)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboPVCS:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = DropPVCS.Selected.MA_CHI_TIEU)
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =600
                                    X: =268
                                    Y: =5
                              - Button5_19:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSApdungPV, ThisItem.cr282_id=cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - PV_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Default: =ThisItem.cr282_id
                                    Font: =Font.'Open Sans'
                                    HoverBorderColor: =RGBA(0, 18, 107, 1)
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    OnSelect: =Select(Parent)
                                    Visible: =false
                                    X: =40
                                    Y: =6
                        - Label7_14:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Áp dụng"
                              X: =25
                              Y: =36
                        - RadioCSPV_LoaiTru:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: |-
                                =If(IsBlank(varMaCS) Or varXoaPV_CS, "",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "PV" && AP_DUNG = "2" ).TEN_KIEU
                                )
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSPVCS_LT)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =41
                              Y: =321
                        - GalleryPVCS_LoaiTru:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSLoaitruPV
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 ,true)
                              Width: =965
                              X: =253.2
                              Y: =321
                            Children:
                              - DropPVCS_LoaiTru:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "PV")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboPVCS_LT)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboPVCS_LT:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = DropPVCS_LoaiTru.Selected.MA_CHI_TIEU)
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =600
                                    X: =268
                                    Y: =5
                              - Button5_20:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSLoaitruPV, ThisItem.cr282_id=cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - PVLT_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Default: =ThisItem.cr282_id
                                    Font: =Font.'Open Sans'
                                    HoverBorderColor: =RGBA(0, 18, 107, 1)
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    OnSelect: =Select(Parent)
                                    Visible: =false
                                    X: =40
                                    Y: =6
                        - Label7_15:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Loại trừ"
                              X: =25
                              Y: =245
                        - Button3_11:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |-
                                =Collect(
                                    tmpCSApdungPV,
                                    [{cr282_id:Value( Max (tmpCSApdungPV, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                              Width: =91
                              X: =253.2
                              Y: =11
                        - Button3_12:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |-
                                =Collect(
                                    tmpCSLoaitruPV,
                                    [{cr282_id:Value( Max (tmpCSLoaitruPV, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 ,true)
                              Width: =91
                              X: =253.2
                              Y: =252
                        - ResetDSPVCS:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSApdungPV,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =199
                              Y: =40
                        - ResetDSPVCS_LT:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSLoaitruPV,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "2"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =199
                              Y: =245
                        - BadgeCanvas1_50:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                              Width: =965
                              X: =254
                              Y: =46
                        - Label9_36:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =46
                        - Label9_37:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                              Width: =72
                              X: =729
                              Y: =46
                        - BadgeCanvas1_53:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =292
                        - Label9_42:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =292
                        - Label9_43:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 , true)
                              Width: =72
                              X: =729
                              Y: =291
                        - Icon2_8:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 1)
                              Color: =RGBA(0, 0, 0, 1)
                              Height: =20
                              Icon: =Icon.Cancel
                              OnSelect: |-
                                =Reset(RadioCSPV_LoaiTru);
                                Set(varXoaPV_CS, true);
                              Width: =20
                              X: =123
                              Y: =255
                  - Container3.1:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        Fill: =RGBA(255, 255, 255, 1)
                        Height: =514
                        Width: =Parent.Width-Self.X-10
                        X: =130
                        Y: =718
                      Children:
                        - Label6_7:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =47
                              Size: =11
                              Text: ="3.1 Sản phẩm"
                              Width: =253
                              Y: =45
                        - RadioCSSP:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: |-
                                =If(IsBlank(varMaCS), "Tất cả", 
                                LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH = varMaCS  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSSPCS)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =40
                              Y: =121
                        - GalleryCSSP:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSApdungSP
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                              Width: =965
                              X: =253.2
                              Y: =121
                            Children:
                              - DropCSSP:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(72, 163, 62, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "SP")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboBoxCSSP); Reset(DropPVSP)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboBoxCSSP:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(72, 163, 62, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = If(DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP","MA_SP",DropCSSP.Selected.MA_CHI_TIEU))
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =400
                                    X: =268
                                    Y: =5
                              - BtnXoaCSSP:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSApdungSP, cr282_id = ThisItem.cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =887
                                    Y: =5
                              - SP_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_id
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Segoe UI'
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: |
                                      =false
                                    X: =40
                                    Y: =6
                              - DropPVSP:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(72, 163, 62, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_pv_ad
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =DM_PHAMVI_AD
                                    Items.Value: =cr282_ten_phamvi_ad
                                    OnChange: =
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Visible: =DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP"
                                    Width: =200
                                    X: =668
                                    Y: =5
                        - Label7_12:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Áp dụng"
                              X: =25
                              Y: =81
                        - RadioCSSP_LoaiTru:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: =If(IsBlank(varMaCS) Or varXoaSP_CS, "",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "SP" && AP_DUNG = "2" ).TEN_KIEU)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetDSSPCS_LT)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =41
                              Y: =362
                        - GalleryCSSP_LoaiTru:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =147
                              Items: =tmpCSLoaitruSP
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253.2
                              Y: =362
                            Children:
                              - DropSPCS_LoaiTru:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "SP")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboBoxCSSP_LT); Reset(DropPVSP_LT)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboBoxCSSP_LT:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_gia_tri"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =Filter( tmpDsGiatriCS, Loai = If(DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP","MA_SP",DropSPCS_LoaiTru.Selected.MA_CHI_TIEU))
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_gia_tri"]
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =400
                                    X: =268
                                    Y: =5
                              - BtnXoaCSSP_LT:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSLoaitruSP, cr282_id = ThisItem.cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - SP_ID_LoaiTru:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_id
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Segoe UI'
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: =false
                                    X: =40
                                    Y: =6
                              - DropPVSP_LT:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(72, 163, 62, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_pv_ad
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =DM_PHAMVI_AD
                                    Items.Value: =cr282_ten_phamvi_ad
                                    OnChange: =
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Visible: =DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP"
                                    Width: =200
                                    X: =668
                                    Y: =5
                        - Label7_13:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Loại trừ"
                              X: =25
                              Y: =293
                        - BtnADCS_SP:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |
                                =Collect(
                                    tmpCSApdungSP,
                                    [{cr282_id:Value( Max (tmpCSApdungSP, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSSP.Selected.ID = 2, true)
                              Width: =91
                              X: =253.2
                              Y: =61
                        - BtnLTCS_SP:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |
                                =Collect(
                                    tmpCSLoaitruSP,
                                    [{cr282_id:Value( Max (tmpCSLoaitruSP, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                              Width: =91
                              X: =253.2
                              Y: =299
                        - ResetDSSPCS:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSApdungSP,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "1"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =157
                              Y: =86
                        - ResetDSSPCS_LT:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSLoaitruSP,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "2"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =170
                              Y: =324
                        - Label6_8:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =46
                              Size: =11
                              Text: ="3. Đối tượng áp dụng"
                              Width: =Parent.Width
                        - BadgeCanvas1_46:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =92
                        - Label9_24:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =92
                        - Label9_25:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                              Width: =72
                              X: =663
                              Y: =92
                        - Label9_32:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =28
                              OnSelect: =
                              Size: =11
                              Text: ="Phạm vi áp dụng"
                              Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                              Width: =133
                              X: =959
                              Y: =91
                        - BadgeCanvas1_47:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =333
                        - Label9_28:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                              Width: =67
                              X: =329
                              Y: =331
                        - Label9_29:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị"
                              Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                              Width: =72
                              X: =668
                              Y: =333
                        - Label9_34:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =28
                              OnSelect: =
                              Size: =11
                              Text: ="Phạm vi áp dụng"
                              Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                              Width: =133
                              X: =964
                              Y: =332
                        - Icon2_5:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 1)
                              Color: =RGBA(0, 0, 0, 1)
                              Height: =20
                              Icon: =Icon.Cancel
                              OnSelect: |-
                                =Reset(RadioCSSP_LoaiTru);
                                Set(varXoaSP_CS, true);
                              Width: =20
                              X: =123
                              Y: =304
                  - Container3.5:
                      Control: GroupContainer@1.3.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        Height: =485
                        Width: =Parent.Width-Self.X-10
                        X: =130
                        Y: =2677
                      Children:
                        - Label6_12:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =46
                              Size: =11
                              Text: ="3.5 Số tiền"
                              Width: =Parent.Width
                        - RadioST:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: |-
                                =
                                If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "ST" && AP_DUNG = "1" ).TEN_KIEU)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetST)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =40
                              Y: =76
                        - GalleryST:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSApdungST
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =965
                              X: =253.2
                              Y: =76
                            Children:
                              - DropST:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(45, 128, 40, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(45, 128, 40, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "ST")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboST)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboST:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(45, 128, 40, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(45, 128, 40, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_thoihan_ad"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =DM_THOIHAN_AD
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    SearchFields: =["cr282_ten_thoihan_ad"]
                                    SelectMultiple: =false
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(204, 228, 246, 1)
                                    Size: =11
                                    Visible: =If(DropST.Selected.MA_CHI_TIEU="MA_ST_TP",false,true)
                                    Width: =200
                                    X: =667
                                    Y: =5
                              - Button5_21:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSApdungST, ThisItem.cr282_id=cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - ST_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Default: =ThisItem.cr282_id
                                    Font: =Font.'Open Sans'
                                    HoverBorderColor: =RGBA(0, 18, 107, 1)
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    OnSelect: =Select(Parent)
                                    Visible: =false
                                    X: =40
                                    Y: =6
                              - GiaTriTu:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    Align: =Align.Right
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_giatri_tu
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Open Sans'
                                    Format: =TextFormat.Number
                                    Height: =30
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Size: =11
                                    Width: =200
                                    X: =267
                                    Y: =5
                              - GiaTriDen:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    Align: =Align.Right
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_giatri_den
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Open Sans'
                                    Format: =TextFormat.Number
                                    Height: =30
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Size: =11
                                    Width: =200
                                    X: =467
                                    Y: =5
                        - Label7_16:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Áp dụng"
                              X: =25
                              Y: =36
                        - RadioST_LoaiTru:
                            Control: Classic/Radio@2.3.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Default: |-
                                =If(IsBlank(varMaCS) Or varXoaST_CS, "",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "ST" && AP_DUNG = "2" ).TEN_KIEU
                                )
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Font: =Font.'Open Sans'
                              HoverColor: =RGBA(0, 0, 0, 1)
                              Items: |-
                                =[{Text:"Một phần", ID: 2}]
                              Items.Value: =Text
                              OnSelect: =Select(ResetST_LT)
                              RadioBorderColor: =RGBA(0, 84, 148, 1)
                              RadioSelectionFill: =RGBA(0, 0, 0, 1)
                              Size: =11
                              X: =41
                              Y: =319
                        - GalleryST_LoaiTru:
                            Control: Gallery@2.15.0
                            Variant: Vertical
                            Properties:
                              BorderColor: =RGBA(180, 214, 250, 1)
                              BorderThickness: =1
                              Height: =156
                              Items: =tmpCSLoaitruST
                              TemplatePadding: =0
                              TemplateSize: =35
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 ,true)
                              Width: =965
                              X: =253.2
                              Y: =319
                            Children:
                              - DropST_LoaiTru:
                                  Control: Classic/DropDown@2.3.1
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    Default: =ThisItem.cr282_ten_tieu_chi
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "ST")
                                    Items.Value: =cr282_ten_chi_tieu
                                    OnChange: =Reset(ComboST_LT)
                                    OnSelect: =
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Width: =258
                                    X: =10
                                    Y: =5
                              - ComboST_LT:
                                  Control: Classic/ComboBox@2.4.0
                                  Properties:
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    ChevronBackground: =RGBA(255, 255, 255, 1)
                                    ChevronFill: =RGBA(54, 176, 75, 1)
                                    ChevronHoverBackground: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    ChevronHoverFill: =RGBA(255, 255, 255, 1)
                                    DefaultSelectedItems: =ThisItem.GROUP_CS
                                    DisabledBorderColor: =RGBA(204, 228, 246, 1)
                                    DisabledFill: =RGBA(230, 230, 230, 1)
                                    DisplayFields: =["cr282_ten_thoihan_ad"]
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Font: =Font.'Open Sans'
                                    Height: =30
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    IsSearchable: =false
                                    Items: =DM_THOIHAN_AD
                                    OnSelect: =Select(Parent)
                                    PressedColor: =RGBA(255, 255, 255, 1)
                                    PressedFill: =RGBA(0, 18, 107, 1)
                                    SearchFields: =["cr282_ten_thoihan_ad"]
                                    SelectMultiple: =false
                                    SelectionColor: =RGBA(255, 255, 255, 1)
                                    SelectionFill: =RGBA(56, 96, 178, 1)
                                    Size: =11
                                    Visible: =If(DropST_LoaiTru.Selected.MA_CHI_TIEU="MA_ST_TP",false,true)
                                    Width: =200
                                    X: =667
                                    Y: =5
                              - Button5_22:
                                  Control: Classic/Button@2.2.0
                                  Properties:
                                    BorderColor: =ColorFade(Self.Fill, -15%)
                                    Color: =RGBA(255, 255, 255, 1)
                                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                                    Fill: =RGBA(56, 96, 178, 1)
                                    Font: =Font.'Open Sans'
                                    Height: =28
                                    HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                                    HoverColor: =RGBA(255, 255, 255, 1)
                                    HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                                    OnSelect: =RemoveIf(tmpCSLoaitruST, ThisItem.cr282_id=cr282_id)
                                    PressedBorderColor: =Self.Fill
                                    PressedColor: =Self.Fill
                                    PressedFill: =Self.Color
                                    Size: =11
                                    Text: ="Xoá"
                                    Width: =73
                                    X: =880
                                    Y: =5
                              - STLT_ID:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Default: =ThisItem.cr282_id
                                    Font: =Font.'Open Sans'
                                    HoverBorderColor: =RGBA(0, 18, 107, 1)
                                    HoverFill: =RGBA(186, 202, 226, 1)
                                    OnSelect: =Select(Parent)
                                    Visible: =false
                                    X: =40
                                    Y: =6
                              - GiaTriTu_LT:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    Align: =Align.Right
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_giatri_tu
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Open Sans'
                                    Format: =TextFormat.Number
                                    Height: =30
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Size: =11
                                    Width: =200
                                    X: =267
                                    Y: =5
                              - GiaTriDen_LT:
                                  Control: Classic/TextInput@2.3.2
                                  Properties:
                                    Align: =Align.Right
                                    BorderColor: =RGBA(54, 176, 75, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Default: =ThisItem.cr282_giatri_den
                                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                    DisabledColor: =RGBA(161, 159, 157, 1)
                                    DisabledFill: =RGBA(242, 242, 241, 0)
                                    Font: =Font.'Open Sans'
                                    Format: =TextFormat.Number
                                    Height: =30
                                    HoverBorderColor: =RGBA(16, 110, 190, 1)
                                    HoverColor: =RGBA(50, 49, 48, 1)
                                    HoverFill: =RGBA(255, 255, 255, 1)
                                    OnSelect: =Select(Parent)
                                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                                    PressedColor: =RGBA(50, 49, 48, 1)
                                    PressedFill: =RGBA(255, 255, 255, 1)
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Size: =11
                                    Width: =200
                                    X: =467
                                    Y: =5
                        - Label7_17:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Size: =11
                              Text: ="Loại trừ"
                              X: =25
                              Y: =250
                        - Button3_13:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |-
                                =Collect(
                                    tmpCSApdungST,
                                    [{cr282_id:Value( Max (tmpCSApdungST, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =91
                              X: =253.2
                              Y: =11
                        - Button3_14:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                              Fill: =RGBA(56, 96, 178, 1)
                              Font: =Font.'Open Sans'
                              Height: =25
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: |-
                                =Collect(
                                    tmpCSLoaitruST,
                                    [{cr282_id:Value( Max (tmpCSLoaitruST, cr282_id) + 1)}]
                                );
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              Size: =11
                              Text: ="Thêm mới"
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 ,true)
                              Width: =91
                              X: =253.2
                              Y: =257
                        - ResetST:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |-
                                =ClearCollect(
                                    tmpCSApdungST,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                                        ),ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =199
                              Y: =40
                        - ResetST_LT:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              Color: =RGBA(0, 120, 212, 1)
                              DisabledBorderColor: =RGBA(245, 245, 245, 1)
                              DisabledColor: =RGBA(225, 223, 221, 1)
                              DisabledFill: =RGBA(0, 0, 0, 0)
                              FocusedBorderThickness: =4
                              Height: =30
                              HoverBorderColor: =RGBA(0, 0, 0, 0)
                              HoverColor: =RGBA(16, 110, 190, 1)
                              HoverFill: =RGBA(0, 0, 0, 0)
                              Icon: =Icon.Reset
                              OnSelect: |
                                =ClearCollect(
                                    tmpCSLoaitruST,
                                    GroupBy(
                                        Filter(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = varMaCS && THANH_PHAN = "ST" && AP_DUNG = "2"
                                        ),
                                        ID,
                                        MA_CHINH_SACH,
                                        AP_DUNG,
                                        MA_TIEU_CHI,
                                        TEN_TIEU_CHI,
                                        MA_PV_AD,
                                        TEN_PV_AD,
                                        GIATRI_TU,
                                        GIATRI_DEN,
                                        GROUP_CS
                                    )
                                );
                              PressedBorderColor: =RGBA(0, 0, 0, 0)
                              PressedColor: =RGBA(16, 110, 190, 1)
                              PressedFill: =RGBA(0, 0, 0, 0)
                              Visible: =false
                              Width: =30
                              X: =199
                              Y: =243
                        - BadgeCanvas1_54:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =290
                        - Label9_44:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                              Width: =67
                              X: =327
                              Y: =289
                        - BadgeCanvas1_55:
                            Control: Badge@0.0.24
                            Properties:
                              Content: =""
                              Height: =27
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =965
                              X: =253
                              Y: =47
                        - Label9_46:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Tiêu chí"
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =67
                              X: =327
                              Y: =47
                        - Label9_47:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị từ"
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =80
                              X: =531
                              Y: =47
                        - Label9_48:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị đến"
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =90
                              X: =721
                              Y: =47
                        - Label9_49:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Thời hạn áp dụng"
                              Visible: =If(RadioST.Selected.ID = 2 , true)
                              Width: =140
                              X: =923
                              Y: =47
                        - Label9_50:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị từ"
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                              Width: =80
                              X: =531
                              Y: =289
                        - Label9_51:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Giá trị đến"
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                              Width: =90
                              X: =721
                              Y: =289
                        - Label9_52:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              FontWeight: =FontWeight.Bold
                              Height: =29
                              OnSelect: =
                              Size: =11
                              Text: ="Thời hạn áp dụng"
                              Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                              Width: =140
                              X: =923
                              Y: =290
                        - Icon2_9:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 1)
                              Color: =RGBA(0, 0, 0, 1)
                              Height: =20
                              Icon: =Icon.Cancel
                              OnSelect: |-
                                =Reset(RadioST_LoaiTru);
                                Set(varXoaST_CS, true);
                              Width: =20
                              X: =123
                              Y: =260
      - BtnBack:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: =Back();
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Size: =11
            Text: ="Quay lại"
            Width: =116
            X: =993
            Y: =728
      - BtnGhiCS:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: "=//Xu ly thong tin chung\nUpdateContext({errorMsgCS: \"\"});\nUpdateContext({varMoTa: \"\"});\nClear(tmpCheckDup);\nClear(errorCol);\nClear(colAD);\nClear(colLT);\n//ID chinh sach chung\nIf(\n    IsBlank(DataCardIDCS.Text),\n    UpdateContext(\n        {\n            newIDCS: If(\n                CountIf(\n                    DL_CHINHSACH_CHUNG,\n                    true\n                ) = 0,\n                1,\n                Max(\n                    DL_CHINHSACH_CHUNG,\n                    ID\n                ) + 1\n            )\n        }\n    ),\n    UpdateContext({newIDCS: Value(DataCardIDCS.Text)})\n);\n//ID chinh sach ap dung\nIf(\n    IsBlank(DataCardIDCSApDung.Text),\n    UpdateContext(\n        {\n            newIDCSApdung: If(\n                CountIf(\n                    DL_CHINHSACH_APDUNG,\n                    true\n                ) = 0,\n                1,\n                Max(\n                    DL_CHINHSACH_APDUNG,\n                    ID\n                ) + 1\n            )\n        }\n    ),\n    UpdateContext({newIDCSApdung: Value(DataCardIDCSApDung.Text)})\n);\n//Ma chinh sach\nIf(\n    IsBlank(DataCardValueMaCS.Text),\n    UpdateContext(\n        {\n            newMaCS: Concatenate(\n                \"CS\",\n                If(\n                    newIDCS < 10,\n                    \"000\",\n                    If(\n                        newIDCS < 100 && newIDCS >= 10,\n                        \"00\",\n                        If(\n                            newIDCS < 1000 && newIDCS >= 100,\n                            \"0\",\n                            \"\"\n                        )\n                    )\n                ),\n                Text(newIDCS)\n            )\n        }\n    ),\n    UpdateContext({newMaCS: DataCardValueMaCS.Text})\n);\nIf(\n    IsBlank(DateValueTuCS.SelectedDate),\n    UpdateContext({errorMsgCS: \"Hiệu lực từ là bắt buộc\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DateValueDenCS.SelectedDate) && DateValueTuCS.SelectedDate > DateValueDenCS.SelectedDate,\n    UpdateContext({errorMsgCS: \"Hiệu lực đến phải sau hiệu lực từ\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DataCardVSoTienAD.Text) && Value(DataCardVSoTienAD.Text) > 2147483647,\n    UpdateContext({errorMsgCS: \"Giá trị phải nằm trong khoảng từ 0 đến 2147483647\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DataCardTyLeApDung.Text) && Value(DataCardTyLeApDung.Text) > 2147483647,\n    UpdateContext({errorMsgCS: \"Giá trị phải nằm trong khoảng từ 0 đến 2147483647\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DataCardSoTienToiDa.Text) && Value(DataCardSoTienToiDa.Text) > 2147483647,\n    UpdateContext({errorMsgCS: \"Số tiền tối đa phải nằm trong khoảng từ 0 đến 2147483647\"})\n);\n//Kiem tra tieu chi la duy nhat\n//sản phâm\n//sản phâm - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungSP) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryCSSP.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"SP\",\n                Value: kh.DropCSSP.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryCSSP.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"SP\" && Value = kh.DropCSSP.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng sản phẩm\"}\n            )\n        );\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//sản phâm - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruSP) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryCSSP_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"SP\",\n                Value: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryCSSP_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"SP\" && Value = kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ sản phẩm\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End sản phâm\n//Kenh ban\n//Kenh ban - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryKBCS.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KB\",\n                Value: kh.DropKBCS.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKBCS.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KB\" && Value = kh.DropKBCS.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng kênh bán\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//Kenh ban - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryKBCS_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KB\",\n                Value: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKBCS_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KB\" && Value = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ kênh bán\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End kenh ban\n//Khach hang\n//Khach hang - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungKH) > 0,\n    Clear(errorCol);\n    ForAll(\n        GalleryKHCS.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KH\",\n                Value: kh.DropKHCS.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKHCS.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KH\" && Value = kh.DropKHCS.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng khách hàng\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//Khach hang - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpLoaitruKH) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryKHCS_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KH\",\n                Value: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKHCS_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KH\" && Value = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ khách hàng\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End khách hàng\n//Phạm vi\n//pham vi - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpApdungPV) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryPVCS.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"PV\",\n                Value: kh.DropPVCS.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryPVCS.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"PV\" && Value = kh.DropPVCS.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng phạm vi\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//Pham vi - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpLoaitruPV) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryPV_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"PV\",\n                Value: kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryPV_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"PV\" && Value = kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ phạm vi\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End phạm vi\n//So tien\n//So tien - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungST) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryST.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"ST\",\n                Value: kh.DropST.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryST.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"ST\" && Value = kh.DropST.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng số tiền\"}\n            )\n        );\n        If(\n            !IsBlank(kh.GiaTriDen.Text) && Value(kh.GiaTriDen.Text) > 2147483647,\n            Collect(\n                errorCol,\n                {Message: \"Giá trị từ phải nằm trong khoảng từ 0 đến 2147483647\"}\n            )\n        );\n        If(\n            !IsBlank(kh.GiaTriTu.Text) && Value(kh.GiaTriTu.Text) > 2147483647,\n            Collect(\n                errorCol,\n                {Message: \"Giá trị đến phải nằm trong khoảng từ 0 đến 2147483647\"}\n            )\n        );\n        If(\n            Value(kh.GiaTriDen.Text) < Value(kh.GiaTriTu.Text),\n            Collect(\n                errorCol,\n                {Message: \"Giá trị đến phải lớn hơn giá trị từ tại mục số tiền áp dụng\"}\n            )\n        );\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//So tien - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruST) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryST_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"ST\",\n                Value: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryST_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"ST\" && Value = kh.DropST_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ số tiền\"}\n            )\n        );\n        If(\n            Value(kh.GiaTriDen_LT.Text) < Value(kh.GiaTriTu_LT.Text),\n            Collect(\n                errorCol,\n                {Message: \"Giá trị đến phải lớn hơn giá trị từ  tại mục số tiền loại trừ\"}\n            )\n        );\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End so tien\n//End kiem tra duy nhat\nIf(\n    !IsBlank(errorMsgCS),\n    Notify(\n        errorMsgCS,\n        NotificationType.Error,\n        800\n    ),\n    SubmitForm(TTChungCS);\n    SubmitForm(TTCSApDung);\n    Set(\n        varMaCS,\n        newMaCS\n    );\n    EditForm(TTChungCS);\n    EditForm(TTCSApDung);\n    RemoveIf(\n        DL_CHINHSACH_DOITUONG,\n        MA_CHINH_SACH = newMaCS\n    );\n    RemoveIf(\n        DL_CHINHSACH_DOITUONG_CT,\n        MA_CHINH_SACH = newMaCS\n    );\n // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG San pham\nClear(colAD);\n    Clear(colLT);\n    Set(\n        varIdAdCSSP,\n        0\n    );\n    Set(\n        varIdLtCSSP,\n        0\n    );\n    Set(\n        varIdAdCSSP,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSSP,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"SP\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSSP.Selected.ID,\n            TEN_KIEU: RadioCSSP.Selected.Text\n        }\n    );\n    If(\n        RadioCSSP_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSSP,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: varIdLtCSSP,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"SP\",\n                AP_DUNG: \"2\",\n                KIEU: RadioCSSP_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSSP_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTSP: \"\"});\n    UpdateContext({varSP: \"\"});\n    If(\n        RadioCSSP.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungSP) > 0,\n            ForAll(\n                GalleryCSSP.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSSP.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                gt.cr282_ten_gia_tri,\n                                Concatenate(\n                                    kh.DropCSSP.Selected.TEN_CHI_TIEU,\n                                    \" \",\n                                    gt.cr282_ten_gia_tri\n                                )\n                            ),\n                            Loai: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                \"COMBO_SP\",\n                                \"SP\"\n                            ),\n                            Phamvi: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.SP_ID.Text),\n                            ID_DOITUONG: varIdAdCSSP,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"SP\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSSP.Selected.ID,\n                            MA_TIEU_CHI: kh.DropCSSP.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropCSSP.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(\n                                    kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                    \"MA_SP\",\n                                    kh.DropCSSP.Selected.MA_CHI_TIEU\n                                )\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri,\n                            MA_PV_AD: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                LookUp(\n                                    DM_PHAMVI_AD,\n                                    TEN_PHAMVI_AD = kh.DropPVSP.Selected.TEN_PHAMVI_AD\n                                ).ID,\n                                \"\"\n                            ),\n                            TEN_PV_AD: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    );\n                )\n            );\n        )\n    );\n    If(\n        RadioCSSP.Selected.ID = 2,\n        UpdateContext({varMTSP_Combo: \"\"});\n        UpdateContext({varSP_Combo: \"\"});\n        If(\n            CountIf(\n                colAD,\n                Loai = \"COMBO_SP\"\n            ) > 0,\n            UpdateContext(\n                {\n                    varMTSP_Combo: Concatenate(\n                        \"Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \" + \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_Combo: Concatenate(\n                        \"+ Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n        );\n        If(\n            !IsBlank(varMTSP_Combo),\n            UpdateContext(\n                {\n                    varMTSP: Concatenate(\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \", \",\n                        varMTSP_Combo\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP: Concatenate(\n                        \"- Áp dụng: </br>\",\n                        varSP_Combo,\n                        If(\n                            CountRows(\n                                Filter(\n                                    colAD,\n                                    Loai = \"SP\"\n                                )\n                            ) > 0,\n                            \"</br>+ \",\n                            Concat(\n                                Filter(\n                                    colAD,\n                                    Loai = \"SP\"\n                                ),\n                                Ten,\n                                \"</br>+ \"\n                            ),\n                            \"\"\n                        )\n                    )\n                }\n            );\n            ,\n            UpdateContext(\n                {\n                    varSP: Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"SP\"\n                        ),\n                        Ten,\n                        \", \"\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP: Concatenate(\n                        \"- Áp dụng: </br>\",\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \"</br>+ \"\n                        )\n                    )\n                }\n            );\n        );\n        ,\n        UpdateContext({varMTSP: \"Tất cả sản phẩm\"});\n        UpdateContext({varSP: \"- Áp dụng: Tất cả\"})\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTSP_LT: \"\"});\n    UpdateContext({varSP_LT: \"\"});\n    If(\n        RadioCSSP_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruSP) > 0,\n            ForAll(\n                GalleryCSSP_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSSP_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                gt.cr282_ten_gia_tri,\n                                Concatenate(\n                                    kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                    \" \",\n                                    gt.cr282_ten_gia_tri\n                                )\n                            ),\n                            Loai: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                \"COMBO_SP\",\n                                \"SP\"\n                            ),\n                            Phamvi: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.SP_ID_LoaiTru.Text),\n                            ID_DOITUONG: varIdLtCSSP,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"SP\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSSP_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(\n                                    kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                    \"MA_SP\",\n                                    kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU\n                                )\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri,\n                            MA_PV_AD: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                LookUp(\n                                    DM_PHAMVI_AD,\n                                    TEN_PHAMVI_AD = kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD\n                                ).ID,\n                                \"\"\n                            ),\n                            TEN_PV_AD: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSSP_LoaiTru.Selected.ID = 2,\n        UpdateContext({varMTSP_Combo: \"\"});\n        UpdateContext({varSP_Combo: \"\"});\n        If(\n            CountIf(\n                colLT,\n                Loai = \"COMBO_SP\"\n            ) > 0,\n            UpdateContext(\n                {\n                    varMTSP_Combo: Concatenate(\n                        \"Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \" + \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_Combo: Concatenate(\n                        \"+ Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n        );\n        If(\n            !IsBlank(varMTSP_Combo),\n            UpdateContext(\n                {\n                    varMTSP_LT: Concatenate(\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \", \",\n                        varMTSP_Combo\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_LT: Concatenate(\n                        \"- Loại trừ:</br>\",\n                        varSP_Combo,\n                        If(\n                            CountRows(\n                                Filter(\n                                    colLT,\n                                    Loai = \"SP\"\n                                )\n                            ) > 0,\n                            \"</br>+ \",\n                            Concat(\n                                Filter(\n                                    colLT,\n                                    Loai = \"SP\"\n                                ),\n                                Ten,\n                                \"</br>+ \"\n                            ),\n                            \"\"\n                        )\n                    )\n                }\n            ),\n            UpdateContext(\n                {\n                    varMTSP_LT: Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"SP\"\n                        ),\n                        Ten,\n                        \", \"\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_LT: Concatenate(\n                        \"- Loại trừ:</br>+ \",\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \"</br>+ \"\n                        )\n                    )\n                }\n            )\n        );\n        ,\n        UpdateContext({varSP_LT: \"- Loại trừ: \"});\n    );\n    \n//End San pham\n// lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KENH BAN\nSet(\n        varIdAdCSKB,\n        0\n    );\n    Set(\n        varIdLtCSKB,\n        0\n    );\n    Set(\n        varIdAdCSKB,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSKB,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"KB\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSKB.Selected.ID,\n            TEN_KIEU: RadioCSKB.Selected.Text\n        }\n    );\n    If(\n        RadioCSKB_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSKB,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: varIdLtCSKB,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"KB\",\n                AP_DUNG: \"2\",\n                KIEU: RadioCSKB_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSKB_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTKB: \"\"});\n    UpdateContext({varKB: \"\"});\n    If(\n        RadioCSKB.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungKB) > 0,\n            ForAll(\n                GalleryKBCS.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSKB.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKBCS.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KB\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.CSAD_ID.Text),\n                            ID_DOITUONG: varIdAdCSKB,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KB\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSKB.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKBCS.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKBCS.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKB.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKB: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"KB\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKB: Concatenate(\n                    \"- Áp dụng:</br>+ \",\n                    Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"KB\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varMTKB: \"Tất cả kênh bán\"});\n        UpdateContext({varKB: \"- Áp dụng: Tất cả\"});\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTKB_LT: \"\"});\n    UpdateContext({varKB_LT: \"\"});\n    If(\n        RadioCSKB_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruKB) > 0,\n            ForAll(\n                GalleryKBCS_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSKB_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KB\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.CSAD_ID_LoaiTru.Text),\n                            ID_DOITUONG: varIdLtCSKB,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KB\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSKB_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKB_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKB_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"KB\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKB_LT: Concatenate(\n                    \"- Loại trừ:</br>+ \",\n                    Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"KB\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varKB_LT: \"- Loại trừ: \"});\n    );\n    \n//End kenh ban\n// lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KHANH HANG\nSet(\n        varIdAdCSKH,\n        0\n    );\n    Set(\n        varIdLtCSKH,\n        0\n    );\n    Set(\n        varIdAdCSKH,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSKH,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"KH\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSKH.Selected.ID,\n            TEN_KIEU: RadioCSKH.Selected.Text\n        }\n    );\n    If(\n        RadioCSKH_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSKH,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"KH\",\n                AP_DUNG: \"2\",\n                KIEU: RadioCSKH_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSKH_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTKH: \"\"});\n    UpdateContext({varKH: \"\"});\n    If(\n        RadioCSKH.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungKH) > 0,\n            ForAll(\n                GalleryKHCS.AllItems As kh,\n                ForAll(\n                    kh.ComboKHCS.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKHCS.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KH\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.KH_ID.Text),\n                            ID_DOITUONG: varIdAdCSKH,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KH\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSKH.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKHCS.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKHCS.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKH.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKH: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"KH\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKH: Concatenate(\n                    \"- Áp dụng:</br>+ \",\n                    Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"KH\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varMTKH: \"Tất cả khách hàng\"});\n        UpdateContext({varKH: \"- Áp dụng: Tất cả\"})\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTKH_LT: \"\"});\n    UpdateContext({varKH_LT: \"\"});\n    If(\n        RadioCSKH_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruKH) > 0,\n            ForAll(\n                GalleryKHCS_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboKHCS_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KH\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.KHLT_ID.Text),\n                            ID_DOITUONG: varIdLtCSKH,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KH\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSKB_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKH_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKH_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"KH\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKH_LT: Concatenate(\n                    \"- Loại trừ:</br>+ \",\n                    Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"KH\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        );\n        ,\n        UpdateContext({varKH_LT: \"- Loại trừ: \"})\n    );\n    \n// lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG PHAM_VI\nSet(\n        varIdAdCSPV,\n        0\n    );\n    Set(\n        varIdLtCSPV,\n        0\n    );\n    Set(\n        varIdAdCSPV,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSPV,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"PV\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSPV.Selected.ID,\n            TEN_KIEU: RadioCSPV.Selected.Text\n        }\n    );\n    If(\n        RadioCSPV_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSPV,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1,\n                MA_CHINH_SACH: newMaCS,\n                THANH_PHAN: \"PV\",\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                AP_DUNG: \"2\",\n                KIEU: RadioCSPV_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSPV_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTPV: \"\"});\n    UpdateContext({varPV: \"\"});\n    If(\n        RadioCSPV.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungPV) > 0,\n            ForAll(\n                GalleryPVCS.AllItems As pv,\n                ForAll(\n                    pv.ComboPVCS.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: Concatenate(\n                                pv.DropPVCS.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"PV\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(pv.PV_ID.Text),\n                            ID_DOITUONG: varIdAdCSPV,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"PV\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSPV.Selected.ID,\n                            MA_TIEU_CHI: pv.DropPVCS.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: pv.DropPVCS.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = pv.DropPVCS.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSPV.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTPV: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"PV\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varPV: Concatenate(\n                    \"- Áp dụng:</br>+ \",\n                    Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"PV\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varMTPV: \"Tất cả phạm vi\"});\n        UpdateContext({varPV: \"- Áp dụng: Tất cả\"});\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTPV_LT: \"\"});\n    UpdateContext({varPV_LT: \"\"});\n    If(\n        RadioCSPV_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruPV) > 0,\n            ForAll(\n                GalleryPVCS_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboPVCS_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: Concatenate(\n                                kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"PV\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.PVLT_ID.Text),\n                            ID_DOITUONG: varIdLtCSPV,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"PV\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSPV_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSPV_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTPV_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"PV\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varPV_LT: Concatenate(\n                    \"- Loại trừ:</br>+ \",\n                    Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"PV\"\n                        ),\n                        Ten,\n                        \"</br>+  \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varPV_LT: \"- Loại trừ: \"});\n    );\n    // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG SO TIEN\nSet(\n        varIdAdCSST,\n        0\n    );\n    Set(\n        varIdLtCSST,\n        0\n    );\n    Set(\n        varIdAdCSST,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSST,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"ST\",\n            AP_DUNG: \"1\",\n            KIEU: RadioST.Selected.ID,\n            TEN_KIEU: RadioST.Selected.Text\n        }\n    );\n    If(\n        RadioST_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSST,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"ST\",\n                AP_DUNG: \"2\",\n                KIEU: RadioST_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioST_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTST: \"\"});\n    If(\n        RadioST.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungST) > 0,\n            ForAll(\n                GalleryST.AllItems As pv,\n                Patch(\n                    colAD,\n                    Defaults(colAD),\n                    {\n                        Ten: Concatenate(\n                            pv.DropST.Selected.TEN_CHI_TIEU,\n                            \" \",\n                            If(\n                                pv.DropST.Selected.MA_CHI_TIEU = \"MA_ST_TP\",\n                                \"\",\n                                Concatenate(\n                                    pv.ComboST.Selected.TEN_THOIHAN_AD,\n                                    \" \"\n                                )\n                            ),\n                            \"có Giá trị từ \",\n                            Value(pv.GiaTriTu.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE,\n                            \" đến \",\n                            Value(pv.GiaTriDen.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE\n                        ),\n                        Loai: \"ST\"\n                    }\n                );\n                Patch(\n                    DL_CHINHSACH_DOITUONG_CT,\n                    Defaults(DL_CHINHSACH_DOITUONG_CT),\n                    {\n                        ID: Value(pv.ST_ID.Text),\n                        ID_DOITUONG: varIdAdCSST,\n                        MA_CHINH_SACH: newMaCS,\n                        LOAI_DK: DataCardLoaiDK.Selected.MA,\n                        ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                        THANH_PHAN: \"ST\",\n                        AP_DUNG: \"1\",\n                        KIEU: RadioST.Selected.ID,\n                        MA_TIEU_CHI: pv.DropST.Selected.MA_CHI_TIEU,\n                        TEN_TIEU_CHI: pv.DropST.Selected.TEN_CHI_TIEU,\n                        MA_GIA_TRI: LookUp(\n                            DM_THOIHAN_AD,\n                            TEN_THOIHAN_AD = pv.ComboST.Selected.TEN_THOIHAN_AD\n                        ).MA_THOIHAN_AD,\n                        TEN_GIA_TRI: pv.ComboST.Selected.TEN_THOIHAN_AD,\n                        GIATRI_TU: Value(pv.GiaTriTu.Text),\n                        GIATRI_DEN: Value(pv.GiaTriDen.Text)\n                    }\n                )\n            )\n        )\n    );\n    If(\n        RadioST.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTST: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"ST\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        ),\n        UpdateContext({varMTST: \"Tất cả số tiền\"})\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTST_LT: \"\"});\n    If(\n        RadioST_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruST) > 0,\n            ForAll(\n                GalleryST_LoaiTru.AllItems As kh,\n                Patch(\n                    colLT,\n                    Defaults(colLT),\n                    {\n                        Ten: Concatenate(\n                            kh.DropST_LoaiTru.Selected.TEN_CHI_TIEU,\n                            \" \",\n                            If(\n                                kh.DropST_LoaiTru.Selected.MA_CHI_TIEU = \"MA_ST_TP\",\n                                \"\",\n                                Concatenate(\n                                    kh.ComboST_LT.Selected.TEN_THOIHAN_AD,\n                                    \" \"\n                                )\n                            ),\n                            \"có Giá trị từ \",\n                            Value(kh.GiaTriTu_LT.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE,\n                            \" đến \",\n                            Value(kh.GiaTriDen_LT.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE\n                        ),\n                        Loai: \"ST\"\n                    }\n                );\n                Patch(\n                    DL_CHINHSACH_DOITUONG_CT,\n                    Defaults(DL_CHINHSACH_DOITUONG_CT),\n                    {\n                        ID: Value(kh.STLT_ID.Text),\n                        ID_DOITUONG: varIdLtCSST,\n                        MA_CHINH_SACH: newMaCS,\n                        LOAI_DK: DataCardLoaiDK.Selected.MA,\n                        ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                        THANH_PHAN: \"ST\",\n                        AP_DUNG: \"2\",\n                        KIEU: RadioST_LoaiTru.Selected.ID,\n                        MA_TIEU_CHI: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU,\n                        TEN_TIEU_CHI: kh.DropST_LoaiTru.Selected.TEN_CHI_TIEU,\n                        MA_GIA_TRI: LookUp(\n                            DM_THOIHAN_AD,\n                            TEN_THOIHAN_AD = kh.ComboST_LT.Selected.TEN_THOIHAN_AD\n                        ).TEN_THOIHAN_AD,\n                        TEN_GIA_TRI: kh.ComboST_LT.Selected.TEN_THOIHAN_AD,\n                        GIATRI_TU: Value(kh.GiaTriTu_LT.Text),\n                        GIATRI_DEN: Value(kh.GiaTriDen_LT.Text)\n                    }\n                )\n            )\n        )\n    );\n    If(\n        RadioST_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTST_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"ST\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        )\n    );\n    //Sinh mo ta\nUpdateContext(\n        {\n            varMoTa: Concatenate(\n                \"Chương trình \",\n                DataCardHinhThuc.Selected.TEN,\n                \" áp dụng \",\n                DataCardAnhHuong.Selected.TEN,\n                \" \",\n                If(\n                    DataCardKieuDL.Selected.MA = \"002\",\n                    DataCardVSoTienAD.Text,\n                    Concatenate(\n                        DataCardTyLeApDung.Text,\n                        \"(%)\",\n                        If(\n                            !IsBlank(DataCardSoTienToiDa.Text),\n                            Concatenate(\n                                \" tối đa \",\n                                DataCardSoTienToiDa.Text\n                            ),\n                            \"\"\n                        )\n                    )\n                ),\n                \" \",\n                DataCardTienTe.Selected.TIEN_TE,\n                \" có hiệu lực từ \",\n                Text(\n                    DateValueTuCS.SelectedDate,\n                    \"dd/mm/yyyy\"\n                ),\n                \" đến \",\n                If(\n                    !IsBlank(DateValueDenCS.SelectedDate),\n                    Text(\n                        DateValueDenCS.SelectedDate,\n                        \"dd/mm/yyyy\"\n                    ),\n                    \"khi có thông báo mới\"\n                ),\n                \" nếu thỏa mãn \",\n                If(\n                    DataCardLoaiDK.Selected.MA = \"1\",\n                    \"một trong số\",\n                    \"tất cả\"\n                ),\n                \" các điều kiện sau: \",\n                //San pham\n                varMTSP,\n                If(\n                    !IsBlank(varMTSP_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTSP_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //Kenh ban\n                varMTKB,\n                If(\n                    !IsBlank(varMTKB_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTKB_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //kHACH HANG\n                varMTKH,\n                If(\n                    !IsBlank(varMTKH_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTKH_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //pHAM VI\n                varMTPV,\n                If(\n                    !IsBlank(varMTPV_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTPV_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //So tien\n                varMTST,\n                If(\n                    !IsBlank(varMTST_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTST_LT,\n                        \")\"\n                    ),\n                    \"\"\n                )\n            )\n        }\n    );\n    //Sinh san pham\nUpdateContext(\n        {\n            varSanPham: Concatenate(\n                varSP,\n                \"</br>\",\n                varSP_LT\n            )\n        }\n    );\n    \n//Sinh kenh ban\nUpdateContext(\n        {\n            varKenhBan: Concatenate(\n                varKB,\n                \"</br>\",\n                varKB_LT\n            )\n        }\n    );\n    \n//Sinh khach hang\nUpdateContext(\n        {\n            varKhachHang: Concatenate(\n                varKH,\n                \"</br>\",\n                varKH_LT\n            )\n        }\n    );\n    \n//Sinh pham vi\nUpdateContext(\n        {\n            varPhamVi: Concatenate(\n                varPV,\n                \"</br>\",\n                varPV_LT\n            )\n        }\n    );\n    UpdateIf(\n        DL_CHINHSACH_CHUNG,\n        MA_CHINH_SACH = newMaCS,\n        {\n            MO_TA: varMoTa,\n            SAN_PHAM: varSanPham,\n            KENH_BAN: varKenhBan,\n            KHACH_HANG: varKhachHang,\n            PHAM_VI: varPhamVi\n        }\n    );\n);\n\nIf(\n    IsBlank(errorMsgCS),\n    /*UpdateIf(\n        DL_CHINHSACH_CHUNG,\n        MA_CHINH_SACH = varMaCS,\n        {TRANG_THAI_FIX: \"1\"}\n    );\n    Set(\n        varGhiCS,\n        true\n    );*/\n    Notify(\n        \"Ghi dữ liệu thành công\",\n        NotificationType.Success,\n        800\n    );\n);\n"
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Size: =11
            Text: ="Ghi dữ liệu"
            Visible: |-
              =//If(!IsBlank(DataCardValueMaCS.Text),true, false)
              false
            Width: =109
            X: =1246
            Y: =728
      - BtnLuuCS:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: "=//Xu ly thong tin chung\nUpdateContext({errorMsgCS: \"\"});\nUpdateContext({varMoTa: \"\"});\nClear(tmpCheckDup);\nClear(errorCol);\nClear(colAD);\nClear(colLT);\n//ID chinh sach chung\nIf(\n    IsBlank(DataCardIDCS.Text),\n    UpdateContext(\n        {\n            newIDCS: If(\n                CountIf(\n                    DL_CHINHSACH_CHUNG,\n                    true\n                ) = 0,\n                1,\n                Max(\n                    DL_CHINHSACH_CHUNG,\n                    ID\n                ) + 1\n            )\n        }\n    ),\n    UpdateContext({newIDCS: Value(DataCardIDCS.Text)})\n);\n//ID chinh sach ap dung\nIf(\n    IsBlank(DataCardIDCSApDung.Text),\n    UpdateContext(\n        {\n            newIDCSApdung: If(\n                CountIf(\n                    DL_CHINHSACH_APDUNG,\n                    true\n                ) = 0,\n                1,\n                Max(\n                    DL_CHINHSACH_APDUNG,\n                    ID\n                ) + 1\n            )\n        }\n    ),\n    UpdateContext({newIDCSApdung: Value(DataCardIDCSApDung.Text)})\n);\n//Ma chinh sach\nIf(\n    IsBlank(DataCardValueMaCS.Text),\n    UpdateContext(\n        {\n            newMaCS: Concatenate(\n                \"CS\",\n                If(\n                    newIDCS < 10,\n                    \"000\",\n                    If(\n                        newIDCS < 100 && newIDCS >= 10,\n                        \"00\",\n                        If(\n                            newIDCS < 1000 && newIDCS >= 100,\n                            \"0\",\n                            \"\"\n                        )\n                    )\n                ),\n                Text(newIDCS)\n            )\n        }\n    ),\n    UpdateContext({newMaCS: DataCardValueMaCS.Text})\n);\nIf(\n    IsBlank(DateValueTuCS.SelectedDate),\n    UpdateContext({errorMsgCS: \"Hiệu lực từ là bắt buộc\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DateValueDenCS.SelectedDate) && DateValueTuCS.SelectedDate > DateValueDenCS.SelectedDate,\n    UpdateContext({errorMsgCS: \"Hiệu lực đến phải sau hiệu lực từ\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DataCardVSoTienAD.Text) && Value(DataCardVSoTienAD.Text) > 2147483647,\n    UpdateContext({errorMsgCS: \"Giá trị phải nằm trong khoảng từ 0 đến 2147483647\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DataCardTyLeApDung.Text) && Value(DataCardTyLeApDung.Text) > 2147483647,\n    UpdateContext({errorMsgCS: \"Giá trị phải nằm trong khoảng từ 0 đến 2147483647\"})\n);\nIf(\n    IsBlank(errorMsgCS) && !IsBlank(DataCardSoTienToiDa.Text) && Value(DataCardSoTienToiDa.Text) > 2147483647,\n    UpdateContext({errorMsgCS: \"Số tiền tối đa phải nằm trong khoảng từ 0 đến 2147483647\"})\n);\n//Kiem tra tieu chi la duy nhat\n//sản phâm\n//sản phâm - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungSP) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryCSSP.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"SP\",\n                Value: kh.DropCSSP.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryCSSP.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"SP\" && Value = kh.DropCSSP.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng sản phẩm\"}\n            )\n        );\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//sản phâm - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruSP) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryCSSP_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"SP\",\n                Value: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryCSSP_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"SP\" && Value = kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ sản phẩm\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End sản phâm\n//Kenh ban\n//Kenh ban - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryKBCS.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KB\",\n                Value: kh.DropKBCS.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKBCS.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KB\" && Value = kh.DropKBCS.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng kênh bán\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//Kenh ban - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryKBCS_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KB\",\n                Value: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKBCS_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KB\" && Value = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ kênh bán\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End kenh ban\n//Khach hang\n//Khach hang - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungKH) > 0,\n    Clear(errorCol);\n    ForAll(\n        GalleryKHCS.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KH\",\n                Value: kh.DropKHCS.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKHCS.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KH\" && Value = kh.DropKHCS.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng khách hàng\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//Khach hang - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpLoaitruKH) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryKHCS_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"KH\",\n                Value: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryKHCS_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"KH\" && Value = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ khách hàng\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End khách hàng\n//Phạm vi\n//pham vi - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpApdungPV) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryPVCS.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"PV\",\n                Value: kh.DropPVCS.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryPVCS.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"PV\" && Value = kh.DropPVCS.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng phạm vi\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//Pham vi - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpLoaitruPV) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryPV_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"PV\",\n                Value: kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryPV_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"PV\" && Value = kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ phạm vi\"}\n            )\n        )\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End phạm vi\n//So tien\n//So tien - ap dung\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSApdungST) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryST.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"ST\",\n                Value: kh.DropST.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryST.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"ST\" && Value = kh.DropST.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí áp dụng số tiền\"}\n            )\n        );\n        If(\n            !IsBlank(kh.GiaTriDen.Text) && Value(kh.GiaTriDen.Text) > 2147483647,\n            Collect(\n                errorCol,\n                {Message: \"Giá trị từ phải nằm trong khoảng từ 0 đến 2147483647\"}\n            )\n        );\n        If(\n            !IsBlank(kh.GiaTriTu.Text) && Value(kh.GiaTriTu.Text) > 2147483647,\n            Collect(\n                errorCol,\n                {Message: \"Giá trị đến phải nằm trong khoảng từ 0 đến 2147483647\"}\n            )\n        );\n        If(\n            Value(kh.GiaTriDen.Text) < Value(kh.GiaTriTu.Text),\n            Collect(\n                errorCol,\n                {Message: \"Giá trị đến phải lớn hơn giá trị từ tại mục số tiền áp dụng\"}\n            )\n        );\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//So tien - loai tru\nIf(\n    IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruST) > 0,\n    Clear(errorCol);\n    Clear(tmpCheckDup);\n    ForAll(\n        GalleryST_LoaiTru.AllItems As kh,\n        Collect(\n            tmpCheckDup,\n            {\n                Type: \"ST\",\n                Value: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU\n            }\n        );\n    );\n    ForAll(\n        GalleryST_LoaiTru.AllItems As kh,\n        If(\n            CountIf(\n                tmpCheckDup,\n                Type = \"ST\" && Value = kh.DropST_LoaiTru.Selected.MA_CHI_TIEU\n            ) > 1,\n            Collect(\n                errorCol,\n                {Message: \"Trùng tiêu chí loại trừ số tiền\"}\n            )\n        );\n        If(\n            Value(kh.GiaTriDen_LT.Text) < Value(kh.GiaTriTu_LT.Text),\n            Collect(\n                errorCol,\n                {Message: \"Giá trị đến phải lớn hơn giá trị từ  tại mục số tiền loại trừ\"}\n            )\n        );\n    );\n    If(\n        !IsEmpty(errorCol),\n        UpdateContext({errorMsgCS: First(errorCol).Message})\n    )\n);\n//End so tien\n//End kiem tra duy nhat\nIf(\n    !IsBlank(errorMsgCS),\n    Notify(\n        errorMsgCS,\n        NotificationType.Error,\n        800\n    ),\n    SubmitForm(TTChungCS);\n    SubmitForm(TTCSApDung);\n    Set(\n        varMaCS,\n        newMaCS\n    );\n    EditForm(TTChungCS);\n    EditForm(TTCSApDung);\n    RemoveIf(\n        DL_CHINHSACH_DOITUONG,\n        MA_CHINH_SACH = newMaCS\n    );\n    RemoveIf(\n        DL_CHINHSACH_DOITUONG_CT,\n        MA_CHINH_SACH = newMaCS\n    );\n // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG San pham\nClear(colAD);\n    Clear(colLT);\n    Set(\n        varIdAdCSSP,\n        0\n    );\n    Set(\n        varIdLtCSSP,\n        0\n    );\n    Set(\n        varIdAdCSSP,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSSP,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"SP\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSSP.Selected.ID,\n            TEN_KIEU: RadioCSSP.Selected.Text\n        }\n    );\n    If(\n        RadioCSSP_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSSP,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: varIdLtCSSP,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"SP\",\n                AP_DUNG: \"2\",\n                KIEU: RadioCSSP_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSSP_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTSP: \"\"});\n    UpdateContext({varSP: \"\"});\n    If(\n        RadioCSSP.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungSP) > 0,\n            ForAll(\n                GalleryCSSP.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSSP.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                gt.cr282_ten_gia_tri,\n                                Concatenate(\n                                    kh.DropCSSP.Selected.TEN_CHI_TIEU,\n                                    \" \",\n                                    gt.cr282_ten_gia_tri\n                                )\n                            ),\n                            Loai: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                \"COMBO_SP\",\n                                \"SP\"\n                            ),\n                            Phamvi: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.SP_ID.Text),\n                            ID_DOITUONG: varIdAdCSSP,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"SP\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSSP.Selected.ID,\n                            MA_TIEU_CHI: kh.DropCSSP.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropCSSP.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(\n                                    kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                    \"MA_SP\",\n                                    kh.DropCSSP.Selected.MA_CHI_TIEU\n                                )\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri,\n                            MA_PV_AD: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                LookUp(\n                                    DM_PHAMVI_AD,\n                                    TEN_PHAMVI_AD = kh.DropPVSP.Selected.TEN_PHAMVI_AD\n                                ).ID,\n                                \"\"\n                            ),\n                            TEN_PV_AD: If(\n                                kh.DropCSSP.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    );\n                )\n            );\n        )\n    );\n    If(\n        RadioCSSP.Selected.ID = 2,\n        UpdateContext({varMTSP_Combo: \"\"});\n        UpdateContext({varSP_Combo: \"\"});\n        If(\n            CountIf(\n                colAD,\n                Loai = \"COMBO_SP\"\n            ) > 0,\n            UpdateContext(\n                {\n                    varMTSP_Combo: Concatenate(\n                        \"Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \" + \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_Combo: Concatenate(\n                        \"+ Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colAD,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n        );\n        If(\n            !IsBlank(varMTSP_Combo),\n            UpdateContext(\n                {\n                    varMTSP: Concatenate(\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \", \",\n                        varMTSP_Combo\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP: Concatenate(\n                        \"- Áp dụng: </br>\",\n                        varSP_Combo,\n                        If(\n                            CountRows(\n                                Filter(\n                                    colAD,\n                                    Loai = \"SP\"\n                                )\n                            ) > 0,\n                            \"</br>+ \",\n                            Concat(\n                                Filter(\n                                    colAD,\n                                    Loai = \"SP\"\n                                ),\n                                Ten,\n                                \"</br>+ \"\n                            ),\n                            \"\"\n                        )\n                    )\n                }\n            );\n            ,\n            UpdateContext(\n                {\n                    varSP: Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"SP\"\n                        ),\n                        Ten,\n                        \", \"\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP: Concatenate(\n                        \"- Áp dụng: </br>\",\n                        Concat(\n                            Filter(\n                                colAD,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \"</br>+ \"\n                        )\n                    )\n                }\n            );\n        );\n        ,\n        UpdateContext({varMTSP: \"Tất cả sản phẩm\"});\n        UpdateContext({varSP: \"- Áp dụng: Tất cả\"})\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTSP_LT: \"\"});\n    UpdateContext({varSP_LT: \"\"});\n    If(\n        RadioCSSP_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruSP) > 0,\n            ForAll(\n                GalleryCSSP_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSSP_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                gt.cr282_ten_gia_tri,\n                                Concatenate(\n                                    kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                    \" \",\n                                    gt.cr282_ten_gia_tri\n                                )\n                            ),\n                            Loai: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                \"COMBO_SP\",\n                                \"SP\"\n                            ),\n                            Phamvi: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.SP_ID_LoaiTru.Text),\n                            ID_DOITUONG: varIdLtCSSP,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"SP\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSSP_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(\n                                    kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                    \"MA_SP\",\n                                    kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU\n                                )\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri,\n                            MA_PV_AD: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                LookUp(\n                                    DM_PHAMVI_AD,\n                                    TEN_PHAMVI_AD = kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD\n                                ).ID,\n                                \"\"\n                            ),\n                            TEN_PV_AD: If(\n                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = \"MA_COMBO_SP\",\n                                kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD,\n                                \"\"\n                            )\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSSP_LoaiTru.Selected.ID = 2,\n        UpdateContext({varMTSP_Combo: \"\"});\n        UpdateContext({varSP_Combo: \"\"});\n        If(\n            CountIf(\n                colLT,\n                Loai = \"COMBO_SP\"\n            ) > 0,\n            UpdateContext(\n                {\n                    varMTSP_Combo: Concatenate(\n                        \"Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \" + \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_Combo: Concatenate(\n                        \"+ Combo sản phẩm \",\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \" trong \",\n                        First(\n                            Filter(\n                                colLT,\n                                Loai = \"COMBO_SP\"\n                            )\n                        ).Phamvi\n                    )\n                }\n            );\n        );\n        If(\n            !IsBlank(varMTSP_Combo),\n            UpdateContext(\n                {\n                    varMTSP_LT: Concatenate(\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \", \"\n                        ),\n                        \", \",\n                        varMTSP_Combo\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_LT: Concatenate(\n                        \"- Loại trừ:</br>\",\n                        varSP_Combo,\n                        If(\n                            CountRows(\n                                Filter(\n                                    colLT,\n                                    Loai = \"SP\"\n                                )\n                            ) > 0,\n                            \"</br>+ \",\n                            Concat(\n                                Filter(\n                                    colLT,\n                                    Loai = \"SP\"\n                                ),\n                                Ten,\n                                \"</br>+ \"\n                            ),\n                            \"\"\n                        )\n                    )\n                }\n            ),\n            UpdateContext(\n                {\n                    varMTSP_LT: Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"SP\"\n                        ),\n                        Ten,\n                        \", \"\n                    )\n                }\n            );\n            UpdateContext(\n                {\n                    varSP_LT: Concatenate(\n                        \"- Loại trừ:</br>+ \",\n                        Concat(\n                            Filter(\n                                colLT,\n                                Loai = \"SP\"\n                            ),\n                            Ten,\n                            \"</br>+ \"\n                        )\n                    )\n                }\n            )\n        );\n        ,\n        UpdateContext({varSP_LT: \"- Loại trừ: \"});\n    );\n    \n//End San pham\n// lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KENH BAN\nSet(\n        varIdAdCSKB,\n        0\n    );\n    Set(\n        varIdLtCSKB,\n        0\n    );\n    Set(\n        varIdAdCSKB,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSKB,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"KB\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSKB.Selected.ID,\n            TEN_KIEU: RadioCSKB.Selected.Text\n        }\n    );\n    If(\n        RadioCSKB_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSKB,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: varIdLtCSKB,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"KB\",\n                AP_DUNG: \"2\",\n                KIEU: RadioCSKB_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSKB_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTKB: \"\"});\n    UpdateContext({varKB: \"\"});\n    If(\n        RadioCSKB.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungKB) > 0,\n            ForAll(\n                GalleryKBCS.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSKB.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKBCS.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KB\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.CSAD_ID.Text),\n                            ID_DOITUONG: varIdAdCSKB,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KB\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSKB.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKBCS.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKBCS.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKB.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKB: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"KB\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKB: Concatenate(\n                    \"- Áp dụng:</br>+ \",\n                    Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"KB\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varMTKB: \"Tất cả kênh bán\"});\n        UpdateContext({varKB: \"- Áp dụng: Tất cả\"});\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTKB_LT: \"\"});\n    UpdateContext({varKB_LT: \"\"});\n    If(\n        RadioCSKB_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruKB) > 0,\n            ForAll(\n                GalleryKBCS_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboBoxCSKB_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KB\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.CSAD_ID_LoaiTru.Text),\n                            ID_DOITUONG: varIdLtCSKB,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KB\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSKB_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKB_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKB_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"KB\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKB_LT: Concatenate(\n                    \"- Loại trừ:</br>+ \",\n                    Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"KB\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varKB_LT: \"- Loại trừ: \"});\n    );\n    \n//End kenh ban\n// lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KHANH HANG\nSet(\n        varIdAdCSKH,\n        0\n    );\n    Set(\n        varIdLtCSKH,\n        0\n    );\n    Set(\n        varIdAdCSKH,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSKH,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"KH\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSKH.Selected.ID,\n            TEN_KIEU: RadioCSKH.Selected.Text\n        }\n    );\n    If(\n        RadioCSKH_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSKH,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"KH\",\n                AP_DUNG: \"2\",\n                KIEU: RadioCSKH_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSKH_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTKH: \"\"});\n    UpdateContext({varKH: \"\"});\n    If(\n        RadioCSKH.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungKH) > 0,\n            ForAll(\n                GalleryKHCS.AllItems As kh,\n                ForAll(\n                    kh.ComboKHCS.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKHCS.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KH\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.KH_ID.Text),\n                            ID_DOITUONG: varIdAdCSKH,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KH\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSKH.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKHCS.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKHCS.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKH.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKH: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"KH\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKH: Concatenate(\n                    \"- Áp dụng:</br>+ \",\n                    Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"KH\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varMTKH: \"Tất cả khách hàng\"});\n        UpdateContext({varKH: \"- Áp dụng: Tất cả\"})\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTKH_LT: \"\"});\n    UpdateContext({varKH_LT: \"\"});\n    If(\n        RadioCSKH_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruKH) > 0,\n            ForAll(\n                GalleryKHCS_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboKHCS_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: Concatenate(\n                                kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"KH\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.KHLT_ID.Text),\n                            ID_DOITUONG: varIdLtCSKH,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"KH\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSKB_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSKH_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTKH_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"KH\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varKH_LT: Concatenate(\n                    \"- Loại trừ:</br>+ \",\n                    Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"KH\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        );\n        ,\n        UpdateContext({varKH_LT: \"- Loại trừ: \"})\n    );\n    \n// lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG PHAM_VI\nSet(\n        varIdAdCSPV,\n        0\n    );\n    Set(\n        varIdLtCSPV,\n        0\n    );\n    Set(\n        varIdAdCSPV,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSPV,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"PV\",\n            AP_DUNG: \"1\",\n            KIEU: RadioCSPV.Selected.ID,\n            TEN_KIEU: RadioCSPV.Selected.Text\n        }\n    );\n    If(\n        RadioCSPV_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSPV,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1,\n                MA_CHINH_SACH: newMaCS,\n                THANH_PHAN: \"PV\",\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                AP_DUNG: \"2\",\n                KIEU: RadioCSPV_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioCSPV_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTPV: \"\"});\n    UpdateContext({varPV: \"\"});\n    If(\n        RadioCSPV.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungPV) > 0,\n            ForAll(\n                GalleryPVCS.AllItems As pv,\n                ForAll(\n                    pv.ComboPVCS.SelectedItems As gt,\n                    Patch(\n                        colAD,\n                        Defaults(colAD),\n                        {\n                            Ten: Concatenate(\n                                pv.DropPVCS.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"PV\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(pv.PV_ID.Text),\n                            ID_DOITUONG: varIdAdCSPV,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"PV\",\n                            AP_DUNG: \"1\",\n                            KIEU: RadioCSPV.Selected.ID,\n                            MA_TIEU_CHI: pv.DropPVCS.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: pv.DropPVCS.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = pv.DropPVCS.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSPV.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTPV: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"PV\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varPV: Concatenate(\n                    \"- Áp dụng:</br>+ \",\n                    Concat(\n                        Filter(\n                            colAD,\n                            Loai = \"PV\"\n                        ),\n                        Ten,\n                        \"</br>+ \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varMTPV: \"Tất cả phạm vi\"});\n        UpdateContext({varPV: \"- Áp dụng: Tất cả\"});\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTPV_LT: \"\"});\n    UpdateContext({varPV_LT: \"\"});\n    If(\n        RadioCSPV_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruPV) > 0,\n            ForAll(\n                GalleryPVCS_LoaiTru.AllItems As kh,\n                ForAll(\n                    kh.ComboPVCS_LT.SelectedItems As gt,\n                    Patch(\n                        colLT,\n                        Defaults(colLT),\n                        {\n                            Ten: Concatenate(\n                                kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                                \" \",\n                                gt.cr282_ten_gia_tri\n                            ),\n                            Loai: \"PV\"\n                        }\n                    );\n                    Patch(\n                        DL_CHINHSACH_DOITUONG_CT,\n                        Defaults(DL_CHINHSACH_DOITUONG_CT),\n                        {\n                            ID: Value(kh.PVLT_ID.Text),\n                            ID_DOITUONG: varIdLtCSPV,\n                            MA_CHINH_SACH: newMaCS,\n                            LOAI_DK: DataCardLoaiDK.Selected.MA,\n                            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                            THANH_PHAN: \"PV\",\n                            AP_DUNG: \"2\",\n                            KIEU: RadioCSPV_LoaiTru.Selected.ID,\n                            MA_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU,\n                            TEN_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,\n                            MA_GIA_TRI: LookUp(\n                                tmpDsGiatriCS,\n                                cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU\n                            ).Ma,\n                            TEN_GIA_TRI: gt.cr282_ten_gia_tri\n                        }\n                    )\n                )\n            )\n        )\n    );\n    If(\n        RadioCSPV_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTPV_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"PV\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        );\n        UpdateContext(\n            {\n                varPV_LT: Concatenate(\n                    \"- Loại trừ:</br>+ \",\n                    Concat(\n                        Filter(\n                            colLT,\n                            Loai = \"PV\"\n                        ),\n                        Ten,\n                        \"</br>+  \"\n                    )\n                )\n            }\n        ),\n        UpdateContext({varPV_LT: \"- Loại trừ: \"});\n    );\n    // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG SO TIEN\nSet(\n        varIdAdCSST,\n        0\n    );\n    Set(\n        varIdLtCSST,\n        0\n    );\n    Set(\n        varIdAdCSST,\n        Max(\n            DL_CHINHSACH_DOITUONG,\n            ID\n        ) + 1\n    );\n    Patch(\n        DL_CHINHSACH_DOITUONG,\n        Defaults(DL_CHINHSACH_DOITUONG),\n        {\n            ID: varIdAdCSST,\n            MA_CHINH_SACH: newMaCS,\n            LOAI_DK: DataCardLoaiDK.Selected.MA,\n            ANH_HUONG: DataCardAnhHuong.Selected.MA,\n            THANH_PHAN: \"ST\",\n            AP_DUNG: \"1\",\n            KIEU: RadioST.Selected.ID,\n            TEN_KIEU: RadioST.Selected.Text\n        }\n    );\n    If(\n        RadioST_LoaiTru.Selected.ID = 2,\n        Patch(\n            DL_CHINHSACH_DOITUONG,\n            Set(\n                varIdLtCSST,\n                Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1\n            );\n            Defaults(DL_CHINHSACH_DOITUONG),\n            {\n                ID: Max(\n                    DL_CHINHSACH_DOITUONG,\n                    ID\n                ) + 1,\n                MA_CHINH_SACH: newMaCS,\n                LOAI_DK: DataCardLoaiDK.Selected.MA,\n                ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                THANH_PHAN: \"ST\",\n                AP_DUNG: \"2\",\n                KIEU: RadioST_LoaiTru.Selected.ID,\n                TEN_KIEU: RadioST_LoaiTru.Selected.Text\n            }\n        );\n    );\n    \n// lưu dữ liệu ở bảng chi tiết\nUpdateContext({varMTST: \"\"});\n    If(\n        RadioST.Selected.ID = 2,\n        If(\n            CountRows(tmpCSApdungST) > 0,\n            ForAll(\n                GalleryST.AllItems As pv,\n                Patch(\n                    colAD,\n                    Defaults(colAD),\n                    {\n                        Ten: Concatenate(\n                            pv.DropST.Selected.TEN_CHI_TIEU,\n                            \" \",\n                            If(\n                                pv.DropST.Selected.MA_CHI_TIEU = \"MA_ST_TP\",\n                                \"\",\n                                Concatenate(\n                                    pv.ComboST.Selected.TEN_THOIHAN_AD,\n                                    \" \"\n                                )\n                            ),\n                            \"có Giá trị từ \",\n                            Value(pv.GiaTriTu.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE,\n                            \" đến \",\n                            Value(pv.GiaTriDen.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE\n                        ),\n                        Loai: \"ST\"\n                    }\n                );\n                Patch(\n                    DL_CHINHSACH_DOITUONG_CT,\n                    Defaults(DL_CHINHSACH_DOITUONG_CT),\n                    {\n                        ID: Value(pv.ST_ID.Text),\n                        ID_DOITUONG: varIdAdCSST,\n                        MA_CHINH_SACH: newMaCS,\n                        LOAI_DK: DataCardLoaiDK.Selected.MA,\n                        ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                        THANH_PHAN: \"ST\",\n                        AP_DUNG: \"1\",\n                        KIEU: RadioST.Selected.ID,\n                        MA_TIEU_CHI: pv.DropST.Selected.MA_CHI_TIEU,\n                        TEN_TIEU_CHI: pv.DropST.Selected.TEN_CHI_TIEU,\n                        MA_GIA_TRI: LookUp(\n                            DM_THOIHAN_AD,\n                            TEN_THOIHAN_AD = pv.ComboST.Selected.TEN_THOIHAN_AD\n                        ).MA_THOIHAN_AD,\n                        TEN_GIA_TRI: pv.ComboST.Selected.TEN_THOIHAN_AD,\n                        GIATRI_TU: Value(pv.GiaTriTu.Text),\n                        GIATRI_DEN: Value(pv.GiaTriDen.Text)\n                    }\n                )\n            )\n        )\n    );\n    If(\n        RadioST.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTST: Concat(\n                    Filter(\n                        colAD,\n                        Loai = \"ST\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        ),\n        UpdateContext({varMTST: \"Tất cả số tiền\"})\n    );\n    \n// lưu dữ liệu ở bảng chi tiết loai tru\nUpdateContext({varMTST_LT: \"\"});\n    If(\n        RadioST_LoaiTru.Selected.ID = 2,\n        If(\n            CountRows(tmpCSLoaitruST) > 0,\n            ForAll(\n                GalleryST_LoaiTru.AllItems As kh,\n                Patch(\n                    colLT,\n                    Defaults(colLT),\n                    {\n                        Ten: Concatenate(\n                            kh.DropST_LoaiTru.Selected.TEN_CHI_TIEU,\n                            \" \",\n                            If(\n                                kh.DropST_LoaiTru.Selected.MA_CHI_TIEU = \"MA_ST_TP\",\n                                \"\",\n                                Concatenate(\n                                    kh.ComboST_LT.Selected.TEN_THOIHAN_AD,\n                                    \" \"\n                                )\n                            ),\n                            \"có Giá trị từ \",\n                            Value(kh.GiaTriTu_LT.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE,\n                            \" đến \",\n                            Value(kh.GiaTriDen_LT.Text),\n                            \" \",\n                            DataCardTienTe.Selected.TIEN_TE\n                        ),\n                        Loai: \"ST\"\n                    }\n                );\n                Patch(\n                    DL_CHINHSACH_DOITUONG_CT,\n                    Defaults(DL_CHINHSACH_DOITUONG_CT),\n                    {\n                        ID: Value(kh.STLT_ID.Text),\n                        ID_DOITUONG: varIdLtCSST,\n                        MA_CHINH_SACH: newMaCS,\n                        LOAI_DK: DataCardLoaiDK.Selected.MA,\n                        ANH_HUONG: DataCardAnhHuong.Selected.MA,\n                        THANH_PHAN: \"ST\",\n                        AP_DUNG: \"2\",\n                        KIEU: RadioST_LoaiTru.Selected.ID,\n                        MA_TIEU_CHI: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU,\n                        TEN_TIEU_CHI: kh.DropST_LoaiTru.Selected.TEN_CHI_TIEU,\n                        MA_GIA_TRI: LookUp(\n                            DM_THOIHAN_AD,\n                            TEN_THOIHAN_AD = kh.ComboST_LT.Selected.TEN_THOIHAN_AD\n                        ).TEN_THOIHAN_AD,\n                        TEN_GIA_TRI: kh.ComboST_LT.Selected.TEN_THOIHAN_AD,\n                        GIATRI_TU: Value(kh.GiaTriTu_LT.Text),\n                        GIATRI_DEN: Value(kh.GiaTriDen_LT.Text)\n                    }\n                )\n            )\n        )\n    );\n    If(\n        RadioST_LoaiTru.Selected.ID = 2,\n        UpdateContext(\n            {\n                varMTST_LT: Concat(\n                    Filter(\n                        colLT,\n                        Loai = \"ST\"\n                    ),\n                    Ten,\n                    \", \"\n                )\n            }\n        )\n    );\n    //Sinh mo ta\nUpdateContext(\n        {\n            varMoTa: Concatenate(\n                \"Chương trình \",\n                DataCardHinhThuc.Selected.TEN,\n                \" áp dụng \",\n                DataCardAnhHuong.Selected.TEN,\n                \" \",\n                If(\n                    DataCardKieuDL.Selected.MA = \"002\",\n                    DataCardVSoTienAD.Text,\n                    Concatenate(\n                        DataCardTyLeApDung.Text,\n                        \"(%)\",\n                        If(\n                            !IsBlank(DataCardSoTienToiDa.Text),\n                            Concatenate(\n                                \" tối đa \",\n                                DataCardSoTienToiDa.Text\n                            ),\n                            \"\"\n                        )\n                    )\n                ),\n                \" \",\n                DataCardTienTe.Selected.TIEN_TE,\n                \" có hiệu lực từ \",\n                Text(\n                    DateValueTuCS.SelectedDate,\n                    \"dd/mm/yyyy\"\n                ),\n                \" đến \",\n                If(\n                    !IsBlank(DateValueDenCS.SelectedDate),\n                    Text(\n                        DateValueDenCS.SelectedDate,\n                        \"dd/mm/yyyy\"\n                    ),\n                    \"khi có thông báo mới\"\n                ),\n                \" nếu thỏa mãn \",\n                If(\n                    DataCardLoaiDK.Selected.MA = \"1\",\n                    \"một trong số\",\n                    \"tất cả\"\n                ),\n                \" các điều kiện sau: \",\n                //San pham\n                varMTSP,\n                If(\n                    !IsBlank(varMTSP_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTSP_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //Kenh ban\n                varMTKB,\n                If(\n                    !IsBlank(varMTKB_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTKB_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //kHACH HANG\n                varMTKH,\n                If(\n                    !IsBlank(varMTKH_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTKH_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //pHAM VI\n                varMTPV,\n                If(\n                    !IsBlank(varMTPV_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTPV_LT,\n                        \")\"\n                    ),\n                    \"\"\n                ),\n                \"; \",\n                //So tien\n                varMTST,\n                If(\n                    !IsBlank(varMTST_LT),\n                    Concatenate(\n                        \" (Trừ \",\n                        varMTST_LT,\n                        \")\"\n                    ),\n                    \"\"\n                )\n            )\n        }\n    );\n    //Sinh san pham\nUpdateContext(\n        {\n            varSanPham: Concatenate(\n                varSP,\n                \"</br>\",\n                varSP_LT\n            )\n        }\n    );\n    \n//Sinh kenh ban\nUpdateContext(\n        {\n            varKenhBan: Concatenate(\n                varKB,\n                \"</br>\",\n                varKB_LT\n            )\n        }\n    );\n    \n//Sinh khach hang\nUpdateContext(\n        {\n            varKhachHang: Concatenate(\n                varKH,\n                \"</br>\",\n                varKH_LT\n            )\n        }\n    );\n    \n//Sinh pham vi\nUpdateContext(\n        {\n            varPhamVi: Concatenate(\n                varPV,\n                \"</br>\",\n                varPV_LT\n            )\n        }\n    );\n    UpdateIf(\n        DL_CHINHSACH_CHUNG,\n        MA_CHINH_SACH = newMaCS,\n        {\n            MO_TA: varMoTa,\n            SAN_PHAM: varSanPham,\n            KENH_BAN: varKenhBan,\n            KHACH_HANG: varKhachHang,\n            PHAM_VI: varPhamVi\n        }\n    );\n    IsBlank(errorMsgCS),\n    Notify(\n        \"Lưu dữ liệu thành công\",\n        NotificationType.Success,\n        800\n    )\n);\n"
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Size: =11
            Text: ="Lưu chính sách"
            Width: =130
            X: =1122
            Y: =728
