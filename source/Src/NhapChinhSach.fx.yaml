NhapChinhSach As screen:
    OnVisible: |-
        =ClearCollect(
            tmpDsGiatriCS,
            [
                {
                    Ma: "",
                    Ten: "",
                    Loai: "",
                    cr282_ten_gia_tri: ""
                }
            ]
        );
        //Kenh ban
        ClearCollect(
            tmpCSApdungKB,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruKB,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        // them kenh ban
        ForAll(
            DM_KENH_BANS As kb,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kb.MA_KENH_BAN,
                    Ten: kb.TEN_KENH_BAN,
                    Loai: "MA_KB_DM",
                    cr282_ten_gia_tri: kb.TEN_KENH_BAN
                }
            )
        );
        ForAll(
            DM_LOAI_KENH_BANS As kb,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kb.MA_LOAI_KB,
                    Ten: kb.TEN_LOAI_KB,
                    Loai: "MA_KB_LOAI",
                    cr282_ten_gia_tri: kb.TEN_LOAI_KB
                }
            )
        );
        Collect(
            tmpDsGiatriCS,
            {
                Ma: "0",
                Ten: "Cá nhân",
                Loai: "MA_KB_NHOM",
                cr282_ten_gia_tri: "Cá nhân"
            },
            {
                Ma: "1",
                Ten: "Tổ chức",
                Loai: "MA_KB_NHOM",
                cr282_ten_gia_tri: "Tổ chức"
            }
        );
        //End Kenh ban
        //KHACH HANG
        ClearCollect(
            tmpCSApdungKH,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruKH,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ForAll(
            DM_NHOM_KH As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_NHOM_KH,
                    Ten: kh.TEN_NHOM_KH,
                    Loai: "MA_KH_NHOM",
                    cr282_ten_gia_tri: kh.TEN_NHOM_KH
                }
            )
        );
        Collect(
            tmpDsGiatriCS,
            {
                Ma: "0",
                Ten: "Cá nhân",
                Loai: "MA_KH_LOAI",
                cr282_ten_gia_tri: "Cá nhân"
            },
            {
                Ma: "1",
                Ten: "Tổ chức",
                Loai: "MA_KH_LOAI",
                cr282_ten_gia_tri: "Tổ chức"
            }
        );
        //END KHACH HANG
        //PHAM VI
        ClearCollect(
            tmpCSApdungPV,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruPV,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ForAll(
            DM_PHAMVI_DIALYS As pv,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: pv.MA_PHAMVI,
                    Ten: pv.TEN_PHAMVI,
                    Loai: If(
                        pv.LOAI = "KHU_VUC",
                        "MA_KHU_VUC",
                        If(
                            pv.LOAI = "QUOC_GIA",
                            "MA_QG",
                            If(
                                pv.LOAI = "VUNG_MIEN",
                                "MA_VUNG_MIEN",
                                If(
                                    pv.LOAI = "TINH_TP",
                                    "MA_TINH_TP",
                                    If(
                                        pv.LOAI = "QUAN_HUYEN",
                                        "MA_QUAN_HUYEN",
                                        If(
                                            pv.LOAI = "DON_VI",
                                            "MA_DON_VI",
                                            "KHAC"
                                        )
                                    )
                                )
                            )
                        )
                    ),
                    cr282_ten_gia_tri: pv.TEN_PHAMVI
                }
            )
        );
        //END PHAM VI
        //SAN PHAM
        ClearCollect(
            tmpCSApdungSP,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "cr282_ma_pv_ad",
                "cr282_ten_pv_ad",
                "cr282_giatri_tu",
                "cr282_giatri_den",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruSP,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "cr282_ma_pv_ad",
                "cr282_ten_pv_ad",
                "cr282_giatri_tu",
                "cr282_giatri_den",
                "GROUP_CS"
            )
        );
        ForAll(
            DL_SAN_PHAM As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_SAN_PHAM,
                    Ten: kh.TEN_SAN_PHAM,
                    Loai: "MA_SP",
                    cr282_ten_gia_tri: kh.TEN_SAN_PHAM
                }
            )
        );
        ForAll(
            ' DL_SAN_PHAM_CT' As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_CHUONG_TRINH,
                    Ten: kh.TEN_CHUONG_TRINH,
                    Loai: "MA_CT",
                    cr282_ten_gia_tri: kh.TEN_CHUONG_TRINH
                }
            )
        );
        Patch(
            tmpDsGiatriCS,
            Defaults(tmpDsGiatriCS),
            {
                Ma: "SK",
                Loai: "LHNV",
                cr282_ten_gia_tri: "Sức khoẻ"
            }
        );
        Patch(
            tmpDsGiatriCS,
            Defaults(tmpDsGiatriCS),
            {
                Ma: "TAI_NAM",
                Loai: "LHNV",
                cr282_ten_gia_tri: "Tai nạn"
            }
        );
        Patch(
            tmpDsGiatriCS,
            Defaults(tmpDsGiatriCS),
            {
                Ma: "TN_DS",
                Loai: "LHNV",
                cr282_ten_gia_tri: "Trách nhiệm dân sự"
            }
        );
        //END SAN PHAM
        //SO TIEN
        ClearCollect(
            tmpCSApdungST,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "ST" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "cr282_ma_pv_ad",
                "cr282_ten_pv_ad",
                "cr282_giatri_tu",
                "cr282_giatri_den",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruST,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "ST" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "cr282_ma_pv_ad",
                "cr282_ten_pv_ad",
                "cr282_giatri_tu",
                "cr282_giatri_den",
                "GROUP_CS"
            )
        );
        ForAll(
            DM_THOIHAN_AD As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_THOIHAN_AD,
                    Ten: kh.TEN_THOIHAN_AD,
                    Loai: "MA_ST_LK",
                    cr282_ten_gia_tri: kh.TEN_THOIHAN_AD
                }
            )
        );
        //END SO TIEN
        
        ClearCollect(
            colAD,
            [
                {
                    Ten: "",
                    Loai:""
                }
            ]
        );
        ClearCollect(
            colLT,
            [
                {
                    Ten: "",
                    Loai:""
                }
            ]
        );

    Canvas1_1 As fluidGrid.fluidGridWithBlankCard:
        BorderThickness: =0
        Height: =768
        Width: =Parent.Width
        Y: =
        ZIndex: =2

        DataCard1 As dataCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            BorderThickness: =0
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =3182
            Width: =Parent.Width
            X: =0
            Y: =0
            ZIndex: =1

            ContainerCS As groupContainer.manualLayoutContainer:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderStyle: =BorderStyle.None
                DropShadow: =DropShadow.None
                Height: =568
                Width: =Parent.Width-Self.X
                X: =130
                ZIndex: =1

                Label1_23 As label:
                    Align: =Align.Justify
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(50, 49, 48, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(161, 159, 157, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="1. Thông tin chung"
                    Width: =Parent.Width
                    ZIndex: =3

                TTChungCS As form:
                    BorderColor: =RGBA(245, 245, 245, 1)
                    DataSource: =DL_CHINHSACH_CHUNG
                    DefaultMode: =FormMode.New
                    Height: =304
                    Item: =LookUp(DL_CHINHSACH_CHUNG, MA_CHINH_SACH=varMaCS)
                    NumberOfColumns: =4
                    Width: =Parent.Width
                    Y: =30
                    ZIndex: =4

                    SO_VB_DataCard3 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_so_vb"
                        Default: =ThisItem.SO_VB
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_so_vb")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_so_vb")
                        Required: =false
                        Update: =DataCardValueSoCS.Text
                        Width: =309
                        X: =1
                        Y: =0
                        ZIndex: =1

                        DataCardKey31 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Số văn bản"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValueSoCS As text:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey31.Y + DataCardKey31.Height + 5
                            ZIndex: =2

                        ErrorMessage31 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValueSoCS.Y + DataCardValueSoCS.Height
                            ZIndex: =3

                        StarVisible28 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey31.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey31.Y
                            ZIndex: =4

                    HOAT_DONG_DataCard1 As typedDataCard.textualEditCard:
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_hoat_dong"
                        Default: =ThisItem.HOAT_DONG
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_hoat_dong")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_hoat_dong")
                        Required: =false
                        Update: =DataCardHoatDong.Text
                        Width: =309
                        X: =3
                        Y: =0
                        ZIndex: =1

                        DataCardKey26 As label:
                            AutoHeight: =true
                            Height: =34
                            Size: =11
                            Text: ="Hoạt động"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        ErrorMessage14 As label:
                            AutoHeight: =true
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardHoatDong.Y + DataCardHoatDong.Height
                            ZIndex: =3

                        StarVisible29 As label:
                            Align: =Align.Center
                            Height: =DataCardKey26.Height
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey26.Y
                            ZIndex: =4

                        DataCardHoatDong As checkbox:
                            BorderColor: =RGBA(71, 158, 245, 1)
                            Default: =Parent.Default
                            Text: =""
                            X: =30
                            Y: =40
                            ZIndex: =5

                    MO_TA_DataCard2 As typedDataCard.textualEditCard:
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_mo_ta"
                        Default: =ThisItem.MO_TA
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_mo_ta")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_mo_ta")
                        Required: =false
                        Update: =DataCardMoTa.Text
                        Width: =309
                        X: =2
                        Y: =1
                        ZIndex: =1

                        DataCardKey23 As label:
                            AutoHeight: =true
                            Height: =34
                            Size: =11
                            Text: ="Mô tả"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardMoTa As text:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(180, 214, 250, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(214, 221, 224, 1)
                            DisplayMode: =DisplayMode.Disabled
                            HintText: ="Hệ thống tự sinh"
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey23.Y + DataCardKey23.Height + 5
                            ZIndex: =2

                        ErrorMessage11 As label:
                            AutoHeight: =true
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardMoTa.Y + DataCardMoTa.Height
                            ZIndex: =3

                        StarVisible23 As label:
                            Align: =Align.Center
                            Height: =DataCardKey23.Height
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey23.Y
                            ZIndex: =4

                    TRANG_THAI_FIX_DataCard1 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_trang_thai_fix"
                        Default: =ThisItem.TRANG_THAI_FIX
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_trang_thai_fix")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_trang_thai_fix")
                        Required: =false
                        Update: ="0"
                        Visible: =false
                        Width: =309
                        X: =1
                        Y: =2
                        ZIndex: =1

                        DataCardKey52 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Text: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValue41 As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey52.Y + DataCardKey52.Height + 5
                            ZIndex: =2

                        ErrorMessage52 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValue41.Y + DataCardValue41.Height
                            ZIndex: =3

                        StarVisible49 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey52.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey52.Y
                            ZIndex: =4

                    MA_CHINH_SACH_DataCard1 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ma_chinh_sach"
                        Default: =ThisItem.MA_CHINH_SACH
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_ma_chinh_sach")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_ma_chinh_sach")
                        Required: =true
                        Update: =newMaCS
                        Width: =309
                        X: =0
                        Y: =0
                        ZIndex: =5

                        DataCardKey20_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Mã (*)"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValueMaCS As text:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =DisplayMode.Disabled
                            HintText: ="Hệ thống tự sinh"
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey20_1.Y + DataCardKey20_1.Height + 5
                            ZIndex: =2

                        ErrorMessage20_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValueMaCS.Y + DataCardValueMaCS.Height
                            ZIndex: =3

                    NGAY_VB_DataCard2 As typedDataCard.dateTimeEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ngay_vb"
                        Default: =ThisItem.NGAY_VB
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_ngay_vb")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =If(Not IsBlank(DateValueNgayCS.SelectedDate), DateValueNgayCS.SelectedDate)
                        Width: =309
                        X: =2
                        Y: =0
                        ZIndex: =5

                        DataCardKey28 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Ngày văn bản"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DateValueNgayCS As datepicker:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            CalendarHeaderFill: =RGBA(16, 110, 190, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DefaultDate: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            EndYear: =Year(Today())+100
                            Format: ="dd/mm/yyyy"
                            HoverDateFill: =RGBA(184, 187, 184, 1)
                            IconBackground: =RGBA(0, 120, 212, 1)
                            InputTextPlaceholder: =
                            IsEditable: =true
                            PaddingBottom: =0
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            SelectedDateFill: =RGBA(0, 120, 212, 1)
                            Size: =11
                            StartYear: =1899
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60)
                            X: =30
                            Y: =DataCardKey28.Y + DataCardKey28.Height + 5
                            ZIndex: =2

                        Separator1_2 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Bold
                            Height: =
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: |-
                                =":"
                            Width: =10
                            Wrap: =false
                            X: =
                            Y: =
                            ZIndex: =4

                        ErrorMessage28 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =6

                        StarVisible25 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey28.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey28.Y
                            ZIndex: =7

                    HIEU_LUC_TU_DataCard2 As typedDataCard.dateTimeEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_hieu_luc_tu"
                        Default: =ThisItem.HIEU_LUC_TU
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_hieu_luc_tu")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =55
                        Required: =false
                        Update: =If(Not IsBlank(DateValueTuCS.SelectedDate), DateValueTuCS.SelectedDate)
                        Width: =309
                        X: =0
                        Y: =1
                        ZIndex: =5

                        DataCardKey29 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Hiệu lực từ (*)"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DateValueTuCS As datepicker:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            CalendarHeaderFill: =RGBA(16, 110, 190, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DefaultDate: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            EndYear: =Year(Today())+100
                            Format: ="dd/mm/yyyy"
                            HoverDateFill: =RGBA(184, 187, 184, 1)
                            IconBackground: =RGBA(0, 120, 212, 1)
                            InputTextPlaceholder: =
                            IsEditable: =true
                            PaddingBottom: =0
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            SelectedDateFill: =RGBA(0, 120, 212, 1)
                            Size: =11
                            StartYear: =1899
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60)
                            X: =30
                            Y: =DataCardKey29.Y + DataCardKey29.Height + 5
                            ZIndex: =2

                        ErrorMessage29 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =6

                        StarVisible26 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey29.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey29.Y
                            ZIndex: =7

                    HIEU_LUC_DEN_DataCard2 As typedDataCard.dateTimeEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_hieu_luc_den"
                        Default: =ThisItem.HIEU_LUC_DEN
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_hieu_luc_den")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =If(Not IsBlank(DateValueDenCS.SelectedDate), DateValueDenCS.SelectedDate)
                        Width: =309
                        X: =1
                        Y: =1
                        ZIndex: =5

                        DataCardKey30 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Hiệu lực đến"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DateValueDenCS As datepicker:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            CalendarHeaderFill: =RGBA(16, 110, 190, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DefaultDate: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            EndYear: =Year(Today())+100
                            Format: ="dd/mm/yyyy"
                            HoverDateFill: =RGBA(184, 187, 184, 1)
                            IconBackground: =RGBA(0, 120, 212, 1)
                            InputTextPlaceholder: =
                            IsEditable: =true
                            PaddingBottom: =0
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            SelectedDateFill: =RGBA(0, 120, 212, 1)
                            Size: =11
                            StartYear: =1899
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60)
                            X: =30
                            Y: =DataCardKey30.Y + DataCardKey30.Height + 5
                            ZIndex: =2

                        ErrorMessage30 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =6

                        StarVisible27 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey30.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey30.Y
                            ZIndex: =7

                    FILE_DataCard2 As typedDataCard.fileEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_file"
                        Default: |-
                            =If(!IsBlank(ThisItem.FILE.FileName), Table({DisplayName: ThisItem.FILE.FileName, Value: ThisItem.FILE.Value}), Blank())
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_file")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =DataCardValueFileCS.Attachments
                        Width: =309
                        X: =3
                        Y: =1
                        ZIndex: =5

                        DataCardKey21_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="File"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValueFileCS As attachments:
                            AddAttachmentText: ="Nhập file"
                            BorderColor: =RGBA(230, 230, 230, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            DropTargetBackgroundColor: =RGBA(255, 255, 255, 1)
                            Font: =Font.'Segoe UI'
                            Height: =104
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            IsInDataCard: =true
                            ItemColor: =RGBA(0, 0, 0, 1)
                            ItemFill: =RGBA(0, 120, 212, 1)
                            ItemHoverColor: =RGBA(50, 49, 48, 1)
                            ItemHoverFill: =RGBA(245, 245, 245, 1)
                            Items: =Parent.Default
                            ItemSpacing: =12
                            MaxAttachments: =1
                            MaxAttachmentsText: =""
                            NoAttachmentsColor: =RGBA(161, 159, 157, 1)
                            NoAttachmentsText: =""
                            PaddingBottom: =5
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedFill: =RGBA(0, 120, 212, 1)
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey21_1.Y + DataCardKey21_1.Height + 5
                            ZIndex: =2

                        ErrorMessage21_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValueFileCS.Y + DataCardValueFileCS.Height
                            ZIndex: =3

                        StarVisible8_2 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey21_1.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey21_1.Y
                            ZIndex: =4

                    ID_DataCard3 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_id"
                        Default: =ThisItem.ID
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_id")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =newIDCS
                        Visible: =false
                        Width: =309
                        X: =0
                        Y: =2
                        ZIndex: =5

                        DataCardKey25 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Text: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardIDCS As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey25.Y + DataCardKey25.Height + 5
                            ZIndex: =2

                        ErrorMessage25 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardIDCS.Y + DataCardIDCS.Height
                            ZIndex: =3

                        StarVisible21_1 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey25.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey25.Y
                            ZIndex: =4

                Label1_24 As label:
                    Align: =Align.Justify
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(50, 49, 48, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(161, 159, 157, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="2. Chính sách áp dụng"
                    Width: =Parent.Width
                    Y: =334
                    ZIndex: =5

                TTCSApDung As form:
                    BorderColor: =RGBA(245, 245, 245, 1)
                    BorderStyle: =BorderStyle.None
                    DataSource: =DL_CHINHSACH_APDUNG
                    DefaultMode: =FormMode.New
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =204
                    Item: =LookUp(DL_CHINHSACH_APDUNG, MA_CHINH_SACH=varMaCS)
                    NumberOfColumns: =4
                    Width: =Parent.Width
                    Y: =364
                    ZIndex: =6

                    HINH_THUC_DataCard1 As typedDataCard.textualEditCard:
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_hinh_thuc"
                        Default: =ThisItem.HINH_THUC
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_hinh_thuc")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_hinh_thuc")
                        Required: =false
                        Update: =DataCardHinhThuc.Selected.MA
                        Width: =309
                        X: =0
                        Y: =0
                        ZIndex: =1

                        DataCardKey33 As label:
                            AutoHeight: =true
                            Height: =34
                            Size: =11
                            Text: ="Hình thức"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        ErrorMessage23 As label:
                            AutoHeight: =true
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardHinhThuc.Y + DataCardHinhThuc.Height
                            ZIndex: =3

                        StarVisible31 As label:
                            Align: =Align.Center
                            Height: =DataCardKey33.Height
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey33.Y
                            ZIndex: =4

                        DataCardHinhThuc As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =If(Parent.Default="001", "Ưu tiên", If(Parent.Default="002", "Lựa chọn", "Gộp"))
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: |-
                                =[{MA:"001",TEN:"Ưu tiên"},{MA:"002",TEN:"Lựa chọn"},{MA:"003",TEN:"Gộp"}]
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =Parent.Width - 60
                            X: =30
                            Y: |
                                =DataCardKey44.Y + DataCardKey44.Height + 5
                            ZIndex: =5

                    DONVI_TIEN_TE_DataCard1 As typedDataCard.textualEditCard:
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_donvi_tien_te"
                        Default: =ThisItem.DONVI_TIEN_TE
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_donvi_tien_te")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_donvi_tien_te")
                        Required: =false
                        Update: =DataCardTienTe.Selected.TIEN_TE
                        Width: =309
                        X: =3
                        Y: =0
                        ZIndex: =1

                        DataCardKey34 As label:
                            AutoHeight: =true
                            Height: =34
                            Size: =11
                            Text: ="Đơn vị tiền"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        ErrorMessage26 As label:
                            AutoHeight: =true
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardTienTe.Y + DataCardTienTe.Height
                            ZIndex: =3

                        StarVisible32 As label:
                            Align: =Align.Center
                            Height: =DataCardKey34.Height
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey34.Y
                            ZIndex: =4

                        DataCardTienTe As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: =BH_DM_TIENTES
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =Parent.Width - 60
                            X: =30
                            Y: |
                                =DataCardKey43.Y + DataCardKey43.Height + 5
                            ZIndex: =5

                    KIEU_DU_LIEU_DataCard1 As typedDataCard.textualEditCard:
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_kieu_du_lieu"
                        Default: =ThisItem.KIEU_DU_LIEU
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_kieu_du_lieu")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_kieu_du_lieu")
                        Required: =false
                        Update: =DataCardKieuDL.Selected.MA
                        Width: =309
                        X: =0
                        Y: =1
                        ZIndex: =1

                        DataCardKey32 As label:
                            AutoHeight: =true
                            Height: =34
                            Size: =11
                            Text: ="Kiểu dữ liệu"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        ErrorMessage17 As label:
                            AutoHeight: =true
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =3

                        StarVisible30 As label:
                            Align: =Align.Center
                            Height: =DataCardKey32.Height
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey32.Y
                            ZIndex: =4

                        DataCardKieuDL As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =If(Parent.Default="002", "Số tiền", "Tỷ lệ (%)")
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: |-
                                =[{MA:"001",TEN:"Tỷ lệ (%)"},{MA:"002",TEN:"Số tiền"}]
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey43.Y + DataCardKey43.Height + 5
                            ZIndex: =5

                    LOAI_DK_DataCard2 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_loai_dk"
                        Default: =ThisItem.LOAI_DK
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_loai_dk")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_loai_dk")
                        Required: =false
                        Update: =DataCardLoaiDK.Selected.MA
                        Width: =309
                        X: =1
                        Y: =0
                        ZIndex: =7

                        DataCardKey41 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Loại điều khoản"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        ErrorMessage41 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =3

                        StarVisible38 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey41.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey41.Y
                            ZIndex: =4

                        DataCardLoaiDK As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =If(Parent.Default="1", "Đơn", "Kết hợp")
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: |-
                                =[{MA:"2",TEN:"Kết hợp"},{MA:"1",TEN:"Đơn"}]
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey44.Y + DataCardKey44.Height + 5
                            ZIndex: =5

                    ANH_HUONG_DataCard2 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_anh_huong"
                        Default: =ThisItem.ANH_HUONG
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_anh_huong")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =95
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_anh_huong")
                        Required: =false
                        Update: =DataCardAnhHuong.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1BMA'
                        Width: =309
                        X: =2
                        Y: =0
                        ZIndex: =7

                        DataCardKey42 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Loại tác động"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        ErrorMessage42 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardAnhHuong.Y + DataCardAnhHuong.Height
                            ZIndex: =3

                        StarVisible39 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey42.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey42.Y
                            ZIndex: =4

                        DataCardAnhHuong As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =If(Parent.Default="2", "Giảm", "Tăng")
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: |-
                                =[{MA:"1",TEN:"Tăng"},{MA:"2",TEN:"Giảm"}]
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =Parent.Width - 60
                            X: |
                                =30
                            Y: =DataCardKey43.Y + DataCardKey43.Height + 5
                            ZIndex: =5

                    SO_TIEN_DataCard2 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_so_tien"
                        Default: =ThisItem.SO_TIEN
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_so_tien")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =Value(DataCardVSoTienAD.Text)
                        Visible: =If(DataCardKieuDL.Selected.MA="002",true,false)
                        Width: =309
                        X: =1
                        Y: =1
                        ZIndex: =7

                        DataCardKey44 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Giá trị"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardVSoTienAD As text:
                            Align: =Align.Right
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey44.Y + DataCardKey44.Height + 5
                            ZIndex: =2

                        ErrorMessage44 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardVSoTienAD.Y + DataCardVSoTienAD.Height
                            ZIndex: =3

                        StarVisible41 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey44.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey44.Y
                            ZIndex: =4

                    TY_LE_DataCard2 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ty_le"
                        Default: =ThisItem.TY_LE
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_ty_le")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =Value(DataCardTyLeApDung.Text)
                        Visible: =If(DataCardKieuDL.Selected.MA="002",false,true)
                        Width: =309
                        X: =2
                        Y: =1
                        ZIndex: =7

                        DataCardKey43 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Giá trị"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardTyLeApDung As text:
                            Align: =Align.Right
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey43.Y + DataCardKey43.Height + 5
                            ZIndex: =2

                        ErrorMessage43 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardTyLeApDung.Y + DataCardTyLeApDung.Height
                            ZIndex: =3

                        StarVisible40 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey43.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey43.Y
                            ZIndex: =4

                    SO_TIEN_TOI_DA_DataCard2 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_so_tien_toi_da"
                        Default: =ThisItem.SO_TIEN_TOI_DA
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_so_tien_toi_da")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =Value(DataCardSoTienToiDa.Text)
                        Visible: =true
                        Width: =309
                        X: =3
                        Y: =1
                        ZIndex: =7

                        DataCardKey45 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Số tiền tối đa"
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardSoTienToiDa As text:
                            Align: =Align.Right
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey45.Y + DataCardKey45.Height + 5
                            ZIndex: =2

                        ErrorMessage45 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardSoTienToiDa.Y + DataCardSoTienToiDa.Height
                            ZIndex: =3

                        StarVisible42 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey45.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey45.Y
                            ZIndex: =4

                    MA_CHINH_SACH_DataCard3 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ma_chinh_sach"
                        Default: =ThisItem.MA_CHINH_SACH
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_ma_chinh_sach")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_ma_chinh_sach")
                        Required: =true
                        Update: =newMaCS
                        Visible: =false
                        Width: =309
                        X: =0
                        Y: =2
                        ZIndex: =7

                        DataCardKey39 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardMaCSApDung As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey39.Y + DataCardKey39.Height + 5
                            ZIndex: =2

                        ErrorMessage39 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardMaCSApDung.Y + DataCardMaCSApDung.Height
                            ZIndex: =3

                    ID_DataCard5 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_id"
                        Default: =ThisItem.ID
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_id")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =newIDCSApdung
                        Visible: =false
                        Width: =309
                        X: =1
                        Y: =2
                        ZIndex: =7

                        DataCardKey40 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Text: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardIDCSApDung As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardKey40.Y + DataCardKey40.Height + 5
                            ZIndex: =2

                        ErrorMessage40 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardIDCSApDung.Y + DataCardIDCSApDung.Height
                            ZIndex: =3

                        StarVisible37 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey40.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey40.Y
                            ZIndex: =4

            "'Container3.2' As groupContainer.manualLayoutContainer":
                Fill: =RGBA(255, 255, 255, 1)
                Height: =531
                Width: =Parent.Width-Self.X-10
                X: =130
                Y: =1110
                ZIndex: =2

                Label6_9 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =41
                    Size: =11
                    Text: ="3.2 Kênh bán"
                    Width: =253
                    ZIndex: =2

                RadioCSKB As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KB" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KB" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaCS  && THANH_PHAN = "KB" && AP_DUNG = "1" ).TEN_KIEU)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKBCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryKBCS As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungKB
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =76
                    ZIndex: =4

                    DropKBCS As dropdown:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KB")
                        OnChange: =Reset(ComboBoxCSKB)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboBoxCSKB As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropKBCS.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =658
                        X: =210
                        Y: =5
                        ZIndex: =5

                    BtnXoaCSKB As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungKB, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    CSAD_ID As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: |
                            =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_8 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioCSKB_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaCS  && THANH_PHAN = "KB" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKBCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =330
                    ZIndex: =6

                GalleryKBCS_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruKB
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =330
                    ZIndex: =7

                    DropKBCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KB")
                        OnChange: =Reset(ComboBoxCSKB_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboBoxCSKB_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropKBCS_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["Loai"]
                        SearchItems: =[]
                        Size: =11
                        Width: =658
                        X: =210
                        Y: =5
                        ZIndex: =5

                    BtnXoaCSKB_LT As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruKB, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    CSAD_ID_LoaiTru As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_9 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =261
                    ZIndex: =8

                BtnADCS_KB As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |
                        =Collect(
                            tmpCSApdungKB,
                            [{cr282_id:Value( Max (tmpCSApdungKB, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKB.Selected.ID = 2, true)
                    Width: =91
                    X: =253.2
                    Y: =10
                    ZIndex: =9

                BtnLTCS_KB As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |
                        =Collect(
                            tmpCSLoaitruKB,
                            [{cr282_id:Value( Max (tmpCSLoaitruKB, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =268
                    ZIndex: =10

                ResetDSKBCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungKB,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =157
                    Y: =41
                    ZIndex: =11

                ResetDSKBCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruKB,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =170
                    Y: =292
                    ZIndex: =12

                BadgeCanvas1_48 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =47
                    ZIndex: =13

                Label9_30 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =47
                    ZIndex: =14

                Label9_31 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                    Width: =72
                    X: =729
                    Y: =47
                    ZIndex: =15

                BadgeCanvas1_49 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =968
                    X: =255
                    Y: =301
                    ZIndex: =16

                Label9_33 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =301
                    ZIndex: =17

                Label9_35 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =72
                    X: =729
                    Y: =300
                    ZIndex: =18

            "'Container3.3' As groupContainer.manualLayoutContainer":
                Height: =531
                Width: =Parent.Width-Self.X-10
                X: =130
                Y: =1641
                ZIndex: =3

                Label6_10 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="3.3 Khách hàng"
                    Width: =Parent.Width
                    ZIndex: =2

                RadioCSKH As radio:
                    BorderColor: =RGBA(54, 176, 75, 1)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KH" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH=varMaCS  && THANH_PHAN = "KH" && AP_DUNG ="1" ).TEN_KIEU)
                    DisabledBorderColor: =RGBA(255, 255, 255, 1)
                    DisabledFill: =RGBA(255, 255, 255, 1)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKHCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryKHCS As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungKH
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =77
                    ZIndex: =4

                    DropKHCS As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KH")
                        OnChange: =Reset(ComboKHCS)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboKHCS As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropKHCS.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =658
                        X: =210
                        Y: =5
                        ZIndex: =5

                    Button5_17 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungKH, cr282_id= ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    KH_ID As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =false
                        X: =60
                        Y: =6
                        ZIndex: =8

                Label7_10 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioCSKH_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "KH" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKHCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =330
                    ZIndex: =6

                GalleryKHCS_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruKH
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =970
                    X: =253
                    Y: =330
                    ZIndex: =7

                    DropKHCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KH")
                        OnChange: =Reset(ComboKHCS_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboKHCS_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatri, Loai = DropKHCS_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =658
                        X: =210
                        Y: =5
                        ZIndex: =5

                    Button5_18 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruKH, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    KHLT_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_11 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =253
                    ZIndex: =8

                Button3_9 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSApdungKH,
                            [{cr282_id:Value( Max (tmpCSApdungKH, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =11
                    ZIndex: =9

                Button3_10 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSLoaitruKH,
                            [{cr282_id:Value( Max (tmpCSLoaitruKH, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =91
                    X: =253
                    Y: =260
                    ZIndex: =10

                ResetDSKHCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungKH,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =46
                    ZIndex: =11

                ResetDSKHCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruKH,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =175
                    Y: =260
                    ZIndex: =12

                BadgeCanvas1_51 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =48
                    ZIndex: =13

                Label9_38 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =48
                    ZIndex: =14

                Label9_39 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =72
                    X: =729
                    Y: =47
                    ZIndex: =15

                BadgeCanvas1_52 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =301
                    ZIndex: =16

                Label9_40 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =301
                    ZIndex: =17

                Label9_41 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =72
                    X: =729
                    Y: =300
                    ZIndex: =18

            "'Container3.4' As groupContainer.manualLayoutContainer":
                Height: =531
                Width: =Parent.Width-Self.X-10
                X: =130
                Y: =2172
                ZIndex: =4

                Label6_11 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="3.4 Phạm vi"
                    Width: =Parent.Width
                    ZIndex: =2

                RadioCSPV As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "PV" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "PV" && AP_DUNG = "1" ).TEN_KIEU)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSPVCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryPVCS As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungPV
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =35
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =76
                    ZIndex: =4

                    DropPVCS As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "PV")
                        OnChange: =Reset(ComboPVCS)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboPVCS As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropPVCS.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =658
                        X: =210
                        Y: =5
                        ZIndex: =5

                    Button5_19 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungPV, ThisItem.cr282_id=cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    PV_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_14 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioCSPV_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaCS  && THANH_PHAN = "PV" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSPVCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =330
                    ZIndex: =6

                GalleryPVCS_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruPV
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 ,true)
                    Width: =970
                    X: =253.2
                    Y: =330
                    ZIndex: =7

                    DropPVCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "PV")
                        OnChange: =Reset(ComboPVCS_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboPVCS_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropPVCS_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =658
                        X: =210
                        Y: =5
                        ZIndex: =5

                    Button5_20 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruPV, ThisItem.cr282_id=cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    PVLT_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_15 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =254
                    ZIndex: =8

                Button3_11 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSApdungPV,
                            [{cr282_id:Value( Max (tmpCSApdungPV, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =11
                    ZIndex: =9

                Button3_12 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSLoaitruPV,
                            [{cr282_id:Value( Max (tmpCSLoaitruPV, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 ,true)
                    Width: =91
                    X: =253.2
                    Y: =261
                    ZIndex: =10

                ResetDSPVCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungPV,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =40
                    ZIndex: =11

                ResetDSPVCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruPV,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =254
                    ZIndex: =12

                BadgeCanvas1_50 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =968
                    X: =254
                    Y: =46
                    ZIndex: =13

                Label9_36 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =46
                    ZIndex: =14

                Label9_37 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =72
                    X: =729
                    Y: =46
                    ZIndex: =15

                BadgeCanvas1_53 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =301
                    ZIndex: =16

                Label9_42 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =301
                    ZIndex: =17

                Label9_43 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 , true)
                    Width: =72
                    X: =729
                    Y: =300
                    ZIndex: =18

            "'Container3.1' As groupContainer.manualLayoutContainer":
                Fill: =RGBA(255, 255, 255, 1)
                Height: =531
                Width: =Parent.Width-Self.X-10
                X: =130
                Y: =579
                ZIndex: =5

                Label6_7 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =47
                    Size: =11
                    Text: ="3.1 Sản phẩm"
                    Width: =253
                    Y: =45
                    ZIndex: =2

                RadioCSSP As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KB" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KB" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả", 
                        LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH = varMaCS  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSSPCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =121
                    ZIndex: =3

                GalleryCSSP As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungSP
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =121
                    ZIndex: =4

                    DropCSSP As dropdown:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "SP")
                        OnChange: =Reset(ComboBoxCSSP); Reset(DropPVSP)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboBoxCSSP As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = If(DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP","MA_SP",DropCSSP.Selected.MA_CHI_TIEU))
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =458
                        X: =210
                        Y: =5
                        ZIndex: =5

                    BtnXoaCSSP As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungSP, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =887
                        Y: =5
                        ZIndex: =6

                    SP_ID As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: |
                            =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                    DropPVSP As dropdown:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_pv_ad
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =DM_PHAMVI_AD
                        OnChange: =
                        OnSelect: =
                        Size: =11
                        Visible: =DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP"
                        Width: =200
                        X: =668
                        Y: =5
                        ZIndex: =9

                Label7_12 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =81
                    ZIndex: =5

                RadioCSSP_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "SP" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSSPCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =375
                    ZIndex: =6

                GalleryCSSP_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =147
                    Items: =tmpCSLoaitruSP
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =375
                    ZIndex: =7

                    DropSPCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "SP")
                        OnChange: =Reset(ComboBoxCSSP_LT); Reset(DropPVSP_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboBoxCSSP_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = If(DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP","MA_SP",DropSPCS_LoaiTru.Selected.MA_CHI_TIEU))
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        Size: =11
                        Width: =458
                        X: =210
                        Y: =5
                        ZIndex: =5

                    BtnXoaCSSP_LT As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruSP, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    SP_ID_LoaiTru As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                    DropPVSP_LT As dropdown:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_pv_ad
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =DM_PHAMVI_AD
                        OnChange: =
                        OnSelect: =
                        Size: =11
                        Visible: =DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP"
                        Width: =200
                        X: =668
                        Y: =5
                        ZIndex: =9

                Label7_13 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =306
                    ZIndex: =8

                BtnADCS_SP As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |
                        =Collect(
                            tmpCSApdungSP,
                            [{cr282_id:Value( Max (tmpCSApdungSP, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSSP.Selected.ID = 2, true)
                    Width: =91
                    X: =253.2
                    Y: =61
                    ZIndex: =9

                BtnLTCS_SP As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |
                        =Collect(
                            tmpCSLoaitruSP,
                            [{cr282_id:Value( Max (tmpCSLoaitruSP, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =312
                    ZIndex: =10

                ResetDSSPCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungSP,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =157
                    Y: =86
                    ZIndex: =11

                ResetDSSPCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruSP,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "SP" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =170
                    Y: =337
                    ZIndex: =12

                Label6_8 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="3. Đối tượng áp dụng"
                    Width: =Parent.Width
                    ZIndex: =13

                BadgeCanvas1_46 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =92
                    ZIndex: =14

                Label9_24 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =92
                    ZIndex: =15

                Label9_25 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                    Width: =72
                    X: =663
                    Y: =92
                    ZIndex: =16

                Label9_32 As label:
                    Height: =28
                    OnSelect: =
                    Size: =11
                    Text: ="Phạm vi áp dụng"
                    Visible: =If(RadioCSSP.Selected.ID = 2 , true)
                    Width: =133
                    X: =959
                    Y: =91
                    ZIndex: =17

                BadgeCanvas1_47 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =346
                    ZIndex: =18

                Label9_28 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                    Width: =67
                    X: =329
                    Y: =344
                    ZIndex: =19

                Label9_29 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị"
                    Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                    Width: =72
                    X: =668
                    Y: =346
                    ZIndex: =20

                Label9_34 As label:
                    Height: =28
                    OnSelect: =
                    Size: =11
                    Text: ="Phạm vi áp dụng"
                    Visible: =If(RadioCSSP_LoaiTru.Selected.ID = 2 , true)
                    Width: =133
                    X: =964
                    Y: =345
                    ZIndex: =21

            "'Container3.5' As groupContainer.manualLayoutContainer":
                Height: =531
                Width: =Parent.Width-Self.X-10
                X: =130
                Y: =2703
                ZIndex: =6

                Label6_12 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="3.5 Số tiền"
                    Width: =Parent.Width
                    ZIndex: =2

                RadioST As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "PV" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "ST" && AP_DUNG = "1" ).TEN_KIEU)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetST)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryST As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungST
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =76
                    ZIndex: =4

                    DropST As dropdown:
                        BorderColor: =RGBA(45, 128, 40, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(45, 128, 40, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "ST")
                        OnChange: =Reset(ComboST)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboST As combobox:
                        BorderColor: =RGBA(45, 128, 40, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(45, 128, 40, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropST.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        SelectionFill: =RGBA(204, 228, 246, 1)
                        SelectMultiple: =false
                        Size: =11
                        Visible: =If(DropST.Selected.MA_CHI_TIEU="MA_ST_TP",false,true)
                        Width: =258
                        X: =610
                        Y: =5
                        ZIndex: =5

                    Button5_21 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungST, ThisItem.cr282_id=cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    ST_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                    GiaTriTu As text:
                        Align: =Align.Right
                        BorderColor: =RGBA(54, 176, 75, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_giatri_tu
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Format: =TextFormat.Number
                        Height: =30
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =11
                        Width: =200
                        X: =210
                        Y: =5
                        ZIndex: =8

                    GiaTriDen As text:
                        Align: =Align.Right
                        BorderColor: =RGBA(54, 176, 75, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_giatri_den
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Format: =TextFormat.Number
                        Height: =30
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =11
                        Width: =200
                        X: =410
                        Y: =5
                        ZIndex: =9

                Label7_16 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioST_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "ST" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetST_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =330
                    ZIndex: =6

                GalleryST_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(180, 214, 250, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruST
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =35
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 ,true)
                    Width: =970
                    X: =253.2
                    Y: =330
                    ZIndex: =7

                    DropST_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "ST")
                        OnChange: =Reset(ComboST_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =10
                        Y: =5
                        ZIndex: =4

                    ComboST_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropST_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =[]
                        SelectMultiple: =false
                        Size: =11
                        Visible: =If(DropST_LoaiTru.Selected.MA_CHI_TIEU="MA_ST_TP",false,true)
                        Width: =258
                        X: =610
                        Y: =5
                        ZIndex: =5

                    Button5_22 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruST, ThisItem.cr282_id=cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    STLT_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                    GiaTriTu_LT As text:
                        Align: =Align.Right
                        BorderColor: =RGBA(54, 176, 75, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_giatri_tu
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Format: =TextFormat.Number
                        Height: =30
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =11
                        Width: =200
                        X: =210
                        Y: =5
                        ZIndex: =8

                    GiaTriDen_LT As text:
                        Align: =Align.Right
                        BorderColor: =RGBA(54, 176, 75, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_giatri_den
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Format: =TextFormat.Number
                        Height: =30
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =11
                        Width: =200
                        X: =410
                        Y: =5
                        ZIndex: =9

                Label7_17 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =261
                    ZIndex: =8

                Button3_13 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSApdungST,
                            [{cr282_id:Value( Max (tmpCSApdungST, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =11
                    ZIndex: =9

                Button3_14 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSLoaitruST,
                            [{cr282_id:Value( Max (tmpCSLoaitruST, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 ,true)
                    Width: =91
                    X: =253.2
                    Y: =268
                    ZIndex: =10

                ResetST As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungST,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =40
                    ZIndex: =11

                ResetST_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |
                        =ClearCollect(
                            tmpCSLoaitruST,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "ST" && AP_DUNG = "2"
                                ),
                                "cr282_id",
                                "cr282_ma_chinh_sach",
                                "cr282_ap_dung",
                                "cr282_ma_tieu_chi",
                                "cr282_ten_tieu_chi",
                                "cr282_ma_pv_ad",
                                "cr282_ten_pv_ad",
                                "cr282_giatri_tu",
                                "cr282_giatri_den",
                                "GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =254
                    ZIndex: =12

                BadgeCanvas1_54 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =301
                    ZIndex: =13

                Label9_44 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                    Width: =67
                    X: =327
                    Y: =300
                    ZIndex: =14

                BadgeCanvas1_55 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =968
                    X: =253
                    Y: =47
                    ZIndex: =16

                Label9_46 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Tiêu chí"
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =67
                    X: =327
                    Y: =47
                    ZIndex: =17

                Label9_47 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị từ"
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =72
                    X: =531
                    Y: =47
                    ZIndex: =18

                Label9_48 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị đến"
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =84
                    X: =721
                    Y: =47
                    ZIndex: =19

                Label9_49 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Thời hạn áp dụng"
                    Visible: =If(RadioST.Selected.ID = 2 , true)
                    Width: =133
                    X: =923
                    Y: =47
                    ZIndex: =20

                Label9_50 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị từ"
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                    Width: =72
                    X: =531
                    Y: =300
                    ZIndex: =21

                Label9_51 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Giá trị đến"
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                    Width: =84
                    X: =721
                    Y: =300
                    ZIndex: =22

                Label9_52 As label:
                    Height: =29
                    OnSelect: =
                    Size: =11
                    Text: ="Thời hạn áp dụng"
                    Visible: =If(RadioST_LoaiTru.Selected.ID = 2 , true)
                    Width: =133
                    X: =923
                    Y: =301
                    ZIndex: =23

    BtnBack As button:
        OnSelect: =Back();
        Size: =11
        Text: ="Quay lại"
        Width: =116
        X: =993
        Y: =728
        ZIndex: =3

    BtnGhiCS As button:
        DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
        OnSelect: |
            =//Xu ly thong tin chung
            UpdateContext({errorMsgCS: ""});
            Clear(tmpCheckDup);
            //ID chinh sach chung
            If(
                IsBlank(DataCardIDCS.Text),
                UpdateContext(
                    {
                        newIDCS: If(
                            CountIf(
                                DL_CHINHSACH_CHUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_CHUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCS: Value(DataCardIDCS.Text)})
            );
            //ID chinh sach ap dung
            If(
                IsBlank(DataCardIDCSApDung.Text),
                UpdateContext(
                    {
                        newIDCSApdung: If(
                            CountIf(
                                DL_CHINHSACH_APDUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_APDUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCSApdung: Value(DataCardIDCSApDung.Text)})
            );
            //Ma chinh sach
            If(
                IsBlank(DataCardValueMaCS.Text),
                UpdateContext(
                    {
                        newMaCS: Concatenate(
                            "CS",
                            If(
                                newIDCS < 10,
                                "000",
                                If(
                                    newIDCS < 100 && newIDCS >= 10,
                                    "00",
                                    If(
                                        newIDCS < 1000 && newIDCS >= 100,
                                        "0",
                                        ""
                                    )
                                )
                            ),
                            Text(newIDCS)
                        )
                    }
                ),
                UpdateContext({newMaCS: DataCardValueMaCS.Text})
            );
            If(
                IsBlank(DateValueTuCS.SelectedDate),
                UpdateContext({errorMsgCS: "Hiệu lực từ là bắt buộc"})
            );
            If(
                IsBlank(errorMsgCS) && !IsBlank(DateValueDenCS.SelectedDate) && DateValueTuCS.SelectedDate > DateValueDenCS.SelectedDate,
                UpdateContext({errorMsgCS: "Hiệu lực đến phải sau hiệu lực từ"})
            );
            //Kiem tra tieu chi la duy nhat
            //sản phâm
            //sản phâm - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungSP) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryCSSP.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "SP",
                            Value: kh.DropCSSP.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryCSSP.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "SP" && Value = kh.DropCSSP.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng sản phẩm"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //sản phâm - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruSP) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryCSSP_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "SP",
                            Value: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryCSSP_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "SP" && Value = kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ sản phẩm"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End sản phâm
            //Kenh ban
            //Kenh ban - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Kenh ban - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End kenh ban
            //Khach hang
            //Khach hang - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKH) > 0,
                Clear(errorCol);
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Khach hang - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruKH) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End khách hàng
            //Phạm vi
            //pham vi - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpApdungPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPVCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPVCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Pham vi - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPV_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPV_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End phạm vi
            //So tien
            //So tien - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungST) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryST.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "ST",
                            Value: kh.DropST.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryST.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "ST" && Value = kh.DropST.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng số tiền"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //So tien - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruST) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryST_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "ST",
                            Value: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryST_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "ST" && Value = kh.DropST_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ số tiền"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End so tien
            //End kiem tra duy nhat
            If(
                !IsBlank(errorMsgCS),
                Notify(
                    errorMsgCS,
                    NotificationType.Error,
                    800
                ),
                SubmitForm(TTChungCS);
                SubmitForm(TTCSApDung);
                Set(
                    varMaCS,
                    newMaCS
                );
                EditForm(TTChungCS);
                EditForm(TTCSApDung);
                RemoveIf(
                    DL_CHINHSACH_DOITUONG,
                    MA_CHINH_SACH = newMaCS
                );
                RemoveIf(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = newMaCS
                );
             // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG San pham
            Set(
                    varIdAdCSSP,
                    0
                );
                Set(
                    varIdLtCSSP,
                    0
                );
                Set(
                    varIdAdCSSP,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSSP,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "SP",
                        AP_DUNG: "1",
                        KIEU: RadioCSSP.Selected.ID,
                        TEN_KIEU: RadioCSSP.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSSP,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdLtCSSP,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "SP",
                        AP_DUNG: "2",
                        KIEU: RadioCSSP_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSSP_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSSP.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungSP) > 0,
                        ForAll(
                            GalleryCSSP.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSSP.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.SP_ID.Text),
                                        ID_DOITUONG: varIdAdCSSP,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "SP",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSSP.Selected.ID,
                                        MA_TIEU_CHI: kh.DropCSSP.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropCSSP.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(
                                                kh.DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                                "MA_SP",
                                                kh.DropCSSP.Selected.MA_CHI_TIEU
                                            )
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri,
                                        MA_PV_AD: If(
                                            kh.DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            LookUp(
                                                DM_PHAMVI_AD,
                                                TEN_PHAMVI_AD = kh.DropPVSP.Selected.TEN_PHAMVI_AD
                                            ).ID,
                                            ""
                                        ),
                                        TEN_PV_AD: If(
                                            kh.DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            kh.DropPVSP.Selected.TEN_PHAMVI_AD,
                                            ""
                                        )
                                    }
                                )
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSSP_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruSP) > 0,
                        ForAll(
                            GalleryCSSP_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSSP_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.SP_ID_LoaiTru.Text),
                                        ID_DOITUONG: varIdLtCSSP,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "SP",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSSP_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(
                                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                                "MA_SP",
                                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU
                                            )
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri,
                                        MA_PV_AD: If(
                                            kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            LookUp(
                                                DM_PHAMVI_AD,
                                                TEN_PHAMVI_AD = kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD
                                            ).ID,
                                            ""
                                        ),
                                        TEN_PV_AD: If(
                                            kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD,
                                            ""
                                        )
                                    }
                                )
                            )
                        )
                    )
                );
                
            //End San pham
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KENH BAN
            Set(
                    varIdAdCSKB,
                    0
                );
                Set(
                    varIdLtCSKB,
                    0
                );
                Set(
                    varIdAdCSKB,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "1",
                        KIEU: RadioCSKB.Selected.ID,
                        TEN_KIEU: RadioCSKB.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKB,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdLtCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "2",
                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKB_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSKB.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKB) > 0,
                        ForAll(
                            GalleryKBCS.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID.Text),
                                        ID_DOITUONG: varIdAdCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKB.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSKB_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKB) > 0,
                        ForAll(
                            GalleryKBCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID_LoaiTru.Text),
                                        ID_DOITUONG: varIdLtCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                
            //End kenh ban
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KHANH HANG
            Set(
                    varIdAdCSKH,
                    0
                );
                Set(
                    varIdLtCSKH,
                    0
                );
                Set(
                    varIdAdCSKH,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKH,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "1",
                        KIEU: RadioCSKH.Selected.ID,
                        TEN_KIEU: RadioCSKH.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKH,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "2",
                        KIEU: RadioCSKH_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKH_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSKH.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKH) > 0,
                        ForAll(
                            GalleryKHCS.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KH_ID.Text),
                                        ID_DOITUONG: varIdAdCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKH.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSKH_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKH) > 0,
                        ForAll(
                            GalleryKHCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KHLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG PHAM_VI
            Set(
                    varIdAdCSPV,
                    0
                );
                Set(
                    varIdLtCSPV,
                    0
                );
                Set(
                    varIdAdCSPV,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSPV,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "PV",
                        AP_DUNG: "1",
                        KIEU: RadioCSPV.Selected.ID,
                        TEN_KIEU: RadioCSPV.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSPV,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        THANH_PHAN: "PV",
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        AP_DUNG: "2",
                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSPV_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSPV.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungPV) > 0,
                        ForAll(
                            GalleryPVCS.AllItems As pv,
                            ForAll(
                                pv.ComboPVCS.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(pv.PV_ID.Text),
                                        ID_DOITUONG: varIdAdCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSPV.Selected.ID,
                                        MA_TIEU_CHI: pv.DropPVCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: pv.DropPVCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = pv.DropPVCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSPV_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruPV) > 0,
                        ForAll(
                            GalleryPVCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboPVCS_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.PVLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG SO TIEN
            Set(
                    varIdAdCSST,
                    0
                );
                Set(
                    varIdLtCSST,
                    0
                );
                Set(
                    varIdAdCSST,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSST,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "ST",
                        AP_DUNG: "1",
                        KIEU: RadioST.Selected.ID,
                        TEN_KIEU: RadioST.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSST,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "ST",
                        AP_DUNG: "2",
                        KIEU: RadioST_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioST_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioST.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungST) > 0,
                        ForAll(
                            GalleryST.AllItems As pv,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: Value(pv.ST_ID.Text),
                                    ID_DOITUONG: varIdAdCSST,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "ST",
                                    AP_DUNG: "1",
                                    KIEU: RadioST.Selected.ID,
                                    MA_TIEU_CHI: pv.DropST.Selected.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: pv.DropST.Selected.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = pv.ComboST.Selected.cr282_ten_gia_tri && Loai = pv.DropST.Selected.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: pv.ComboST.Selected.cr282_ten_gia_tri,
                                    GIATRI_TU: Value(pv.GiaTriTu.Text),
                                    GIATRI_DEN: Value(pv.GiaTriDen.Text)
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioST_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruST) > 0,
                        ForAll(
                            GalleryST_LoaiTru.AllItems As kh,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: Value(kh.STLT_ID.Text),
                                    ID_DOITUONG: varIdLtCSST,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "ST",
                                    AP_DUNG: "2",
                                    KIEU: RadioST_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.DropST_LoaiTru.Selected.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = kh.ComboST_LT.Selected.cr282_ten_gia_tri && Loai = kh.DropST_LoaiTru.Selected.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: kh.ComboST_LT.Selected.cr282_ten_gia_tri,
                                    GIATRI_TU: Value(kh.GiaTriTu_LT.Text),
                                    GIATRI_DEN: Value(kh.GiaTriDen_LT.Text)
                                }
                            )
                        )
                    )
                );
            );
            
            
            If(
                IsBlank(errorMsgCS),
                /*UpdateIf(
                    DL_CHINHSACH_CHUNG,
                    MA_CHINH_SACH = varMaCS,
                    {TRANG_THAI_FIX: "1"}
                );
                Set(
                    varGhiCS,
                    true
                );*/
                Notify(
                    "Ghi dữ liệu thành công",
                    NotificationType.Success,
                    800
                );
            );
        Size: =11
        Text: ="Ghi dữ liệu"
        Visible: =If(!IsBlank(DataCardValueMaCS.Text),true, false)
        Width: =109
        X: =1246
        Y: =728
        ZIndex: =4

    BtnLuuCS As button:
        DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
        OnSelect: |
            =//Xu ly thong tin chung
            UpdateContext({errorMsgCS: ""});
            Clear(tmpCheckDup);
            //ID chinh sach chung
            If(
                IsBlank(DataCardIDCS.Text),
                UpdateContext(
                    {
                        newIDCS: If(
                            CountIf(
                                DL_CHINHSACH_CHUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_CHUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCS: Value(DataCardIDCS.Text)})
            );
            //ID chinh sach ap dung
            If(
                IsBlank(DataCardIDCSApDung.Text),
                UpdateContext(
                    {
                        newIDCSApdung: If(
                            CountIf(
                                DL_CHINHSACH_APDUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_APDUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCSApdung: Value(DataCardIDCSApDung.Text)})
            );
            //Ma chinh sach
            If(
                IsBlank(DataCardValueMaCS.Text),
                UpdateContext(
                    {
                        newMaCS: Concatenate(
                            "CS",
                            If(
                                newIDCS < 10,
                                "000",
                                If(
                                    newIDCS < 100 && newIDCS >= 10,
                                    "00",
                                    If(
                                        newIDCS < 1000 && newIDCS >= 100,
                                        "0",
                                        ""
                                    )
                                )
                            ),
                            Text(newIDCS)
                        )
                    }
                ),
                UpdateContext({newMaCS: DataCardValueMaCS.Text})
            );
            If(
                IsBlank(DateValueTuCS.SelectedDate),
                UpdateContext({errorMsgCS: "Hiệu lực từ là bắt buộc"})
            );
            If(
                IsBlank(errorMsgCS) && !IsBlank(DateValueDenCS.SelectedDate) && DateValueTuCS.SelectedDate > DateValueDenCS.SelectedDate,
                UpdateContext({errorMsgCS: "Hiệu lực đến phải sau hiệu lực từ"})
            );
            //Kiem tra tieu chi la duy nhat
            //sản phâm
            //sản phâm - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungSP) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryCSSP.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "SP",
                            Value: kh.DropCSSP.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryCSSP.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "SP" && Value = kh.DropCSSP.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng sản phẩm"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //sản phâm - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruSP) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryCSSP_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "SP",
                            Value: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryCSSP_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "SP" && Value = kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ sản phẩm"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End sản phâm
            //Kenh ban
            //Kenh ban - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Kenh ban - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End kenh ban
            //Khach hang
            //Khach hang - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKH) > 0,
                Clear(errorCol);
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Khach hang - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruKH) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End khách hàng
            //Phạm vi
            //pham vi - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpApdungPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPVCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPVCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Pham vi - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPV_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPV_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPV_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End phạm vi
            //So tien
            //So tien - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungST) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryST.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "ST",
                            Value: kh.DropST.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryST.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "ST" && Value = kh.DropST.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng số tiền"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //So tien - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSLoaitruST) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryST_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "ST",
                            Value: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryST_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "ST" && Value = kh.DropST_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ số tiền"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End so tien
            //End kiem tra duy nhat
            If(
                !IsBlank(errorMsgCS),
                Notify(
                    errorMsgCS,
                    NotificationType.Error,
                    800
                ),
                SubmitForm(TTChungCS);
                SubmitForm(TTCSApDung);
                Set(
                    varMaCS,
                    newMaCS
                );
                EditForm(TTChungCS);
                EditForm(TTCSApDung);
                RemoveIf(
                    DL_CHINHSACH_DOITUONG,
                    MA_CHINH_SACH = newMaCS
                );
                RemoveIf(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = newMaCS
                );
             // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG San pham
            Clear(colAD);
                Clear(colLT);
                Set(
                    varIdAdCSSP,
                    0
                );
                Set(
                    varIdLtCSSP,
                    0
                );
                Set(
                    varIdAdCSSP,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSSP,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "SP",
                        AP_DUNG: "1",
                        KIEU: RadioCSSP.Selected.ID,
                        TEN_KIEU: RadioCSSP.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSSP,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdLtCSSP,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "SP",
                        AP_DUNG: "2",
                        KIEU: RadioCSSP_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSSP_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            UpdateContext({varMTSP: ""});
                If(
                    RadioCSSP.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungSP) > 0,
                        ForAll(
                            GalleryCSSP.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSSP.SelectedItems As gt,
                                Patch(
                                    colAD,
                                    Defaults(colAD),
                                    {
                                        Ten: Concatenate(
                                            kh.DropCSSP.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "SP"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.SP_ID.Text),
                                        ID_DOITUONG: varIdAdCSSP,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "SP",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSSP.Selected.ID,
                                        MA_TIEU_CHI: kh.DropCSSP.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropCSSP.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(
                                                kh.DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                                "MA_SP",
                                                kh.DropCSSP.Selected.MA_CHI_TIEU
                                            )
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri,
                                        MA_PV_AD: If(
                                            kh.DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            LookUp(
                                                DM_PHAMVI_AD,
                                                TEN_PHAMVI_AD = kh.DropPVSP.Selected.TEN_PHAMVI_AD
                                            ).ID,
                                            ""
                                        ),
                                        TEN_PV_AD: If(
                                            kh.DropCSSP.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            kh.DropPVSP.Selected.TEN_PHAMVI_AD,
                                            ""
                                        )
                                    }
                                );
                            )
                        );
                    )
                );
                If(
                    RadioCSSP.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTSP: Concat(
                                Filter(
                                    colAD,
                                    Loai = "SP"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    ),
                    UpdateContext({varMTSP: "Tất cả sản phẩm"})
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            UpdateContext({varMTSP_LT: ""});
                If(
                    RadioCSSP_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruSP) > 0,
                        ForAll(
                            GalleryCSSP_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSSP_LT.SelectedItems As gt,
                                Patch(
                                    colLT,
                                    Defaults(colLT),
                                    {
                                        Ten: Concatenate(
                                            kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "SP"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.SP_ID_LoaiTru.Text),
                                        ID_DOITUONG: varIdLtCSSP,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "SP",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSSP_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropSPCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = If(
                                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                                "MA_SP",
                                                kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU
                                            )
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri,
                                        MA_PV_AD: If(
                                            kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            LookUp(
                                                DM_PHAMVI_AD,
                                                TEN_PHAMVI_AD = kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD
                                            ).ID,
                                            ""
                                        ),
                                        TEN_PV_AD: If(
                                            kh.DropSPCS_LoaiTru.Selected.MA_CHI_TIEU = "MA_COMBO_SP",
                                            kh.DropPVSP_LT.Selected.TEN_PHAMVI_AD,
                                            ""
                                        )
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSSP_LoaiTru.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTSP_LT: Concat(
                                Filter(
                                    colAD,
                                    Loai = "SP"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    )
                );
                
            //End San pham
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KENH BAN
            Set(
                    varIdAdCSKB,
                    0
                );
                Set(
                    varIdLtCSKB,
                    0
                );
                Set(
                    varIdAdCSKB,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "1",
                        KIEU: RadioCSKB.Selected.ID,
                        TEN_KIEU: RadioCSKB.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKB,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdLtCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "2",
                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKB_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            UpdateContext({varMTKB: ""});
                If(
                    RadioCSKB.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKB) > 0,
                        ForAll(
                            GalleryKBCS.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB.SelectedItems As gt,
                                Patch(
                                    colAD,
                                    Defaults(colAD),
                                    {
                                        Ten: Concatenate(
                                            kh.DropKBCS.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "KB"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID.Text),
                                        ID_DOITUONG: varIdAdCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKB.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSKB.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTKB: Concat(
                                Filter(
                                    colAD,
                                    Loai = "KB"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    ),
                    UpdateContext({varMTKB: "Tất cả kênh bán"})
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            UpdateContext({varMTKB_LT: ""});
                If(
                    RadioCSKB_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKB) > 0,
                        ForAll(
                            GalleryKBCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB_LT.SelectedItems As gt,
                                Patch(
                                    colLT,
                                    Defaults(colLT),
                                    {
                                        Ten: Concatenate(
                                            kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "KB"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID_LoaiTru.Text),
                                        ID_DOITUONG: varIdLtCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSKB_LoaiTru.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTKB_LT: Concat(
                                Filter(
                                    colLT,
                                    Loai = "KB"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    )
                );
                
            //End kenh ban
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KHANH HANG
            Set(
                    varIdAdCSKH,
                    0
                );
                Set(
                    varIdLtCSKH,
                    0
                );
                Set(
                    varIdAdCSKH,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKH,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "1",
                        KIEU: RadioCSKH.Selected.ID,
                        TEN_KIEU: RadioCSKH.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKH,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "2",
                        KIEU: RadioCSKH_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKH_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            UpdateContext({varMTKH: ""});
                If(
                    RadioCSKH.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKH) > 0,
                        ForAll(
                            GalleryKHCS.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS.SelectedItems As gt,
                                Patch(
                                    colAD,
                                    Defaults(colAD),
                                    {
                                        Ten: Concatenate(
                                            kh.DropKHCS.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "KH"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KH_ID.Text),
                                        ID_DOITUONG: varIdAdCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKH.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSKH.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTKH: Concat(
                                Filter(
                                    colAD,
                                    Loai = "KH"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    ),
                    UpdateContext({varMTKH: "Tất cả khách hàng"})
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            UpdateContext({varMTKH_LT: ""});
                If(
                    RadioCSKH_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKH) > 0,
                        ForAll(
                            GalleryKHCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS_LT.SelectedItems As gt,
                                Patch(
                                    colLT,
                                    Defaults(colLT),
                                    {
                                        Ten: Concatenate(
                                            kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "KH"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KHLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSKH_LoaiTru.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTKH_LT: Concat(
                                Filter(
                                    colLT,
                                    Loai = "KH"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    )
                );
                
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG PHAM_VI
            Set(
                    varIdAdCSPV,
                    0
                );
                Set(
                    varIdLtCSPV,
                    0
                );
                Set(
                    varIdAdCSPV,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSPV,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "PV",
                        AP_DUNG: "1",
                        KIEU: RadioCSPV.Selected.ID,
                        TEN_KIEU: RadioCSPV.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSPV,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        THANH_PHAN: "PV",
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        AP_DUNG: "2",
                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSPV_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            UpdateContext({varMTPV: ""});
                If(
                    RadioCSPV.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungPV) > 0,
                        ForAll(
                            GalleryPVCS.AllItems As pv,
                            ForAll(
                                pv.ComboPVCS.SelectedItems As gt,
                                Patch(
                                    colAD,
                                    Defaults(colAD),
                                    {
                                        Ten: Concatenate(
                                            pv.DropPVCS.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "PV"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(pv.PV_ID.Text),
                                        ID_DOITUONG: varIdAdCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSPV.Selected.ID,
                                        MA_TIEU_CHI: pv.DropPVCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: pv.DropPVCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = pv.DropPVCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSPV.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTPV: Concat(
                                Filter(
                                    colAD,
                                    Loai = "PV"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    ),
                    UpdateContext({varMTPV: "Tất cả phạm vi"})
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            UpdateContext({varMTPV_LT: ""});
                If(
                    RadioCSPV_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruPV) > 0,
                        ForAll(
                            GalleryPVCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboPVCS_LT.SelectedItems As gt,
                                Patch(
                                    colLT,
                                    Defaults(colLT),
                                    {
                                        Ten: Concatenate(
                                            kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                            " ",
                                            gt.cr282_ten_gia_tri
                                        ),
                                        Loai: "PV"
                                    }
                                );
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.PVLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    )
                );
                If(
                    RadioCSPV_LoaiTru.Selected.ID = 2,
                    UpdateContext(
                        {
                            varMTPV_LT: Concat(
                                Filter(
                                    colLT,
                                    Loai = "PV"
                                ),
                                Ten,
                                ", "
                            )
                        }
                    )
                );
                // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG SO TIEN
            Set(
                    varIdAdCSST,
                    0
                );
                Set(
                    varIdLtCSST,
                    0
                );
                Set(
                    varIdAdCSST,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSST,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "ST",
                        AP_DUNG: "1",
                        KIEU: RadioST.Selected.ID,
                        TEN_KIEU: RadioST.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSST,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "ST",
                        AP_DUNG: "2",
                        KIEU: RadioST_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioST_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioST.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungST) > 0,
                        ForAll(
                            GalleryST.AllItems As pv,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: Value(pv.ST_ID.Text),
                                    ID_DOITUONG: varIdAdCSST,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "ST",
                                    AP_DUNG: "1",
                                    KIEU: RadioST.Selected.ID,
                                    MA_TIEU_CHI: pv.DropST.Selected.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: pv.DropST.Selected.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = pv.ComboST.Selected.cr282_ten_gia_tri && Loai = pv.DropST.Selected.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: pv.ComboST.Selected.cr282_ten_gia_tri,
                                    GIATRI_TU: Value(pv.GiaTriTu.Text),
                                    GIATRI_DEN: Value(pv.GiaTriDen.Text)
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioST_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruST) > 0,
                        ForAll(
                            GalleryST_LoaiTru.AllItems As kh,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: Value(kh.STLT_ID.Text),
                                    ID_DOITUONG: varIdLtCSST,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "ST",
                                    AP_DUNG: "2",
                                    KIEU: RadioST_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.DropST_LoaiTru.Selected.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.DropST_LoaiTru.Selected.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = kh.ComboST_LT.Selected.cr282_ten_gia_tri && Loai = kh.DropST_LoaiTru.Selected.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: kh.ComboST_LT.Selected.cr282_ten_gia_tri,
                                    GIATRI_TU: Value(kh.GiaTriTu_LT.Text),
                                    GIATRI_DEN: Value(kh.GiaTriDen_LT.Text)
                                }
                            )
                        )
                    )
                );
                //Sinh mo ta
            UpdateContext(
                    {
                        varMoTa: Concatenate(
                            "Chương trình ",
                            DataCardHinhThuc.Selected.TEN,
                            " áp dụng ",
                            DataCardAnhHuong.Selected.TEN,
                            " ",
                            If(
                                DataCardKieuDL.Selected.MA = "002",
                                DataCardVSoTienAD.Text,
                                Concatenate(
                                    DataCardTyLeApDung.Text,
                                    "(%) tối đa ",
                                    DataCardSoTienToiDa.Text
                                )
                            ),
                            " ",
                            DataCardTienTe.Selected.TIEN_TE,
                            " có hiệu lực từ ",
                            DateValueTuCS.SelectedDate,
                            " đến ",
                            If(
                                !IsBlank(DateValueDenCS.SelectedDate),
                                DateValueDenCS.SelectedDate,
                                "khi có thông báo mới"
                            ),
                            " nếu thỏa mãn ",
                            If(
                                DataCardLoaiDK.Selected.MA = "1",
                                "một trong số",
                                "tất cả"
                            ),
                            " các điều kiện sau: ",
                            //San pham
                            varMTSP,
                            If(
                                !IsBlank(varMTSP_LT),
                                Concatenate(
                                    " (Trừ ",
                                    varMTSP_LT,
                                    ")"
                                ),
                                ""
                            ),
                            "; ",
                            //Kenh ban
                            varMTKB,
                            If(
                                !IsBlank(varMTKB_LT),
                                Concatenate(
                                    " (Trừ ",
                                    varMTKB_LT,
                                    ")"
                                ),
                                ""
                            ),
                            "; ",
                            //kHACH HANG
                            varMTKH,
                            If(
                                !IsBlank(varMTKH_LT),
                                Concatenate(
                                    " (Trừ ",
                                    varMTKH_LT,
                                    ")"
                                ),
                                ""
                            ),
                            "; ",
                            //pHAM VI
                            varMTPV,
                            If(
                                !IsBlank(varMTPV_LT),
                                Concatenate(
                                    " (Trừ ",
                                    varMTPV_LT,
                                    ")"
                                ),
                                ""
                            )
                        )
                    }
                );
                UpdateIf(
                    DL_CHINHSACH_CHUNG,
                    MA_CHINH_SACH = newMaCS,
                    {MO_TA: varMoTa}
                );
                IsBlank(errorMsgCS),
                Notify(
                    "Lưu dữ liệu thành công",
                    NotificationType.Success,
                    800
                )
            );
        Size: =11
        Text: ="Lưu dữ liệu"
        Width: =112
        X: =1122
        Y: =728
        ZIndex: =5

    LeftNavigation_29 As LeftNavigation_9:
        Width: =LeftNavigation_29.MenuWidth - 10
        ZIndex: =6

