NhapChinhSach As screen:
    OnVisible: |-
        =ClearCollect(
            tmpDsGiatriCS,
            [
                {
                    Ma: "",
                    Ten: "",
                    Loai: "",
                    cr282_ten_gia_tri: ""
                }
            ]
        );
        //Kenh ban
        ClearCollect(
            tmpCSApdungKB,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruKB,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        // them kenh ban
        ForAll(
            DM_KENH_BANS As kb,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kb.MA_KENH_BAN,
                    Ten: kb.TEN_KENH_BAN,
                    Loai: If(
                        kb.LOAI = "1",
                        "MA_NHAN_VIEN",
                        If(
                            kb.LOAI = "2",
                            "MA_DL",
                            If(
                                kb.LOAI = "3",
                                "MA_MG",
                                "MA_NH"
                            )
                        )
                    ),
                    cr282_ten_gia_tri: kb.TEN_KENH_BAN
                }
            )
        );
        //End Kenh ban
        //KHACH HANG
        ClearCollect(
            tmpCSApdungKH,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruKH,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ForAll(
            DM_NHOM_KH As kh,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: kh.MA_NHOM_KH,
                    Ten: kh.TEN_NHOM_KH,
                    Loai: "MA_KH_NHOM",
                    cr282_ten_gia_tri: kh.TEN_NHOM_KH
                }
            )
        );
        Collect(
            tmpDsGiatriCS,
            {
                Ma: "0",
                Ten: "Cá nhân",
                Loai: "MA_KH_LOAI",
                cr282_ten_gia_tri: "Cá nhân"
            },
            {
                Ma: "1",
                Ten: "Tổ chức",
                Loai: "MA_KH_LOAI",
                cr282_ten_gia_tri: "Tổ chức"
            }
        );
        //END KHACH HANG
        //PHAM VI
        ClearCollect(
            tmpCSApdungPV,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ClearCollect(
            tmpCSLoaitruPV,
            GroupBy(
                Filter(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "2"
                ),
                "cr282_id",
                "cr282_ma_chinh_sach",
                "cr282_ap_dung",
                "cr282_ma_tieu_chi",
                "cr282_ten_tieu_chi",
                "GROUP_CS"
            )
        );
        ForAll(
            DM_PHAMVI_DIALYS As pv,
            Patch(
                tmpDsGiatriCS,
                Defaults(tmpDsGiatriCS),
                {
                    Ma: pv.MA_PHAMVI,
                    Ten: pv.TEN_PHAMVI,
                    Loai: If(
                        pv.LOAI = "KHU_VUC",
                        "MA_KHU_VUC",
                        If(
                            pv.LOAI = "QUOC_GIA",
                            "MA_QG",
                            If(
                                pv.LOAI = "VUNG_MIEN",
                                "MA_VUNG_MIEN",
                                If(
                                    pv.LOAI = "TINH_TP",
                                    "MA_TINH_TP",
                                    "MA_QUAN_HUYEN"
                                )
                            )
                        )
                    ),
                    cr282_ten_gia_tri: pv.TEN_PHAMVI
                }
            )
        );
        //END PHAM VI

    Canvas1_1 As fluidGrid.fluidGridWithBlankCard:
        BorderThickness: =0
        Height: =768
        Width: =Parent.Width
        Y: =
        ZIndex: =1

        DataCard1 As dataCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            BorderThickness: =0
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =2178
            Width: =Parent.Width
            X: =0
            Y: =0
            ZIndex: =1

            ContainerCS As groupContainer.manualLayoutContainer:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderStyle: =BorderStyle.None
                DropShadow: =DropShadow.None
                Height: =568
                Width: =Parent.Width-Self.X
                X: =130
                ZIndex: =1

                Label1_23 As label:
                    Align: =Align.Justify
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(50, 49, 48, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(161, 159, 157, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="1. Thông tin chung"
                    Width: =Parent.Width
                    ZIndex: =3

                TTChungCS As form:
                    BorderColor: =RGBA(245, 245, 245, 1)
                    DataSource: =DL_CHINHSACH_CHUNG
                    DefaultMode: =FormMode.New
                    Height: =304
                    Item: =LookUp(DL_CHINHSACH_CHUNG, MA_CHINH_SACH=varMaCS)
                    NumberOfColumns: =2
                    Width: =Parent.Width
                    Y: =30
                    ZIndex: =4

                    TRANG_THAI_FIX_DataCard1 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_trang_thai_fix"
                        Default: =ThisItem.TRANG_THAI_FIX
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_trang_thai_fix")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_trang_thai_fix")
                        Required: =false
                        Update: ="0"
                        Visible: =false
                        Width: =35
                        X: =0
                        Y: =0
                        ZIndex: =1

                        DataCardKey52 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Text: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardValue41.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardValue41 As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey52.X + DataCardKey52.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage52 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValue41.Y + DataCardValue41.Height
                            ZIndex: =3

                        StarVisible49 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey52.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey52.Y
                            ZIndex: =4

                    SO_VB_DataCard3 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_so_vb"
                        Default: =ThisItem.SO_VB
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_so_vb")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_so_vb")
                        Required: =false
                        Update: =DataCardValueSoCS.Text
                        Width: =35
                        X: =1
                        Y: =2
                        ZIndex: =1

                        DataCardKey31 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Số văn bản"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValueSoCS As text:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey31.X + DataCardKey31.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage31 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValueSoCS.Y + DataCardValueSoCS.Height
                            ZIndex: =3

                        StarVisible28 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey31.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey31.Y
                            ZIndex: =4

                    FILE_DataCard2 As typedDataCard.fileEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_file"
                        Default: |-
                            =If(!IsBlank(ThisItem.FILE.FileName), Table({DisplayName: ThisItem.FILE.FileName, Value: ThisItem.FILE.Value}), Blank())
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_file")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =DataCardValueFileCS.Attachments
                        Width: =35
                        X: =1
                        Y: =0
                        ZIndex: =5

                        DataCardKey21_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="File"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValueFileCS As attachments:
                            AddAttachmentText: ="Nhập file"
                            BorderColor: =RGBA(230, 230, 230, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            DropTargetBackgroundColor: =RGBA(255, 255, 255, 1)
                            Font: =Font.'Segoe UI'
                            Height: =104
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            IsInDataCard: =true
                            ItemColor: =RGBA(0, 0, 0, 1)
                            ItemFill: =RGBA(0, 120, 212, 1)
                            ItemHoverColor: =RGBA(50, 49, 48, 1)
                            ItemHoverFill: =RGBA(245, 245, 245, 1)
                            Items: =Parent.Default
                            ItemSpacing: =12
                            MaxAttachments: =1
                            MaxAttachmentsText: =""
                            NoAttachmentsColor: =RGBA(161, 159, 157, 1)
                            NoAttachmentsText: =""
                            PaddingBottom: =5
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedFill: =RGBA(0, 120, 212, 1)
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey21_1.X + DataCardKey21_1.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage21_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValueFileCS.Y + DataCardValueFileCS.Height
                            ZIndex: =3

                        StarVisible8_2 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey21_1.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey21_1.Y
                            ZIndex: =4

                    HIEU_LUC_DEN_DataCard2 As typedDataCard.dateTimeEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_hieu_luc_den"
                        Default: =ThisItem.HIEU_LUC_DEN
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_hieu_luc_den")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =If(Not IsBlank(DateValueDenCS.SelectedDate), DateValueDenCS.SelectedDate)
                        Width: =35
                        X: =0
                        Y: =1
                        ZIndex: =5

                        DataCardKey30 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Hiệu lực đến"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DateValueDenCS As datepicker:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            CalendarHeaderFill: =RGBA(16, 110, 190, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DefaultDate: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            EndYear: =Year(Today())+100
                            Format: ="dd/mm/yyyy"
                            HoverDateFill: =RGBA(184, 187, 184, 1)
                            IconBackground: =RGBA(0, 120, 212, 1)
                            InputTextPlaceholder: =
                            IsEditable: =true
                            PaddingBottom: =0
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            SelectedDateFill: =RGBA(0, 120, 212, 1)
                            Size: =11
                            StartYear: =1899
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey30.X + DataCardKey30.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage30 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =6

                        StarVisible27 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey30.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey30.Y
                            ZIndex: =7

                    HIEU_LUC_TU_DataCard2 As typedDataCard.dateTimeEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_hieu_luc_tu"
                        Default: =ThisItem.HIEU_LUC_TU
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_hieu_luc_tu")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =55
                        Required: =false
                        Update: =If(Not IsBlank(DateValueTuCS.SelectedDate), DateValueTuCS.SelectedDate)
                        Width: =35
                        X: =1
                        Y: =1
                        ZIndex: =5

                        DataCardKey29 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Hiệu lực từ (*)"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DateValueTuCS As datepicker:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            CalendarHeaderFill: =RGBA(16, 110, 190, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DefaultDate: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            EndYear: =Year(Today())+100
                            Format: ="dd/mm/yyyy"
                            HoverDateFill: =RGBA(184, 187, 184, 1)
                            IconBackground: =RGBA(0, 120, 212, 1)
                            InputTextPlaceholder: =
                            IsEditable: =true
                            PaddingBottom: =0
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            SelectedDateFill: =RGBA(0, 120, 212, 1)
                            Size: =11
                            StartYear: =1899
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey29.X + DataCardKey29.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage29 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =6

                        StarVisible26 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey29.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey29.Y
                            ZIndex: =7

                    NGAY_VB_DataCard2 As typedDataCard.dateTimeEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ngay_vb"
                        Default: =ThisItem.NGAY_VB
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_ngay_vb")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =If(Not IsBlank(DateValueNgayCS.SelectedDate), DateValueNgayCS.SelectedDate)
                        Width: =35
                        X: =0
                        Y: =2
                        ZIndex: =5

                        DataCardKey28 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Ngày văn bản"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DateValueNgayCS As datepicker:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            CalendarHeaderFill: =RGBA(16, 110, 190, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            DefaultDate: =Parent.Default
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            EndYear: =Year(Today())+100
                            Format: ="dd/mm/yyyy"
                            HoverDateFill: =RGBA(184, 187, 184, 1)
                            IconBackground: =RGBA(0, 120, 212, 1)
                            InputTextPlaceholder: =
                            IsEditable: =true
                            PaddingBottom: =0
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            SelectedDateFill: =RGBA(0, 120, 212, 1)
                            Size: =11
                            StartYear: =1899
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey28.X + DataCardKey28.Width
                            Y: =10
                            ZIndex: =2

                        Separator1_2 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Bold
                            Height: =
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Text: |-
                                =":"
                            Width: =10
                            Wrap: =false
                            X: =
                            Y: =
                            ZIndex: =4

                        ErrorMessage28 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =6

                        StarVisible25 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey28.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey28.Y
                            ZIndex: =7

                    ID_DataCard3 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_id"
                        Default: =ThisItem.ID
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_id")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =newIDCS
                        Visible: =false
                        Width: =35
                        X: =0
                        Y: =3
                        ZIndex: =5

                        DataCardKey25 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Text: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardIDCS.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardIDCS As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey25.X + DataCardKey25.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage25 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardIDCS.Y + DataCardIDCS.Height
                            ZIndex: =3

                        StarVisible21_1 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey25.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey25.Y
                            ZIndex: =4

                    MA_CHINH_SACH_DataCard1 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ma_chinh_sach"
                        Default: =ThisItem.MA_CHINH_SACH
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_CHUNG],DataSourceInfo.DisplayName,"cr282_ma_chinh_sach")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_CHUNG], DataSourceInfo.MaxLength, "cr282_ma_chinh_sach")
                        Required: =true
                        Update: =newMaCS
                        Width: =35
                        X: =1
                        Y: =3
                        ZIndex: =5

                        DataCardKey20_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Mã (*)"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10
                            ZIndex: =1

                        DataCardValueMaCS As text:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =DisplayMode.Disabled
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey20_1.X + DataCardKey20_1.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage20_1 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardValueMaCS.Y + DataCardValueMaCS.Height
                            ZIndex: =3

                Label1_24 As label:
                    Align: =Align.Justify
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(50, 49, 48, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(161, 159, 157, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="2. Chính sách áp dụng"
                    Width: =Parent.Width
                    Y: =334
                    ZIndex: =5

                TTCSApDung As form:
                    BorderColor: =RGBA(245, 245, 245, 1)
                    BorderStyle: =BorderStyle.None
                    DataSource: =DL_CHINHSACH_APDUNG
                    DefaultMode: =FormMode.New
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =204
                    Item: =LookUp(DL_CHINHSACH_APDUNG, MA_CHINH_SACH=varMaCS)
                    NumberOfColumns: =2
                    Width: =Parent.Width
                    Y: =364
                    ZIndex: =6

                    SO_TIEN_TOI_DA_DataCard2 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_so_tien_toi_da"
                        Default: =ThisItem.SO_TIEN_TOI_DA
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_so_tien_toi_da")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =Value(DataCardSoTienToiDa.Text)
                        Visible: =If(!IsBlank(DataCardTyLeApDung.Text), true,false)
                        Width: =35
                        X: =0
                        Y: =0
                        ZIndex: =7

                        DataCardKey45 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Số tiền tối đa"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardSoTienToiDa.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardSoTienToiDa As text:
                            Align: =Align.Right
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey45.X + DataCardKey45.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage45 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardSoTienToiDa.Y + DataCardSoTienToiDa.Height
                            ZIndex: =3

                        StarVisible42 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey45.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey45.Y
                            ZIndex: =4

                    TY_LE_DataCard2 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ty_le"
                        Default: =ThisItem.TY_LE
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_ty_le")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =Value(DataCardTyLeApDung.Text)
                        Width: =35
                        X: =1
                        Y: =0
                        ZIndex: =7

                        DataCardKey43 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Tỷ lệ"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardTyLeApDung.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardTyLeApDung As text:
                            Align: =Align.Right
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey43.X + DataCardKey43.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage43 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardTyLeApDung.Y + DataCardTyLeApDung.Height
                            ZIndex: =3

                        StarVisible40 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey43.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey43.Y
                            ZIndex: =4

                    SO_TIEN_DataCard2 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_so_tien"
                        Default: =ThisItem.SO_TIEN
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_so_tien")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =Value(DataCardVSoTienAD.Text)
                        Width: =35
                        X: =0
                        Y: =1
                        ZIndex: =7

                        DataCardKey44 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Số tiền"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardVSoTienAD.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardVSoTienAD As text:
                            Align: =Align.Right
                            BorderColor: =RGBA(54, 176, 75, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Size: =11
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey44.X + DataCardKey44.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage44 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardVSoTienAD.Y + DataCardVSoTienAD.Height
                            ZIndex: =3

                        StarVisible41 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey44.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey44.Y
                            ZIndex: =4

                    ANH_HUONG_DataCard2 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_anh_huong"
                        Default: =ThisItem.ANH_HUONG
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_anh_huong")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_anh_huong")
                        Required: =false
                        Update: =DataCardAnhHuong.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1BMA'
                        Width: =35
                        X: =1
                        Y: =1
                        ZIndex: =7

                        DataCardKey42 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Ảnh hưởng"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardAnhHuong.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        ErrorMessage42 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardAnhHuong.Y + DataCardAnhHuong.Height
                            ZIndex: =3

                        StarVisible39 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey42.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey42.Y
                            ZIndex: =4

                        DataCardAnhHuong As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =If(Parent.Default="2", "Giảm", "Tăng")
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: |-
                                =[{MA:"1",TEN:"Tăng"},{MA:"2",TEN:"Giảm"}]
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =334.8
                            X: |
                                =DataCardKey41.X + DataCardKey41.Width
                            Y: =10
                            ZIndex: =5

                    LOAI_DK_DataCard2 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_loai_dk"
                        Default: =ThisItem.LOAI_DK
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_loai_dk")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_loai_dk")
                        Required: =false
                        Update: =DataCardLoaiDK.Selected.MA
                        Width: =35
                        X: =0
                        Y: =2
                        ZIndex: =7

                        DataCardKey41 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: ="Loại điều khoản"
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =15
                            ZIndex: =1

                        ErrorMessage41 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =
                            ZIndex: =3

                        StarVisible38 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey41.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey41.Y
                            ZIndex: =4

                        DataCardLoaiDK As dropdown:
                            BorderColor: =RGBA(54, 176, 75, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                            ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                            ChevronFill: =RGBA(54, 176, 75, 1)
                            ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                            ChevronHoverFill: =RGBA(50, 49, 48, 1)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =If(Parent.Default="2", "Kết hợp", "Đơn")
                            DisabledBorderColor: =RGBA(204, 228, 246, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(230, 230, 230, 1)
                            DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(245, 245, 245, 1)
                            Items: |-
                                =[{MA:"1",TEN:"Đơn"},{MA:"2",TEN:"Kết hợp"}]
                            PaddingBottom: =5
                            PaddingLeft: =12
                            PaddingRight: =5
                            PaddingTop: =5
                            PressedBorderColor: =RGBA(16, 110, 190, 1)
                            PressedFill: =RGBA(0, 120, 212, 1)
                            SelectionColor: =RGBA(50, 49, 48, 1)
                            SelectionFill: =RGBA(0, 120, 212, 1)
                            Width: =334.8
                            X: |
                                =DataCardKey41.X + DataCardKey41.Width
                            Y: =10
                            ZIndex: =5

                    ID_DataCard5 As typedDataCard.numberEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_id"
                        Default: =ThisItem.ID
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_id")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        Required: =false
                        Update: =newIDCSApdung
                        Visible: =false
                        Width: =35
                        X: =1
                        Y: =2
                        ZIndex: =7

                        DataCardKey40 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Text: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardIDCSApDung.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardIDCSApDung As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            Format: =TextFormat.Number
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey40.X + DataCardKey40.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage40 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardIDCSApDung.Y + DataCardIDCSApDung.Height
                            ZIndex: =3

                        StarVisible37 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            FontWeight: =FontWeight.Semibold
                            Height: =DataCardKey40.Height
                            PaddingLeft: =0
                            Text: ="*"
                            Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                            Width: =30
                            Wrap: =false
                            Y: =DataCardKey40.Y
                            ZIndex: =4

                    MA_CHINH_SACH_DataCard3 As typedDataCard.textualEditCard:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        BorderStyle: =BorderStyle.Solid
                        DataField: ="cr282_ma_chinh_sach"
                        Default: =ThisItem.MA_CHINH_SACH
                        DisplayMode: =Parent.DisplayMode
                        DisplayName: =DataSourceInfo([@DL_CHINHSACH_APDUNG],DataSourceInfo.DisplayName,"cr282_ma_chinh_sach")
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =50
                        MaxLength: =DataSourceInfo([@DL_CHINHSACH_APDUNG], DataSourceInfo.MaxLength, "cr282_ma_chinh_sach")
                        Required: =true
                        Update: =newMaCS
                        Visible: =false
                        Width: =35
                        X: =0
                        Y: =3
                        ZIndex: =7

                        DataCardKey39 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            Color: =RGBA(50, 49, 48, 1)
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            FocusedBorderThickness: =4
                            FontWeight: =FontWeight.Semibold
                            Height: =34
                            PaddingLeft: =0
                            Size: =11
                            Text: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.4
                            Wrap: =false
                            X: =30
                            Y: =10 + (DataCardMaCSApDung.Height / 2) - (Self.Height / 2)
                            ZIndex: =1

                        DataCardMaCSApDung As text:
                            BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                            Color: =RGBA(50, 49, 48, 1)
                            Default: =Parent.Default
                            DelayOutput: =true
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(161, 159, 157, 1)
                            DisabledFill: =RGBA(242, 242, 241, 0)
                            DisplayMode: =Parent.DisplayMode
                            Font: =Font.'Segoe UI'
                            HoverBorderColor: =RGBA(16, 110, 190, 1)
                            HoverColor: =RGBA(50, 49, 48, 1)
                            HoverFill: =RGBA(255, 255, 255, 1)
                            MaxLength: =Parent.MaxLength
                            PaddingLeft: =5
                            PressedBorderColor: =RGBA(0, 120, 212, 1)
                            PressedColor: =RGBA(50, 49, 48, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            RadiusBottomLeft: =0
                            RadiusBottomRight: =0
                            RadiusTopLeft: =0
                            RadiusTopRight: =0
                            Tooltip: =Parent.DisplayName
                            Width: =(Parent.Width - 60) * 0.6
                            X: =DataCardKey39.X + DataCardKey39.Width
                            Y: =10
                            ZIndex: =2

                        ErrorMessage39 As label:
                            AutoHeight: =true
                            BorderColor: =RGBA(0, 0, 0, 0)
                            BorderStyle: =BorderStyle.None
                            BorderThickness: =2
                            DisabledBorderColor: =RGBA(0, 0, 0, 0)
                            DisabledColor: =RGBA(168, 0, 0, 1)
                            FocusedBorderThickness: =4
                            Font: =Font.'Segoe UI'
                            Height: =10
                            Live: =Live.Assertive
                            PaddingBottom: =0
                            PaddingLeft: =0
                            PaddingRight: =0
                            PaddingTop: =0
                            Size: =13
                            Text: =Parent.Error
                            Visible: =Parent.DisplayMode=DisplayMode.Edit
                            Width: =Parent.Width - 60
                            X: =30
                            Y: =DataCardMaCSApDung.Y + DataCardMaCSApDung.Height
                            ZIndex: =3

            "'Container3.2' As groupContainer.manualLayoutContainer":
                Fill: =RGBA(255, 255, 255, 1)
                Height: =502
                Width: =Parent.Width-Self.X
                X: =130
                Y: =579
                ZIndex: =2

                Label6_7 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="2.2 Kênh bán"
                    Width: =Parent.Width
                    ZIndex: =2

                RadioCSKB As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KB" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KB" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaCS  && THANH_PHAN = "KB" && AP_DUNG = "1" ).TEN_KIEU)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKBCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryKBCS As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungKB
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =46
                    Visible: =If(RadioCSKB.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =76
                    ZIndex: =4

                    Label9_16 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Tiêu chí"
                        Width: =87
                        X: =18
                        ZIndex: =2

                    Label9_17 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Giá trị"
                        Width: =87
                        X: =315
                        ZIndex: =3

                    DropKBCS As dropdown:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KB")
                        OnChange: =Reset(ComboBoxCSKB)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =110
                        Y: =5
                        ZIndex: =4

                    ComboBoxCSKB As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropKBCS.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =Search(Filter( tmpDsGiatriCS, Loai = DropKBCS.Selected.MA_CHI_TIEU),ComboBoxCSKB.SearchText,"cr282_ten_gia_tri")
                        Size: =11
                        Width: =463
                        X: =402
                        Y: =5
                        ZIndex: =5

                    BtnXoaCSKB As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungKB, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =9
                        ZIndex: =6

                    CSAD_ID As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: |
                            =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_8 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioCSKB_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaCS  && THANH_PHAN = "KB" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKBCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =330
                    ZIndex: =6

                GalleryKBCS_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruKB
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =46
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =330
                    ZIndex: =7

                    Label9_18 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Tiêu chí"
                        Width: =87
                        X: =18
                        ZIndex: =2

                    Label9_19 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Giá trị"
                        Width: =87
                        X: =315
                        ZIndex: =3

                    DropKBCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KB")
                        OnChange: =Reset(ComboBoxCSKB_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =110
                        Y: =5
                        ZIndex: =4

                    ComboBoxCSKB_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatriCS, Loai = DropKBCS_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["Loai"]
                        SearchItems: =Search(Filter( tmpDsGiatriCS, Loai = DropKBCS_LoaiTru.Selected.MA_CHI_TIEU),ComboBoxCSKB_LT.SearchText,"Loai")
                        Size: =11
                        Width: =463
                        X: =402
                        Y: =5
                        ZIndex: =5

                    BtnXoaCSKB_LT As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruKB, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =9
                        ZIndex: =6

                    CSAD_ID_LoaiTru As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_9 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =290
                    ZIndex: =8

                BtnADCS_KB As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |
                        =Collect(
                            tmpCSApdungKB,
                            [{cr282_id:Value( Max (tmpCSApdungKB, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKB.Selected.ID = 2, true)
                    Width: =91
                    X: =253.2
                    Y: =40
                    ZIndex: =9

                BtnLTCS_KB As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |
                        =Collect(
                            tmpCSLoaitruKB,
                            [{cr282_id:Value( Max (tmpCSLoaitruKB, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKB_LoaiTru.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =297
                    ZIndex: =10

                ResetDSKBCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungKB,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach","cr282_ap_dung","cr282_ma_tieu_chi","cr282_ten_tieu_chi","GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =157
                    Y: =41
                    ZIndex: =11

                ResetDSKBCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruKB,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KB" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach","cr282_ap_dung","cr282_ma_tieu_chi","cr282_ten_tieu_chi","GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =170
                    Y: =292
                    ZIndex: =12

            "'Container3.3' As groupContainer.manualLayoutContainer":
                Height: =453
                Width: =Parent.Width-Self.X
                X: =130
                Y: =1081
                ZIndex: =3

                Label6_8 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="2.3 Khách hàng"
                    Width: =Parent.Width
                    ZIndex: =2

                RadioCSKH As radio:
                    BorderColor: =RGBA(54, 176, 75, 1)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "KH" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH=varMaCS  && THANH_PHAN = "KH" && AP_DUNG ="1" ).TEN_KIEU)
                    DisabledBorderColor: =RGBA(255, 255, 255, 1)
                    DisabledFill: =RGBA(255, 255, 255, 1)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKHCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryKHCS As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungKH
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =46
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =970
                    X: =253.2
                    Y: =77
                    ZIndex: =4

                    Label9_20 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Tiêu chí"
                        Width: =87
                        X: =18
                        ZIndex: =2

                    Label9_21 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Giá trị"
                        Width: =87
                        X: =329
                        ZIndex: =3

                    DropKHCS As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =32
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KH")
                        OnChange: =Reset(ComboKHCS)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =110
                        Y: =5
                        ZIndex: =4

                    ComboKHCS As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatri, Loai = DropKHCS.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =Search(Filter( tmpDsGiatri, Loai = DropKHCS.Selected.MA_CHI_TIEU),ComboKHCS.SearchText,"cr282_ten_gia_tri")
                        Size: =11
                        Width: =463
                        X: =402
                        Y: =5
                        ZIndex: =5

                    Button5_17 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungKH, cr282_id= ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    KH_ID As text:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(255, 255, 255, 1)
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =RGBA(0, 120, 212, 1)
                        PressedColor: =RGBA(50, 49, 48, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =false
                        X: =60
                        Y: =6
                        ZIndex: =8

                Label7_10 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioCSKH_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "KH" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSKHCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =293
                    ZIndex: =6

                GalleryKHCS_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruKH
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =46
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =970
                    X: =253
                    Y: =293
                    ZIndex: =7

                    Label9_22 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Tiêu chí"
                        Width: =87
                        X: =18
                        ZIndex: =2

                    Label9_23 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Giá trị"
                        Width: =87
                        X: =329
                        ZIndex: =3

                    DropKHCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "KH")
                        OnChange: =Reset(ComboKHCS_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =110
                        Y: =5
                        ZIndex: =4

                    ComboKHCS_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatri, Loai = DropKHCS_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =Search(Filter( tmpDsGiatri, Loai = DropKHCS_LoaiTru.Selected.MA_CHI_TIEU),ComboKHCS_LT.SearchText,"cr282_ten_gia_tri")
                        Size: =11
                        Width: =463
                        X: =402
                        Y: =5
                        ZIndex: =5

                    Button5_18 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruKH, cr282_id = ThisItem.cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =5
                        ZIndex: =6

                    KHLT_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_11 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =253
                    ZIndex: =8

                Button3_9 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSApdungKH,
                            [{cr282_id:Value( Max (tmpCSApdungKH, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKH.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =40
                    ZIndex: =9

                Button3_10 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSLoaitruKH,
                            [{cr282_id:Value( Max (tmpCSLoaitruKH, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSKH_LoaiTru.Selected.ID = 2 , true)
                    Width: =91
                    X: =253
                    Y: =260
                    ZIndex: =10

                ResetDSKHCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungKH,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach","cr282_ap_dung","cr282_ma_tieu_chi","cr282_ten_tieu_chi","GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =46
                    ZIndex: =11

                ResetDSKHCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruKH,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "KH" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach","cr282_ap_dung","cr282_ma_tieu_chi","cr282_ten_tieu_chi","GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =175
                    Y: =260
                    ZIndex: =12

            "'Container3.4' As groupContainer.manualLayoutContainer":
                Height: =536
                Width: =Parent.Width-Self.X
                X: =130
                Y: =1583
                ZIndex: =4

                Label6_9 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =46
                    Size: =11
                    Text: ="2.4 Phạm vi"
                    Width: =Parent.Width
                    ZIndex: =2

                RadioCSPV As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: |-
                        =//If(CountRows(Filter(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "PV" && AP_DUNG = "1")) > 0, LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaDKien  && THANH_PHAN = "SP" && AP_DUNG = "1" ).TEN_KIEU, "Tất cả" )
                        If(IsBlank(varMaCS), "Tất cả",LookUp(DL_CHINHSACH_DOITUONG, MA_CHINH_SACH =varMaCS  && THANH_PHAN = "PV" && AP_DUNG = "1" ).TEN_KIEU)
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSPVCS)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =40
                    Y: =76
                    ZIndex: =3

                GalleryPVCS As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSApdungPV
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =46
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =971
                    X: =253.2
                    Y: =76
                    ZIndex: =4

                    Label9_24 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Tiêu chí"
                        Width: =87
                        X: =18
                        ZIndex: =2

                    Label9_25 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Giá trị"
                        Width: =87
                        X: =329
                        ZIndex: =3

                    DropPVCS As dropdown:
                        BorderColor: =RGBA(45, 128, 40, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(45, 128, 40, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "PV")
                        OnChange: =Reset(ComboPVCS)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =110
                        Y: =5
                        ZIndex: =4

                    ComboPVCS As combobox:
                        BorderColor: =RGBA(45, 128, 40, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(45, 128, 40, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatri, Loai = DropPVCS.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =Search(Filter( tmpDsGiatri, Loai = DropPVCS.Selected.MA_CHI_TIEU),ComboPVCS.SearchText,"cr282_ten_gia_tri")
                        Size: =11
                        Width: =463
                        X: =402
                        Y: =5
                        ZIndex: =5

                    Button5_19 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSApdungPV, ThisItem.cr282_id=cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =9
                        ZIndex: =6

                    PV_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_12 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Áp dụng"
                    X: =25
                    Y: =36
                    ZIndex: =5

                RadioCSPV_LoaiTru As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Default: =LookUp(DL_DIEUKIEN_APDUNG_LOAI, MA_DIEU_KIEN =varMaCS  && THANH_PHAN = "PV" && AP_DUNG = "2" ).TEN_KIEU
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    HoverColor: =RGBA(0, 0, 0, 1)
                    Items: |-
                        =[{Text:"Tất cả", ID: 1 },{Text:"Một phần", ID: 2}]
                    OnSelect: =Select(ResetDSPVCS_LT)
                    RadioBorderColor: =RGBA(0, 84, 148, 1)
                    Size: =11
                    X: =41
                    Y: =330
                    ZIndex: =6

                GalleryPVCS_LoaiTru As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    DelayItemLoading: =true
                    Height: =156
                    Items: =tmpCSLoaitruPV
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =46
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 ,true)
                    Width: =971
                    X: =253.2
                    Y: =330
                    ZIndex: =7

                    Label9_26 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Tiêu chí"
                        Width: =87
                        X: =18
                        ZIndex: =2

                    Label9_27 As label:
                        Height: =46
                        OnSelect: =Select(Parent)
                        Size: =11
                        Text: ="Giá trị"
                        Width: =87
                        X: =329
                        ZIndex: =3

                    DropPVCS_LoaiTru As dropdown:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        Default: =ThisItem.cr282_ten_tieu_chi
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        Items: =Filter(DM_TIEU_CHI_APDUNGS, LOAI = "PV")
                        OnChange: =Reset(ComboPVCS_LT)
                        OnSelect: =
                        Size: =11
                        Width: =200
                        X: =110
                        Y: =5
                        ZIndex: =4

                    ComboPVCS_LT As combobox:
                        BorderColor: =RGBA(54, 176, 75, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(54, 176, 75, 1)
                        DefaultSelectedItems: =ThisItem.GROUP_CS
                        DisabledBorderColor: =RGBA(204, 228, 246, 1)
                        DisabledFill: =RGBA(230, 230, 230, 1)
                        DisplayFields: =["cr282_ten_gia_tri"]
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter( tmpDsGiatri, Loai = DropPVCS_LoaiTru.Selected.MA_CHI_TIEU)
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_gia_tri"]
                        SearchItems: =Search(Filter( tmpDsGiatri, Loai = DropPVCS_LoaiTru.Selected.MA_CHI_TIEU),ComboPVCS_LT.SearchText,"cr282_ten_gia_tri")
                        Size: =11
                        Width: =463
                        X: =402
                        Y: =5
                        ZIndex: =5

                    Button5_20 As button:
                        DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =28
                        OnSelect: =RemoveIf(tmpCSLoaitruPV, ThisItem.cr282_id=cr282_id)
                        Size: =11
                        Text: ="Xoá"
                        Width: =73
                        X: =880
                        Y: =9
                        ZIndex: =6

                    PVLT_ID As text:
                        Default: =ThisItem.cr282_id
                        OnSelect: =Select(Parent)
                        Visible: =false
                        X: =40
                        Y: =6
                        ZIndex: =7

                Label7_13 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="Loại trừ"
                    X: =25
                    Y: =290
                    ZIndex: =8

                Button3_11 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSApdungPV,
                            [{cr282_id:Value( Max (tmpCSApdungPV, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSPV.Selected.ID = 2 , true)
                    Width: =91
                    X: =253.2
                    Y: =40
                    ZIndex: =9

                Button3_12 As button:
                    DisplayMode: =If(varGhiCS,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =25
                    OnSelect: |-
                        =Collect(
                            tmpCSLoaitruPV,
                            [{cr282_id:Value( Max (tmpCSLoaitruPV, cr282_id) + 1)}]
                        );
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =If(RadioCSPV_LoaiTru.Selected.ID = 2 ,true)
                    Width: =91
                    X: =253.2
                    Y: =297
                    ZIndex: =10

                ResetDSPVCS As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSApdungPV,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "1"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach","cr282_ap_dung","cr282_ma_tieu_chi","cr282_ten_tieu_chi","GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =40
                    ZIndex: =11

                ResetDSPVCS_LT As icon.Reset:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(0, 120, 212, 1)
                    DisabledBorderColor: =RGBA(245, 245, 245, 1)
                    DisabledColor: =RGBA(225, 223, 221, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    FocusedBorderThickness: =4
                    Height: =30
                    HoverBorderColor: =RGBA(0, 0, 0, 0)
                    HoverColor: =RGBA(16, 110, 190, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    Icon: =Icon.Reset
                    OnSelect: |-
                        =ClearCollect(
                            tmpCSLoaitruPV,
                            GroupBy(
                                Filter(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    MA_CHINH_SACH = varMaCS && THANH_PHAN = "PV" && AP_DUNG = "2"
                                ),"cr282_id",
                                "cr282_ma_chinh_sach","cr282_ap_dung","cr282_ma_tieu_chi","cr282_ten_tieu_chi","GROUP_CS"
                            )
                        );
                    PressedBorderColor: =RGBA(0, 0, 0, 0)
                    PressedColor: =RGBA(16, 110, 190, 1)
                    PressedFill: =RGBA(0, 0, 0, 0)
                    Visible: =false
                    Width: =30
                    X: =199
                    Y: =254
                    ZIndex: =12

    BtnLuuCS As button:
        DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
        OnSelect: |
            =//Xu ly thong tin chung
            UpdateContext({errorMsgCS: ""});
            Clear(tmpCheckDup);
            //ID chinh sach chung
            If(
                IsBlank(DataCardIDCS.Text),
                UpdateContext(
                    {
                        newIDCS: If(
                            CountIf(
                                DL_CHINHSACH_CHUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_CHUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCS: Value(DataCardIDCS.Text)})
            );
            //ID chinh sach ap dung
            If(
                IsBlank(DataCardIDCSApDung.Text),
                UpdateContext(
                    {
                        newIDCSApdung: If(
                            CountIf(
                                DL_CHINHSACH_APDUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_APDUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCSApdung: Value(DataCardIDCSApDung.Text)})
            );
            //Ma chinh sach
            If(
                IsBlank(DataCardValueMaCS.Text),
                UpdateContext(
                    {
                        newMaCS: Concatenate(
                            "CS",
                            If(
                                newIDCS < 10,
                                "000",
                                If(
                                    newIDCS < 100 && newIDCS >= 10,
                                    "00",
                                    If(
                                        newIDCS < 1000 && newIDCS >= 100,
                                        "0",
                                        ""
                                    )
                                )
                            ),
                            Text(newIDCS)
                        )
                    }
                ),
                UpdateContext({newMaCS: DataCardValueMaCS.Text})
            );
            If(
                IsBlank(DateValueTuCS.SelectedDate),
                UpdateContext({errorMsgCS: "Hiệu lực từ là bắt buộc"})
            );
            If(
                IsBlank(errorMsgCS) && !IsBlank(DateValueDenCS.SelectedDate) && DateValueTuCS.SelectedDate > DateValueDenCS.SelectedDate,
                UpdateContext({errorMsgCS: "Hiệu lực đến phải sau hiệu lực từ"})
            );
            //Kiem tra tieu chi la duy nhat
            //sản phâm
            //End sản phâm
            //Kenh ban
            //Kenh ban - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Kenh ban - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End kenh ban
            //Khach hang
            //Khach hang - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKH) > 0,
                Clear(errorCol);
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Khach hang - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruKH) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End khách hàng
            //Phạm vi
            //pham vi - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpApdungPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPVCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPVCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Pham vi - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPVCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPVCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End phạm vi
            //End kiem tra duy nhat
            If(
                !IsBlank(errorMsgCS),
                Notify(
                    errorMsgCS,
                    NotificationType.Error,
                    800
                ),
                SubmitForm(TTChungCS);
                SubmitForm(TTCSApDung);
                Set(
                    varMaCS,
                    newMaCS
                );
                EditForm(TTChungCS);
                EditForm(TTCSApDung);
                RemoveIf(
                    DL_CHINHSACH_DOITUONG,
                    MA_CHINH_SACH = newMaCS
                );
                RemoveIf(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = newMaCS
                );
                
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KENH BAN
            Set(
                    varIdAdCSKB,
                    0
                );
                Set(
                    varIdLtCSKB,
                    0
                );
                Set(
                    varIdAdCSKB,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "1",
                        KIEU: RadioCSKB.Selected.ID,
                        TEN_KIEU: RadioCSKB.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKB,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdLtCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "2",
                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKB_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSKB.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKB) > 0,
                        ForAll(
                            GalleryKBCS.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID.Text),
                                        ID_DOITUONG: varIdAdCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKB.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KB"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "1"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "1"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdAdCSKB,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KB",
                                    AP_DUNG: "1",
                                    KIEU: RadioCSKB.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSKB_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKB) > 0,
                        ForAll(
                            GalleryKBCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID_LoaiTru.Text),
                                        ID_DOITUONG: varIdAdCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KB"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "2"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "2"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdLtCSKB,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KB",
                                    AP_DUNG: "2",
                                    KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            //End kenh ban
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KHANH HANG
            Set(
                    varIdAdCSKH,
                    0
                );
                Set(
                    varIdLtCSKH,
                    0
                );
                Set(
                    varIdAdCSKH,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKH,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "1",
                        KIEU: RadioCSKH.Selected.ID,
                        TEN_KIEU: RadioCSKH.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKH,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "2",
                        KIEU: RadioCSKH_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKH_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSKH.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKH) > 0,
                        ForAll(
                            GalleryKHCS.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KH_ID.Text),
                                        ID_DOITUONG: varIdAdCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKH.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KH"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "1"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "1"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdAdCSKH,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KH",
                                    AP_DUNG: "1",
                                    KIEU: RadioCSKH.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSKH_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKH) > 0,
                        ForAll(
                            GalleryKHCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KHLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KH"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "2"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "2"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdLtCSKH,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KH",
                                    AP_DUNG: "2",
                                    KIEU: RadioCSKH_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG PHAM_VI
            Set(
                    varIdAdCSPV,
                    0
                );
                Set(
                    varIdLtCSPV,
                    0
                );
                Set(
                    varIdAdCSPV,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSPV,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "PV",
                        AP_DUNG: "1",
                        KIEU: RadioCSPV.Selected.ID,
                        TEN_KIEU: RadioCSPV.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSPV,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        THANH_PHAN: "PV",
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        AP_DUNG: "2",
                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSPV_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSPV.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungPV) > 0,
                        ForAll(
                            GalleryPVCS.AllItems As pv,
                            ForAll(
                                pv.ComboPVCS.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(pv.PV_ID.Text),
                                        ID_DOITUONG: varIdAdCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSPV.Selected.ID,
                                        MA_TIEU_CHI: pv.DropPVCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: pv.DropPVCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = pv.DropPVCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "PV"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "1"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "1"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdAdCSPV,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "PV",
                                    AP_DUNG: "1",
                                    KIEU: RadioCSPV.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSPV_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruPV) > 0,
                        ForAll(
                            GalleryPVCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboPVCS_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.PVLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "PV"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "2"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "2"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdLtCSPV,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "PV",
                                    AP_DUNG: "2",
                                    KIEU: RadioCSPV_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                IsBlank(errorMsgCS),
                Notify(
                    "Lưu dữ liệu thành công",
                    NotificationType.Success,
                    800
                )
            );
        Text: ="Lưu dữ liệu"
        X: =1006
        Y: =626
        ZIndex: =2

    BtnGhiCS As button:
        DisplayMode: =If(varGhiCS,DisplayMode.Disabled, DisplayMode.Edit)
        OnSelect: |
            =//Xu ly thong tin chung
            UpdateContext({errorMsgCS: ""});
            Clear(tmpCheckDup);
            //ID chinh sach chung
            If(
                IsBlank(DataCardIDCS.Text),
                UpdateContext(
                    {
                        newIDCS: If(
                            CountIf(
                                DL_CHINHSACH_CHUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_CHUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCS: Value(DataCardIDCS.Text)})
            );
            //ID chinh sach ap dung
            If(
                IsBlank(DataCardIDCSApDung.Text),
                UpdateContext(
                    {
                        newIDCSApdung: If(
                            CountIf(
                                DL_CHINHSACH_APDUNG,
                                true
                            ) = 0,
                            1,
                            Max(
                                DL_CHINHSACH_APDUNG,
                                ID
                            ) + 1
                        )
                    }
                ),
                UpdateContext({newIDCSApdung: Value(DataCardIDCSApDung.Text)})
            );
            //Ma chinh sach
            If(
                IsBlank(DataCardValueMaCS.Text),
                UpdateContext(
                    {
                        newMaCS: Concatenate(
                            "CS",
                            If(
                                newIDCS < 10,
                                "000",
                                If(
                                    newIDCS < 100 && newIDCS >= 10,
                                    "00",
                                    If(
                                        newIDCS < 1000 && newIDCS >= 100,
                                        "0",
                                        ""
                                    )
                                )
                            ),
                            Text(newIDCS)
                        )
                    }
                ),
                UpdateContext({newMaCS: DataCardValueMaCS.Text})
            );
            If(
                IsBlank(DateValueTuCS.SelectedDate),
                UpdateContext({errorMsgCS: "Hiệu lực từ là bắt buộc"})
            );
            If(
                IsBlank(errorMsgCS) && !IsBlank(DateValueDenCS.SelectedDate) && DateValueTuCS.SelectedDate > DateValueDenCS.SelectedDate,
                UpdateContext({errorMsgCS: "Hiệu lực đến phải sau hiệu lực từ"})
            );
            //Kiem tra tieu chi la duy nhat
            //sản phâm
            //End sản phâm
            //Kenh ban
            //Kenh ban - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Kenh ban - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruKB) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KB",
                            Value: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKBCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KB" && Value = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ kênh bán"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End kenh ban
            //Khach hang
            //Khach hang - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpCSApdungKH) > 0,
                Clear(errorCol);
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Khach hang - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruKH) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "KH",
                            Value: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryKHCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "KH" && Value = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ khách hàng"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End khách hàng
            //Phạm vi
            //pham vi - ap dung
            If(
                IsBlank(errorMsgCS) && CountRows(tmpApdungPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPVCS.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPVCS.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPVCS.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí áp dụng phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //Pham vi - loai tru
            If(
                IsBlank(errorMsgCS) && CountRows(tmpLoaitruPV) > 0,
                Clear(errorCol);
                Clear(tmpCheckDup);
                ForAll(
                    GalleryPVCS_LoaiTru.AllItems As kh,
                    Collect(
                        tmpCheckDup,
                        {
                            Type: "PV",
                            Value: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                        }
                    );
                );
                ForAll(
                    GalleryPVCS_LoaiTru.AllItems As kh,
                    If(
                        CountIf(
                            tmpCheckDup,
                            Type = "PV" && Value = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                        ) > 1,
                        Collect(
                            errorCol,
                            {Message: "Trùng tiêu chí loại trừ phạm vi"}
                        )
                    )
                );
                If(
                    !IsEmpty(errorCol),
                    UpdateContext({errorMsgCS: First(errorCol).Message})
                )
            );
            //End phạm vi
            //End kiem tra duy nhat
            If(
                !IsBlank(errorMsgCS),
                Notify(
                    errorMsgCS,
                    NotificationType.Error,
                    800
                ),
                SubmitForm(TTChungCS);
                SubmitForm(TTCSApDung);
                Set(
                    varMaCS,
                    newMaCS
                );
                EditForm(TTChungCS);
                EditForm(TTCSApDung);
                RemoveIf(
                    DL_CHINHSACH_DOITUONG,
                    MA_CHINH_SACH = newMaCS
                );
                RemoveIf(
                    DL_CHINHSACH_DOITUONG_CT,
                    MA_CHINH_SACH = newMaCS
                );
                
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KENH BAN
            Set(
                    varIdAdCSKB,
                    0
                );
                Set(
                    varIdLtCSKB,
                    0
                );
                Set(
                    varIdAdCSKB,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "1",
                        KIEU: RadioCSKB.Selected.ID,
                        TEN_KIEU: RadioCSKB.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKB,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdLtCSKB,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KB",
                        AP_DUNG: "2",
                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKB_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSKB.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKB) > 0,
                        ForAll(
                            GalleryKBCS.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID.Text),
                                        ID_DOITUONG: varIdAdCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKB.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KB"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "1"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "1"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdAdCSKB,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KB",
                                    AP_DUNG: "1",
                                    KIEU: RadioCSKB.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSKB_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKB) > 0,
                        ForAll(
                            GalleryKBCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboBoxCSKB_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.CSAD_ID_LoaiTru.Text),
                                        ID_DOITUONG: varIdAdCSKB,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KB",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKBCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKBCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KB"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "2"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KB" && AP_DUNG = "2"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdLtCSKB,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KB",
                                    AP_DUNG: "2",
                                    KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            //End kenh ban
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG KHANH HANG
            Set(
                    varIdAdCSKH,
                    0
                );
                Set(
                    varIdLtCSKH,
                    0
                );
                Set(
                    varIdAdCSKH,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSKH,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "1",
                        KIEU: RadioCSKH.Selected.ID,
                        TEN_KIEU: RadioCSKH.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSKH,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "KH",
                        AP_DUNG: "2",
                        KIEU: RadioCSKH_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSKH_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSKH.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungKH) > 0,
                        ForAll(
                            GalleryKHCS.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KH_ID.Text),
                                        ID_DOITUONG: varIdAdCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSKH.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KH"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "1"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "1"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdAdCSKH,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KH",
                                    AP_DUNG: "1",
                                    KIEU: RadioCSKH.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSKH_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruKH) > 0,
                        ForAll(
                            GalleryKHCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboKHCS_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.KHLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSKH,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "KH",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSKB_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropKHCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropKHCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "KH"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "2"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "KH" && AP_DUNG = "2"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdLtCSKH,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "KH",
                                    AP_DUNG: "2",
                                    KIEU: RadioCSKH_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng  DL_CHINHSACH_DOITUONG PHAM_VI
            Set(
                    varIdAdCSPV,
                    0
                );
                Set(
                    varIdLtCSPV,
                    0
                );
                Set(
                    varIdAdCSPV,
                    Max(
                        DL_CHINHSACH_DOITUONG,
                        ID
                    ) + 1
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: varIdAdCSPV,
                        MA_CHINH_SACH: newMaCS,
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        THANH_PHAN: "PV",
                        AP_DUNG: "1",
                        KIEU: RadioCSPV.Selected.ID,
                        TEN_KIEU: RadioCSPV.Selected.Text
                    }
                );
                Patch(
                    DL_CHINHSACH_DOITUONG,
                    Set(
                        varIdLtCSPV,
                        Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1
                    );
                    Defaults(DL_CHINHSACH_DOITUONG),
                    {
                        ID: Max(
                            DL_CHINHSACH_DOITUONG,
                            ID
                        ) + 1,
                        MA_CHINH_SACH: newMaCS,
                        THANH_PHAN: "PV",
                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                        AP_DUNG: "2",
                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                        TEN_KIEU: RadioCSPV_LoaiTru.Selected.Text
                    }
                );
                
            // lưu dữ liệu ở bảng chi tiết
            If(
                    RadioCSPV.Selected.ID = 2,
                    If(
                        CountRows(tmpCSApdungPV) > 0,
                        ForAll(
                            GalleryPVCS.AllItems As pv,
                            ForAll(
                                pv.ComboPVCS.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(pv.PV_ID.Text),
                                        ID_DOITUONG: varIdAdCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "1",
                                        KIEU: RadioCSPV.Selected.ID,
                                        MA_TIEU_CHI: pv.DropPVCS.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: pv.DropPVCS.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = pv.DropPVCS.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "PV"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "1"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "1"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdAdCSPV,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "PV",
                                    AP_DUNG: "1",
                                    KIEU: RadioCSPV.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
                
            // lưu dữ liệu ở bảng chi tiết loai tru
            If(
                    RadioCSPV_LoaiTru.Selected.ID = 2,
                    If(
                        CountRows(tmpCSLoaitruPV) > 0,
                        ForAll(
                            GalleryPVCS_LoaiTru.AllItems As kh,
                            ForAll(
                                kh.ComboPVCS_LT.SelectedItems As gt,
                                Patch(
                                    DL_CHINHSACH_DOITUONG_CT,
                                    Defaults(DL_CHINHSACH_DOITUONG_CT),
                                    {
                                        ID: Value(kh.PVLT_ID.Text),
                                        ID_DOITUONG: varIdLtCSPV,
                                        MA_CHINH_SACH: newMaCS,
                                        LOAI_DK: DataCardLoaiDK.Selected.MA,
                                        ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                        THANH_PHAN: "PV",
                                        AP_DUNG: "2",
                                        KIEU: RadioCSPV_LoaiTru.Selected.ID,
                                        MA_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU,
                                        TEN_TIEU_CHI: kh.DropPVCS_LoaiTru.Selected.TEN_CHI_TIEU,
                                        MA_GIA_TRI: LookUp(
                                            tmpDsGiatriCS,
                                            cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.DropPVCS_LoaiTru.Selected.MA_CHI_TIEU
                                        ).Ma,
                                        TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                    }
                                )
                            )
                        )
                    ),
                    ForAll(
                        Filter(
                            DM_TIEU_CHI_APDUNGS,
                            LOAI = "PV"
                        ) As kh,
                        ForAll(
                            Filter(
                                tmpDsGiatriCS,
                                Loai = kh.MA_CHI_TIEU
                            ) As gt,
                            Patch(
                                DL_CHINHSACH_DOITUONG_CT,
                                Defaults(DL_CHINHSACH_DOITUONG_CT),
                                {
                                    ID: If(
                                        !IsBlank(
                                            LookUp(
                                                DL_CHINHSACH_DOITUONG_CT,
                                                MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "2"
                                            ).ID
                                        ),
                                        LookUp(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            MA_CHINH_SACH = newMaCS && MA_TIEU_CHI = kh.MA_CHI_TIEU && THANH_PHAN = "PV" && AP_DUNG = "2"
                                        ).ID,
                                        Max(
                                            DL_CHINHSACH_DOITUONG_CT,
                                            ID
                                        ) + 1
                                    ),
                                    ID_DOITUONG: varIdLtCSPV,
                                    MA_CHINH_SACH: newMaCS,
                                    LOAI_DK: DataCardLoaiDK.Selected.MA,
                                    ANH_HUONG: DataCardAnhHuong.Selected.MA,
                                    THANH_PHAN: "PV",
                                    AP_DUNG: "2",
                                    KIEU: RadioCSPV_LoaiTru.Selected.ID,
                                    MA_TIEU_CHI: kh.MA_CHI_TIEU,
                                    TEN_TIEU_CHI: kh.TEN_CHI_TIEU,
                                    MA_GIA_TRI: LookUp(
                                        tmpDsGiatriCS,
                                        cr282_ten_gia_tri = gt.cr282_ten_gia_tri && Loai = kh.MA_CHI_TIEU
                                    ).Ma,
                                    TEN_GIA_TRI: gt.cr282_ten_gia_tri
                                }
                            )
                        )
                    )
                );
            );
            If(
                IsBlank(errorMsgCS),
                UpdateIf(
                    DL_CHINHSACH_CHUNG,
                    MA_CHINH_SACH = varMaCS,
                    {TRANG_THAI_FIX: "1"}
                );
                Set(
                    varGhiCS,
                    true
                );
                Notify(
                    "Ghi dữ liệu thành công",
                    NotificationType.Success,
                    800
                );
            );
        Text: ="Ghi dữ liệu"
        Visible: =If(!IsBlank(DataCardValueMaCS.Text),true, false)
        X: =1181
        Y: =626
        ZIndex: =3

    BtnBack As button:
        OnSelect: =Back();
        Text: ="Quay lại"
        X: =818
        Y: =626
        ZIndex: =4

