"NhapchitietCT As screen.'phoneLayout_FluidGridWithHeaderPageLayout_ver3.0'":
    OnVisible: |-
        =ClearCollect(
            tmpGPCCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                        Filter(DL_CHUONGTRINH_GPS,MA_SAN_PHAM=valMaSP),
                        "cr282_id",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_id",
                "cr282_ma_san_pham",
                "cr282_thong_tin",
                "cr282_mo_ta",
                "cr282_so_tien",
                "cr282_donvi_tien",
                "cr282_ty_le",
                "edited"
            )
        );
        UpdateContext({maAddedGP:"",maUpdatedGP:""});

    Canvas1 As fluidGrid.fluidGridWithBlankCard:
        BorderThickness: =0
        Height: =Parent.Height - Self.Y
        Width: =Parent.Width
        Y: =
        ZIndex: =3

        DataCard7 As dataCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            BorderThickness: =0
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =980
            Width: =Parent.Width
            X: =0
            Y: =0
            ZIndex: =1

            "'3.2Thongtinphikhac_1' As groupContainer.manualLayoutContainer":
                Height: =386
                Width: =1208
                X: =76
                Y: =405
                ZIndex: =1

                GalleryCT_7 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =257
                    Items: =tmpPhiKhacCollect
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =40
                    Width: =1208
                    Y: =129
                    ZIndex: =1

                    Btn_SuaCT_7 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedPhiKhac<>"",maUpdatedPhiKhac<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpPhiKhacCollect,
                                    cr282_id=ThisItem.cr282_id,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdatedPhiKhac:ThisItem.cr282_id
                                })
                            )
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =75
                        X: =989
                        ZIndex: =17

                    Btn_XoaCT_7 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedPhiKhac<>"",maAddedPhiKhac<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_PHIKHACS);
                                RemoveIf(
                                    DL_SAN_PHAM_PHIKHACS,
                                    ID=ThisItem.cr282_id
                                );
                                Remove(tmpPhiKhacCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800) 
                            )
                        Size: =13
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =85
                        X: =1093
                        ZIndex: =18

                    Btn_LuuCT_7 As button:
                        OnSelect: |
                            =
                                If( ThisItem.cr282_id=maAddedPhiKhac,
                                    Patch(
                                        DL_SAN_PHAM_PHIKHACS,
                                        {
                                            ID:ThisItem.cr282_id,
                                            NHOM_THONG_TIN:CbxNhom_thongtin_1.Selected.MA_YEU_TO ,
                                            MA_SAN_PHAM:valMaSP,
                                            MO_TA:TxtMota_3.Text
                                        }
                                    ),
                                    UpdateIf(
                                        DL_SAN_PHAM_PHIKHACS,
                                        ID=ThisItem.cr282_id,
                                        {
                                            NHOM_THONG_TIN:CbxNhom_thongtin_1.Selected.MA_YEU_TO ,
                                            MA_SAN_PHAM:valMaSP,
                                            MO_TA:TxtMota_3.Text
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpPhiKhacCollect,
                                    cr282_id=ThisItem.cr282_id,
                                    {
                                           cr282_nhom_thong_tin:CbxNhom_thongtin_1.Selected.MA_YEU_TO,
                                           cr282_mo_ta: TxtMota_3.Text,
                                           cr282_ma_san_pham: valMaSP
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpPhiKhacCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(DL_SAN_PHAM_PHIKHACS,MA_SAN_PHAM= valMaSP),
                            
                                                "cr282_id",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                    "cr282_id",
                                    "cr282_ma_san_pham",
                                    "cr282_nhom_thong_tin",
                                    "cr282_mo_ta",
                                    "edited"
                                    )
                                );
                                UpdateContext({
                                    maAddedPhiKhac:"",
                                    maUpdatedPhiKhac:""
                                });
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =75
                        X: =989
                        ZIndex: =19

                    Btn_HuyCT_7 As button:
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_id=maAddedPhiKhac,
                                Remove(tmpPhiKhacCollect,ThisItem),
                                UpdateIf(
                                    tmpPhiKhacCollect,
                                    cr282_id=ThisItem.cr282_id,
                                    {
                                        edited:0
                                    }
                                )
                            );
                             Set(  maAddedPhiKhac, "");
                             Set(  maUpdatedPhiKhac,"");
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =85
                        X: =1093
                        ZIndex: =20

                    TxtID_3 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Visible: =false
                        Width: =134
                        X: =3
                        ZIndex: =21

                    TxtMota_3 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_mo_ta
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Width: =494
                        X: =465
                        ZIndex: =23

                    CbxNhom_thongtin_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =LookUp(DM_YEUTO_AH_PHIS, MA_YEU_TO =ThisItem.cr282_nhom_thong_tin)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["cr282_ten_yeu_to"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =Filter(DM_YEUTO_AH_PHIS, LHNV = "Sức khoẻ")
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_yeu_to"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Width: =451
                        X: =3
                        ZIndex: =24

                BadgeCanvas1_25 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =30
                    Visible: =true
                    Width: =1189
                    X: =0
                    Y: =102
                    ZIndex: =2

                TextCanvas2_102 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Nhóm thông tin"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =185
                    X: =19
                    Y: =98
                    ZIndex: =3

                TextCanvas2_97 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Mô tả"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =471
                    Y: =94
                    ZIndex: =4

                TextCanvas2_103 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =1055
                    Y: =102
                    ZIndex: =5

                ThemMoiCT_7 As button:
                    Height: =36
                    OnSelect: |
                        =If( Or(maAddedPhiKhac<>"",maUpdatedPhiKhac<>""),
                            Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                            UpdateContext({
                                idMa:If(
                                    CountRows(tmpPhiKhacCollect) = 0,
                                    1000,
                                    Max(DL_SAN_PHAM_PHIKHACS, ID) + 1
                                )
                            });
                            Collect(
                                tmpPhiKhacCollect,
                                {
                                    cr282_id:Text(idMa),
                                    cr282_ma_san_pham:valMaSP,
                                    cr282_nhom_thong_tin:"",
                                    cr282_mo_ta:"",
                                    edited:1
                                }
                            );
                          UpdateContext({maAddedPhiKhac:Text(idMa),
                          maUpdatedPhiKhac : ""
                          })
                        )
                    Size: =13
                    Text: ="Thêm mới"
                    Y: =48
                    ZIndex: =11

                Label1_12 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Height: =44
                    Text: ="3.2. Thông tin phí khác"
                    Width: =1076
                    Y: =4
                    ZIndex: =13

            "'3.1Giamtruphi_3' As groupContainer.manualLayoutContainer":
                Height: =352
                Width: =1208
                X: =76
                Y: =40
                ZIndex: =2

                GalleryCT_8 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =213
                    Items: =tmpGPCCollect
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =40
                    Width: =1208
                    Y: =139
                    ZIndex: =1

                    Btn_SuaCT_8 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedGP<>"",maUpdatedGP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpGPCCollect,
                                    cr282_id_giamphi=ThisItem.cr282_id_giamphi,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdatedGP:ThisItem.cr282_id_giamphi
                                })
                            )
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =75
                        X: =1035
                        ZIndex: =17

                    Btn_XoaCT_8 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedGP<>"",maUpdatedGP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_GPS);
                                RemoveIf(
                                    DL_SAN_PHAM_GPS,
                                    ID_GIAMPHI=ThisItem.cr282_id_giamphi
                                );
                                Remove(tmpGPCCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800) 
                            )
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =85
                        X: =1113
                        ZIndex: =18

                    Btn_LuuCT_8 As button:
                        OnSelect: |
                            =
                                If( ThisItem.cr282_id_giamphi=maAddedGP,
                                    Patch(
                                        DL_CHUONGTRINH_GPS,
                                        {
                                            ID:ThisItem.cr282_id_giamphi,
                                            MA_SAN_PHAM:valMaSP,
                                            THONG_TIN:TxtThongtin_2.Text,
                                            MO_TA:TxtMota_4.Text,
                                            SO_TIEN:Value(TxtSo_tien_3.Text),
                                            DONVI_TIEN: TxtDonvi_tien_3.Text,
                                            TY_LE:TxtTy_le_3.Text
                                        }
                                    ),
                                    UpdateIf(
                                        DL_CHUONGTRINH_GPS,
                                        ID=ThisItem.cr282_id_giamphi,
                                        {
                                            THONG_TIN:TxtThongtin_2.Text,
                                            MA_SAN_PHAM:valMaSP,
                                            MO_TA:TxtMota_4.Text,
                                            SO_TIEN:Value(TxtSo_tien_3.Text),
                                            DONVI_TIEN: TxtDonvi_tien_3.Text,
                                            TY_LE:TxtTy_le_3.Text
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpGPCCollect,
                                    cr282_id=ThisItem.cr282_id_giamphi,
                                    {
                                            cr282_thong_tin:TxtThongtin_2.Text,
                                            cr282_mo_ta:TxtMota_4.Text,
                                            cr282_so_tien:Value(TxtSo_tien_3.Text),
                                            cr282_donvi_tien: TxtDonvi_tien_3.Text,
                                            cr282_ty_le:TxtTy_le_3.Text,
                                        edited:0
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpGPCCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(DL_CHUONGTRINH_GPS,MA_SAN_PHAM=valMaSP),
                                                "cr282_id",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                    "cr282_id",
                                    "cr282_ma_san_pham",
                                    "cr282_thong_tin",
                                    "cr282_mo_ta",
                                    "cr282_so_tien",
                                    "cr282_donvi_tien",
                                    "cr282_ty_le",
                                    "edited"
                                    )
                                );
                                UpdateContext({
                                    maAddedGP:"",
                                    maUpdatedGP:""
                                });
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =75
                        X: =1035
                        ZIndex: =19

                    Btn_HuyCT_8 As button:
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_id_giamphi=maAddedGP,
                                Remove(tmpGPCCollect,ThisItem),
                                UpdateIf(
                                    tmpGPCCollect,
                                    cr282_id_giamphi=ThisItem.cr282_id_giamphi,
                                    {
                                        edited:0
                                    }
                                )
                            );
                             Set(   maAddedGP, "");
                              Set(  maUpdated,"");
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =85
                        X: =1113
                        ZIndex: =20

                    TxtID_GP_3 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_id_giamphi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Visible: =false
                        Width: =134
                        X: =3
                        ZIndex: =21

                    TxtThongtin_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_thong_tin
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Width: =205
                        X: =3
                        ZIndex: =22

                    TxtMota_4 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_mo_ta
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Width: =227
                        X: =219
                        ZIndex: =23

                    TxtSo_tien_3 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_so_tien
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        Format: =TextFormat.Number
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Width: =127
                        X: =457
                        ZIndex: =24

                    TxtDonvi_tien_3 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_donvi_tien
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Width: =191
                        X: =595
                        ZIndex: =25

                    TxtTy_le_3 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_ty_le
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Width: =191
                        X: =800
                        ZIndex: =26

                BadgeCanvas1_26 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =30
                    Visible: =true
                    Width: =1197
                    X: =0
                    Y: =102
                    ZIndex: =2

                TextCanvas2_104 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Thông tin"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =185
                    X: =19
                    Y: =98
                    ZIndex: =3

                TextCanvas2_105 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Mô tả"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =224
                    Y: =98
                    ZIndex: =4

                TextCanvas2_107 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =1089
                    Y: =100
                    ZIndex: =5

                ThemMoiCT_8 As button:
                    Height: =36
                    OnSelect: |
                        =If( Or(maAddedGP<>"",maUpdatedGP<>""),
                            Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                            UpdateContext({
                                idMa:If(
                                    CountRows(tmpGPCCollect) = 0,
                                    1000,
                                    Max(DL_SAN_PHAM_GPS, ID_GIAMPHI) + 1
                                )
                            });
                            Collect(
                                tmpGPCCollect,
                                {
                                    cr282_id:Text(idMa),
                                    cr282_ma_san_pham:valMaSP,
                                    cr282_thong_tin:"",
                                    cr282_mo_ta:"",
                                    cr282_so_tien:0,
                                    cr282_donvi_tien:"",
                                    cr282_donvi_ty_le:"",
                                    edited:1
                                }
                            );
                          UpdateContext({maAddedGP:Text(idMa)})
                        )
                    Size: =13
                    Text: ="Thêm mới"
                    Y: =48
                    ZIndex: =11

                TextCanvas2_108 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Số tiền"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =464
                    Y: =102
                    ZIndex: =14

                TextCanvas2_109 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Đơn vị tiền"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =598
                    Y: =102
                    ZIndex: =15

                TextCanvas2_106 As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Tỷ lệ"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =799
                    Y: =99
                    ZIndex: =16

                Label2_1 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =48
                    Text: ="3.1 Thông tin giảm trừ phí"
                    Width: =1197
                    ZIndex: =17

