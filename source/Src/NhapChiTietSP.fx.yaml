"NhapChiTietSP As screen.'phoneLayout_FluidGridWithHeaderPageLayout_ver3.0'":
    OnVisible: |-
        =ClearCollect(
            tmpCTCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                        Filter(
                            ' DL_SAN_PHAM_CT',
                            MA_SAN_PHAM = valMaSP
                        ),
                        "cr282_ma_chuong_trinh",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_ma_chuong_trinh",
                "cr282_ma_chuongtrinh",
                "cr282_ten_chuong_trinh",
                "cr282_mo_ta",
                "cr282_ma_san_pham",
                "cr282_trang_thai",
                "edited"
            )
        );
        ClearCollect(
            tmpDKCCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                       Filter(DL_SAN_PHAM_DKCHUNGS,ma_san_pham=valMaSP),
                        "cr282_id_dkc",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_id_dkc",
                "cr282_ma_san_pham",
                "cr282_nhom_thong_tin",
                "cr282_thong_tin",
                "cr282_noi_dung",
                "edited"
            )
        );
        ClearCollect(
            dsNhomTT,
            {
                Key:"Đối tượng bảo hiểm",
                Value:1
            },
            {
                Key:"Phạm vi rủi ro được bảo hiểm",
                Value:2
            },
            {
                Key:"Điều khoản loại trừ",
                Value:3
            },
            {
                Key:"Phương thức đóng phi",
                Value:4
            }
            ,
            {
                Key:"Thời hạn bảo hiểm",
                Value:5
            }
            ,
            {
                Key:"Các quy định giải quyết tranh chấp",
                Value:6
            },
            {
                Key:"Quyền lợi và nghĩa vụ bên mua bảo hiểm, người được bảo hiểm",
                Value:7
            }
            , {
                Key:"Trách nhiệm Doanh nghiệp bảo hiểm",
                Value:8
            }
        );
        UpdateContext(
            {
                maAdded: "",
                maUpdated: ""
            }
        );
        UpdateContext(
            {
                maAddedDKC:"",
                maUpdatedDKC: ""
            }
        );
        
        ClearCollect(
            tmpGPCCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                        Filter(DL_SAN_PHAM_GPS,MA_SAN_PHAM=valMaSP),
                        "cr282_id_giamphi",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_id_giamphi",
                "cr282_ma_san_pham",
                "cr282_thong_tin",
                "cr282_mo_ta",
                "cr282_so_tien",
                "cr282_donvi_tien",
                "cr282_ty_le",
                "edited"
            )
        );
        UpdateContext({maAddedGP:"",maUpdatedGP:""});
        ClearCollect(
            tmpQLKCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                        Filter(
                            DL_SAN_PHAM_QL_KHACS,
                            MA_SP=valMaSP
                        ),
                        "cr282_ma_dl",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_ma_dl",
                "cr282_ma_nhom_ql",
                "cr282_mo_ta",
                "edited"
            )
        );
        UpdateContext({
            maAddedQLK:"",
            maUpdatedQLK:""
        });
        ClearCollect(
            tmpNQLSPCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                        Filter(
                            DL_SAN_PHAM_NHOMQLS,
                            MA_SP=valMaSP
                        ),
                        "cr282_ma_dl",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_ma_dl",
                "cr282_chuongtrinh_apdung",
                "cr282_loai",
                "cr282_ma_nhom_ql",
                "cr282_ma_nhom_tinhphi",
                "cr282_phamvi_dialy",
                "cr282_ten_hien_thi",
                "edited"
            )
        );
        ClearCollect(
            tmpQLCTTBCollect,
            ShowColumns(
                SortByColumns(
                    Filter(
                        DL_SAN_PHAM_QLCT_CHONS,
                        MA_SAN_PHAM=valMaSP
                    ),
                    "cr282_ma_ql_chitiet",
                    SortOrder.Ascending
                ),
                "cr282_ma_ql_chitiet",
                "cr282_ma_nhomql_sp",
                "cr282_ten_hien_thi",
                "cr282_ma_nhom_ql"
            )
        );
        UpdateContext({
            maAddedNQLSP:"",
            maUpdatedNQLSP:"",
            loaiFilterQLCTTB:1,
            loaiFilterNQLSP:1
        });
        
        ClearCollect(
            tmpPhiKhacCollect,
            ShowColumns(
                AddColumns(
                    SortByColumns(
                        Filter(DL_SAN_PHAM_PHIKHACS,MA_SAN_PHAM= valMaSP),
                        "cr282_id",
                        SortOrder.Ascending
                    ),
                    "edited",
                    0
                ),
                "cr282_id",
                "cr282_ma_san_pham",
                "cr282_nhom_thong_tin",
                "cr282_mo_ta",
                "edited"
            )
        );
        UpdateContext(
            {
                maAddedPhiKhac:"",
                maUpdatedPhiKhac: ""
            }
        );
        Select(IconTaiLaiBYT);
        Select(IconTaiLaiLT);
        Reset(CbxFilterQLCTTB_1);Reset(CbxFilterValueQLCTTB_1);Reset(TextFilterQLCTTB_1)

    CanvasSP_1 As fluidGrid.fluidGridWithBlankCard:
        BorderThickness: =0
        Height: =768
        Width: =Parent.Width
        Y: =
        ZIndex: =3

        DataCard1_1 As dataCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            BorderThickness: =0
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =2320
            Width: =1366
            X: =0
            Y: =0
            ZIndex: =1

            "'1. ChuongTrinh_1' As groupContainer.manualLayoutContainer":
                Height: =529
                Width: =1212
                X: =67
                ZIndex: =1

                GalleryCT_3 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =281
                    Items: =SortByColumns(Filter( tmpCTCollect, cr282_ma_san_pham = valMaSP ),"cr282_ma_chuong_trinh",SortOrder.Ascending)
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =42
                    Width: =1200
                    Y: =177
                    ZIndex: =1

                    TxtMaCT_1 As text:
                        BorderColor: =RGBA(15, 108, 189, 1)
                        Default: =ThisItem.cr282_ma_chuongtrinh
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =262
                        ZIndex: =8

                    TxtTenCT_1 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_ten_chuong_trinh
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =11
                        Width: =249
                        X: =262
                        ZIndex: =9

                    TxtMoTa_1 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_mo_ta
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =11
                        Width: =370
                        X: =511
                        ZIndex: =10

                    Btn_SuaCT_3 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                Or(maAdded<>"",maUpdated<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpCTCollect,
                                    cr282_ma_chuong_trinh=ThisItem.cr282_ma_chuong_trinh,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdated:ThisItem.cr282_ma_chuong_trinh
                                })
                            )
                        Size: =11
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =923
                        ZIndex: =17

                    Btn_XoaCT_3 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                Or(maAdded<>"",maUpdated<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(' DL_SAN_PHAM_CT');
                                UpdateContext({varTrangThai:LookUp(' DL_SAN_PHAM_CT', ID=ThisItem.cr282_ma_chuong_trinh).TRANG_THAI});
                                RemoveIf(
                                    ' DL_SAN_PHAM_CT',
                                    ID=ThisItem.cr282_ma_chuong_trinh
                                );
                                If(varTrangThai=1,
                                    RemoveIf(DL_CHUONGTRINH_DKCHUNGS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                    RemoveIf(DL_CHUONGTRINH_GPS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                    RemoveIf(DL_CHUONGTRINH_MATRANPHIS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                    RemoveIf(DL_CHUONGTRINH_PHIKHACS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                    RemoveIf(DL_CHUONGTRINH_QLCTS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                    RemoveIf(DL_CHUONGTRINH_QL_KHACS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                    RemoveIf(DL_CHUONG_TRINH_BANG_PHIS, MA_CHUONG_TRINH=ThisItem.cr282_ma_chuongtrinh);
                                );
                                Remove(tmpCTCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800)
                            )
                        Size: =11
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1012
                        ZIndex: =18

                    Btn_LuuCT_3 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                TxtTenCT_1.Text="",
                                Notify("Bắt buộc nhập tên chương trình", NotificationType.Error,800),
                                If(
                                    ThisItem.cr282_ma_chuong_trinh=maAdded,
                                    Patch(
                                        ' DL_SAN_PHAM_CT',
                                        {
                                            ID:ThisItem.cr282_ma_chuong_trinh,
                                            MA_CHUONG_TRINH:TxtMaCT_1.Text,
                                            TEN_CHUONG_TRINH:TxtTenCT_1.Text,
                                            MO_TA:TxtMoTa_1.Text,
                                            MA_SAN_PHAM:Txt_MaSP_1.Text,
                                            TRANG_THAI:0,
                                            'MA_ID_SO (cr282_ma_idso)':newIdMa
                                        }
                                    ),
                                    UpdateIf(
                                        ' DL_SAN_PHAM_CT',
                                        ID=ThisItem.cr282_ma_chuong_trinh,
                                        {
                                            TEN_CHUONG_TRINH:TxtTenCT_1.Text,
                                            MO_TA:TxtMoTa_1.Text,
                                            MA_SAN_PHAM:Txt_MaSP_1.Text,
                                            TRANG_THAI:0,'MA_ID_SO (cr282_ma_idso)':newIdMa
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpCTCollect,
                                    cr282_ma_chuong_trinh=ThisItem.cr282_ma_chuong_trinh,
                                    {
                                        cr282_ten_chuong_trinh:TxtTenCT_1.Text,
                                        cr282_mo_ta:TxtMoTa_1.Text,
                                        cr282_ma_san_pham:Txt_MaSP_1.Text,
                                        cr282_ma_idso:newIdMa,
                                        edited:0
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpCTCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                ' DL_SAN_PHAM_CT',
                                                "cr282_ma_chuong_trinh",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                        "cr282_ma_chuong_trinh",
                                        "cr282_ma_chuongtrinh",
                                        "cr282_ma_idso",
                                        "cr282_ten_chuong_trinh",
                                        "cr282_mo_ta",
                                        "cr282_ma_san_pham",
                                        "cr282_trang_thai",
                                        "edited"
                                    )
                                );
                                UpdateContext({
                                    maAdded:"",
                                    maUpdated:""
                                });
                            )
                        Size: =11
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =923
                        ZIndex: =19

                    Btn_HuyCT_3 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_ma_chuong_trinh=maAdded,
                                Remove(tmpCTCollect,ThisItem),
                                UpdateIf(
                                    tmpCTCollect,
                                    cr282_ma_chuong_trinh=ThisItem.cr282_ma_chuong_trinh,
                                    {
                                        edited:0
                                    }
                                )
                            );
                            UpdateContext({
                                maAdded:"",
                                maUpdated:""
                            });
                        Size: =11
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1014
                        ZIndex: =20

                    Btn_ChiTiet_1 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =Set(VarCT, TxtMaCT_1.Text);
                            Navigate(NhapchitietCT);
                        Size: =11
                        Text: ="Chi tiết"
                        Visible: =ThisItem.edited=0 && ThisItem.cr282_trang_thai=1
                        Width: =82
                        X: =1102
                        ZIndex: =21

                    TxtID_1 As text:
                        BorderColor: =RGBA(15, 108, 189, 1)
                        Default: =ThisItem.cr282_ma_chuongtrinh
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =false
                        Width: =119
                        ZIndex: =22

                BadgeCanvas1_17 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =35
                    Visible: =true
                    Width: =1199
                    X: =0
                    Y: =142
                    ZIndex: =2

                TextCanvas2_73 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Tên chương trình"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =274
                    X: =270
                    Y: =142
                    ZIndex: =3

                TextCanvas2_75 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Mô tả"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =365
                    X: =544
                    Y: =143
                    ZIndex: =4

                TextCanvas2_76 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =35
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =277
                    X: =921
                    Y: =142
                    ZIndex: =5

                Label_MaSP_1 As label:
                    Height: =30
                    Size: =11
                    Text: ="Mã sản phẩm"
                    Width: =122
                    X: =39
                    Y: =15
                    ZIndex: =6

                Label_TenSP_1 As label:
                    Height: =30
                    Size: =11
                    Text: ="Tên sản phẩm"
                    Width: =137
                    X: =475
                    Y: =15
                    ZIndex: =7

                Txt_MaSP_1 As text:
                    Default: =valMaSP
                    DisplayMode: =DisplayMode.Disabled
                    Height: =30
                    Size: =11
                    Width: =265
                    X: =161
                    Y: =15
                    ZIndex: =8

                Txt_TenSP_1 As text:
                    Default: =valTenSP
                    DisplayMode: =DisplayMode.Disabled
                    Height: =30
                    Size: =11
                    Width: =392
                    X: =612
                    Y: =15
                    ZIndex: =9

                TextCanvas2_74 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =39
                    Size: =14
                    Text: ="Mã chương trình"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =265
                    X: =5
                    Y: =141
                    ZIndex: =10

                ThemMoiCT_3 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |-
                        =If(
                            Or(
                                maAdded <> "",
                                maUpdated <> ""
                            ),
                            Select(IconTaiLaiCT_1),
                            UpdateContext(
                                {
                                    idMa: If(
                                        CountIf(
                                            ' DL_SAN_PHAM_CT',true
                                        ) = 0,
                                        1000,
                                        Value(
                                            Last(
                                                SortByColumns(
                                                    ' DL_SAN_PHAM_CT',
                                                    "cr282_ma_chuong_trinh",
                                                    SortOrder.Ascending
                                                )
                                            ).ID
                                        ) + 1
                                    )
                                }
                            );
                            UpdateContext(
                                {
                                    newIdMa: If(
                                        CountIf(
                                            ' DL_SAN_PHAM_CT',MA_SAN_PHAM=valMaSP
                                        ) = 0,
                                        1,
                                            Last(
                                                SortByColumns(
                                                    Filter(' DL_SAN_PHAM_CT',MA_SAN_PHAM=valMaSP),
                                                    "cr282_ma_chuong_trinh",
                                                    SortOrder.Ascending
                                                )
                                            ).'MA_ID_SO (cr282_ma_idso)'+ 1
                                    )
                                }
                            );
                            Set(MaCT,CountIf(' DL_SAN_PHAM_CT',MA_SAN_PHAM=valMaSP) + 1);
                            UpdateContext({
                                valMaCT:Concatenate(
                                        valMaSP,
                                        "_",
                                        If(
                                            newIdMa < 10,
                                            "00",
                                            If(
                                                newIdMa < 100 && newIdMa >= 10,
                                                "0",
                                                ""
                                            )
                                        ),
                                        Text(newIdMa)
                                    )
                            });
                            Collect(
                                tmpCTCollect,
                                {
                                    cr282_ma_chuong_trinh: Text(idMa),
                                    cr282_ma_idso:newIdMa,
                                    cr282_ma_chuongtrinh: valMaCT,
                                    cr282_ten_chuong_trinh: "",
                                    cr282_mo_ta: "",
                                    cr282_ma_san_pham: valMaSP,
                                    cr282_trang_thai: 0,
                                    edited: 1
                                }
                            );
                            UpdateContext({maAdded: Text(idMa)})
                        )
                    Size: =11
                    Text: ="Thêm mới"
                    Width: =96
                    X: =1
                    Y: =98
                    ZIndex: =11

                Label1_8 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="1. Chương trình (gói sản phẩm)"
                    Width: =1076
                    Y: =61
                    ZIndex: =13

                IconTaiLaiCT_1 As icon.Sync:
                    Color: =RGBA(83, 144, 164, 1)
                    Height: =36
                    Icon: =Icon.Sync
                    OnSelect: |-
                        =ClearCollect(
                            tmpCTCollect,
                            ShowColumns(
                                AddColumns(
                                    SortByColumns(
                                        ' DL_SAN_PHAM_CT',
                                        "cr282_ma_chuong_trinh",
                                        SortOrder.Ascending
                                    ),
                                    "edited",
                                    0
                                ),
                                "cr282_ma_chuong_trinh",
                                "cr282_ma_idso",
                                "cr282_ma_chuongtrinh",
                                "cr282_ten_chuong_trinh",
                                "cr282_mo_ta",
                                "cr282_ma_san_pham",
                                "cr282_trang_thai",
                                "edited"
                            )
                        );
                        UpdateContext({
                            maAdded:"",
                            maUpdated:""
                        });
                    Tooltip: ="Tải lại"
                    Visible: =false
                    Width: =32
                    X: =1167
                    Y: =91
                    ZIndex: =14

            "'2. Dieukhoanchung_2' As groupContainer.manualLayoutContainer":
                Height: =435
                Width: =1214
                X: =67
                Y: =529
                ZIndex: =2

                GalleryCT_6 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =303
                    Items: =tmpDKCCollect
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =40
                    Width: =1199
                    Y: =118
                    ZIndex: =1

                    Btn_SuaCT_6 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                Or(maAddedDKC<>"",maUpdatedDKC<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpDKCCollect,
                                    cr282_id_dkc=ThisItem.cr282_id_dkc,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdatedDKC:ThisItem.cr282_id_dkc
                                })
                            )
                        Size: =11
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1008
                        ZIndex: =17

                    Btn_XoaCT_6 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                Or(maAddedDKC<>"",maUpdatedDKC<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_DKCHUNGS);
                                RemoveIf(
                                    DL_SAN_PHAM_DKCHUNGS,
                                    id_dkc=ThisItem.cr282_id_dkc
                                );
                                Remove(tmpDKCCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800) 
                            )
                        Size: =11
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1099
                        ZIndex: =18

                    Btn_LuuCT_6 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |
                            =
                                If( ThisItem.cr282_id_dkc=maAddedDKC,
                                    Patch(
                                        DL_SAN_PHAM_DKCHUNGS,
                                        {
                                            id_dkc:ThisItem.cr282_id_dkc,
                                            ma_san_pham:valMaSP,
                                            nhom_thong_tin:CbxNhomTT_2.Selected.Value,
                                            thong_tin:CbxTTinDKCCT_1.Selected.MA_TTIN,
                                            noi_dung:TxtND_2.Text
                                        }
                                    ),
                                    UpdateIf(
                                         DL_SAN_PHAM_DKCHUNGS,
                                        id_dkc=ThisItem.cr282_id_dkc,
                                        {
                                            nhom_thong_tin:CbxNhomTT_2.Selected.Value,
                                            ma_san_pham:valMaSP,
                                            thong_tin:CbxTTinDKCCT_1.Selected.MA_TTIN,
                                            noi_dung:TxtND_2.Text
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpDKCCollect,
                                    cr282_id_dkc=ThisItem.cr282_id_dkc,
                                    {
                                        cr282_nhom_thong_tin:CbxNhomTT_2.Selected.Value,
                                        cr282_thong_tin:CbxTTinDKCCT_1.Selected.MA_TTIN,
                                        cr282_noi_dung:TxtND_2.Text,
                                        edited:0
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpDKCCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(DL_SAN_PHAM_DKCHUNGS,ma_san_pham=valMaSP),
                                                "cr282_id_dkc",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                        "cr282_id_dkc",
                                        "cr282_ma_san_pham",
                                        "cr282_nhom_thong_tin",
                                        "cr282_thong_tin",
                                        "cr282_noi_dung",
                                        "edited"
                                    )
                                );
                                UpdateContext({
                                    maAddedDKC:"",
                                    maUpdatedDKC:""
                                });
                        Size: =11
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1009
                        ZIndex: =19

                    Btn_HuyCT_6 As button:
                        FontWeight: =FontWeight.Bold
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_id_dkc=maAddedDKC,
                                Remove(tmpDKCCollect,ThisItem),
                                UpdateIf(
                                    tmpDKCCollect,
                                    cr282_id_dkc=ThisItem.cr282_id_dkc,
                                    {
                                        edited:0
                                    }
                                )
                            );
                              UpdateContext({
                                    maAddedDKC:"",
                                    maUpdatedDKC:""
                                });
                        Size: =11
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1099
                        ZIndex: =20

                    TxtID_DKC_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_id_dkc
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Visible: =false
                        Width: =134
                        X: =3
                        ZIndex: =21

                    TxtND_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_noi_dung
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        MaxLength: =1000
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =463
                        X: =532
                        ZIndex: =22

                    CbxNhomTT_2 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =If(IsBlank(ThisItem.cr282_nhom_thong_tin),Blank(),LookUp(dsNhomTT,Value=Value(ThisItem.cr282_nhom_thong_tin)))
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["Key"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn đơn vị tuổi"
                        IsSearchable: =false
                        Items: =SortByColumns(dsNhomTT,"Value",SortOrder.Ascending)
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["Key"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Size: =11
                        Width: =290
                        ZIndex: =24

                    CbxTTinDKCCT_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =Filter(DM_THONGTIN_DK_CHUNGS,MA_TTIN=ThisItem.cr282_thong_tin)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["cr282_ten_ttin"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =SortByColumns(Filter(DM_THONGTIN_DK_CHUNGS,MA_NHOM_TTIN=Text(CbxNhomTT_2.Selected.Value)),"cr282_ma_ttin",SortOrder.Ascending)
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_ttin"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Size: =11
                        Width: =242
                        X: =290
                        ZIndex: =25

                BadgeCanvas1_24 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =32
                    Visible: =true
                    Width: =1199
                    X: =0
                    Y: =86
                    ZIndex: =2

                TextCanvas2_98 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Thông tin"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =219
                    X: =290
                    Y: =84
                    ZIndex: =3

                TextCanvas2_101 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =37
                    Size: =14
                    Text: ="Nội dung"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =461
                    X: =540
                    Y: =84
                    ZIndex: =4

                TextCanvas2_100 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =173
                    X: =1001
                    Y: =86
                    ZIndex: =5

                TextCanvas2_99 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =32
                    Size: =14
                    Text: ="Nhóm thông tin"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =290
                    X: =0
                    Y: =86
                    ZIndex: =10

                ThemMoiCT_6 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =If( Or(maAddedDKC<>"",maUpdatedDKC<>""),
                            Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                            UpdateContext({
                                idMa:If(
                                    CountRows(tmpDKCCollect) = 0,
                                    Max(DL_SAN_PHAM_DKCHUNGS, id_dkc) + 1,
                                    Max(DL_SAN_PHAM_DKCHUNGS, id_dkc) + 1
                                )
                            });
                            Collect(
                                tmpDKCCollect,
                                {
                                    cr282_id_dkc:Text(idMa),
                                    cr282_ma_san_pham:valMaSP,
                                    cr282_nhom_thong_tin:"",
                                    cr282_thong_tin:"",
                                    cr282_noi_dung:"",
                                    edited:1
                                }
                            );
                          UpdateContext({maAddedDKC:Text(idMa)})
                        )
                    Size: =11
                    Text: ="Thêm mới"
                    Width: =96
                    Y: =41
                    ZIndex: =11

                Label1_13 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="2. Điều khoản chung (Trừ quyền lợi, phí)"
                    Width: =1076
                    Y: =4
                    ZIndex: =13

            "'3.1 DmNhomQuyenloi' As groupContainer.manualLayoutContainer":
                Height: =488
                Width: =1216
                X: =67
                Y: =964
                ZIndex: =6

                GalleryNQLSP_1 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =339
                    Items: =SortByColumns(tmpNQLSPCollect,"cr282_ma_dl",SortOrder.Ascending)
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =41
                    Width: =1203
                    Y: =149
                    ZIndex: =1

                    CbxNhomTPNQLSP_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =LookUp(["Nhóm chính","Nhóm bổ sung","Nhóm thai sản","Nha khoa/Chăm sóc răng","Ngoại trú","Nhóm thương tật, tử vong"],Value=ThisItem.cr282_ma_nhom_tinhphi)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["Value"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =["Nhóm chính","Nhóm bổ sung","Nhóm thai sản","Nha khoa/Chăm sóc răng","Ngoại trú","Nhóm thương tật, tử vong"]
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["Value"]
                        SearchItems: =Search(["Nhóm chính","Nhóm bổ sung","Nhóm thai sản","Nha khoa/Chăm sóc răng","Ngoại trú","Nhóm thương tật, tử vong"],CbxNhomTPNQLSP_1.SearchText,"Value")
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Size: =11
                        Width: =139
                        X: =457
                        ZIndex: =19

                    CbxNhomQLNQLSP_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =LookUp(DM_NHOM_QUYENLOIS,MA_NHOM_QL=ThisItem.cr282_ma_nhom_ql)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["cr282_ten_nhom_ql"]
                        DisplayMode: =If(ThisItem.cr282_ma_dl=maAddedNQLSP,DisplayMode.Edit,DisplayMode.Disabled) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =SortByColumns(DM_NHOM_QUYENLOIS,"cr282_ma_nhom_ql",SortOrder.Ascending)
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_nhom_ql"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Size: =11
                        Width: =160
                        ZIndex: =22

                    CbxLoaiNQLSP_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =LookUp(["Chính","Bổ sung"],Value=ThisItem.cr282_loai)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["Value"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =["Chính","Bổ sung"]
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["Value"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Size: =11
                        Width: =124
                        X: =160
                        ZIndex: =24

                    TextTenHTNQLSP_1 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_ten_hien_thi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit)
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =173
                        X: =284
                        ZIndex: =25

                    CbxPVDLNQLSP_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =LookUp(DM_PHAMVI_DIALYS,MA_PHAMVI=ThisItem.cr282_phamvi_dialy)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["cr282_ten_phamvi"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =SortByColumns(DM_PHAMVI_DIALYS,"cr282_ma_phamvi",SortOrder.Ascending)
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_phamvi"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Size: =11
                        Width: =141
                        X: =596
                        ZIndex: =26

                    CbxCTADNQLSP_1 As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =Filter(' DL_SAN_PHAM_CT',MA_CHUONG_TRINH in Split(ThisItem.cr282_chuongtrinh_apdung,"|"))
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["cr282_ten_chuong_trinh"]
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =Filter(' DL_SAN_PHAM_CT',MA_SAN_PHAM=valMaSP)
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_chuong_trinh"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        Size: =11
                        Tooltip: =Concat(CbxCTADNQLSP_1.SelectedItems,TEN_CHUONG_TRINH,", ")
                        Visible: =ThisItem.edited=1
                        Width: =186
                        X: =737
                        ZIndex: =27

                    TextCTADNQLSP As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =Concat(CbxCTADNQLSP_1.SelectedItems,TEN_CHUONG_TRINH,", ")
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Visible: =ThisItem.edited=0
                        Width: =186
                        X: =737
                        ZIndex: =34

                    BtnLuuNQLSP As button:
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        OnSelect: |
                            =If(
                                IsBlank(CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL),
                                Notify("Bắt buộc nhập nhóm tính phí", NotificationType.Error,800),
                                IsBlank(CbxLoaiNQLSP_1.Selected.Value),
                                Notify("Bắt buộc nhập loại", NotificationType.Error,800),
                                IsBlank(CbxNhomTPNQLSP_1.Selected.Value),
                                Notify("Bắt buộc nhập nhóm tính phí", NotificationType.Error,800),
                                IsBlank(CbxCTADNQLSP_1.Selected.MA_CHUONG_TRINH),
                                Notify("Bắt buộc nhập chương trình áp dụng", NotificationType.Error,800),
                                CountIf(tmpNQLSPCollect,cr282_ma_nhom_ql=CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL && cr282_ma_dl<>ThisItem.cr282_ma_dl)>0,
                                Notify("Đã tồn tại nhóm quyền lợi này trong sản phẩm", NotificationType.Error,800),
                                If(
                                    ThisItem.cr282_ma_dl=maAddedNQLSP,
                                    Patch(
                                        DL_SAN_PHAM_NHOMQLS,
                                        {
                                            MA_DL:ThisItem.cr282_ma_dl,
                                            CHUONGTRINH_APDUNG:Concat(CbxCTADNQLSP_1.SelectedItems,MA_CHUONG_TRINH,"|"),
                                            LOAI:CbxLoaiNQLSP_1.Selected.Value,
                                            MA_NHOM_QL:CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL,
                                            PHAMVI_DIALY:CbxPVDLNQLSP_1.Selected.MA_PHAMVI,
                                            MA_NHOM_TINHPHI:CbxNhomTPNQLSP_1.Selected.Value,
                                            MA_SP:valMaSP,
                                            TEN_HIEN_THI:If(IsBlank(TextTenHTNQLSP_1.Text),LookUp(DM_NHOM_QUYENLOIS,MA_NHOM_QL=CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL,TEN_NHOM_QL),TextTenHTNQLSP_1.Text)
                                        }
                                    ),
                                    UpdateIf(
                                        DL_SAN_PHAM_NHOMQLS,
                                        MA_DL=ThisItem.cr282_ma_dl,
                                        {
                                            CHUONGTRINH_APDUNG:Concat(CbxCTADNQLSP_1.SelectedItems,MA_CHUONG_TRINH,"|"),
                                            LOAI:CbxLoaiNQLSP_1.Selected.Value,
                                            PHAMVI_DIALY:CbxPVDLNQLSP_1.Selected.MA_PHAMVI,
                                            MA_NHOM_TINHPHI:CbxNhomTPNQLSP_1.Selected.Value,
                                            TEN_HIEN_THI:If(IsBlank(TextTenHTNQLSP_1.Text),LookUp(DM_NHOM_QUYENLOIS,MA_NHOM_QL=CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL,TEN_NHOM_QL),TextTenHTNQLSP_1.Text)
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpNQLSPCollect,
                                    cr282_ma_dl=ThisItem.cr282_ma_dl,
                                    {
                                        cr282_chuongtrinh_apdung:Concat(CbxCTADNQLSP_1.SelectedItems,MA_CHUONG_TRINH,"|"),
                                        cr282_loai:CbxLoaiNQLSP_1.Selected.Value,
                                        cr282_ma_nhom_ql:CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL,
                                        cr282_phamvi_dialy:CbxPVDLNQLSP_1.Selected.MA_PHAMVI,
                                        cr282_ma_nhom_tinhphi:CbxNhomTPNQLSP_1.Selected.Value,
                                        cr282_ten_hien_thi:If(IsBlank(TextTenHTNQLSP_1.Text),LookUp(DM_NHOM_QUYENLOIS,MA_NHOM_QL=CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL,TEN_NHOM_QL),TextTenHTNQLSP_1.Text),
                                        edited:0
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpNQLSPCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(
                                                    DL_SAN_PHAM_NHOMQLS,
                                                    MA_SP=valMaSP
                                                ),
                                                "cr282_ma_dl",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                        "cr282_ma_dl",
                                        "cr282_chuongtrinh_apdung",
                                        "cr282_loai",
                                        "cr282_ma_nhom_ql",
                                        "cr282_ma_nhom_tinhphi",
                                        "cr282_phamvi_dialy",
                                        "cr282_ten_hien_thi",
                                        "edited"
                                    )
                                );
                                UpdateContext({
                                    maAddedNQLSP:"",
                                    maUpdatedNQLSP:""
                                });
                            )
                        Size: =11
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =940
                        Y: =5
                        ZIndex: =35

                    BtnSuaNQLSP As button:
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        OnSelect: |-
                            =If(
                                Or(maAddedNQLSP<>"",maUpdatedNQLSP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpNQLSPCollect,
                                    cr282_ma_dl=ThisItem.cr282_ma_dl,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdatedNQLSP:ThisItem.cr282_ma_dl
                                })
                            )
                        Size: =11
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =940
                        Y: =5
                        ZIndex: =36

                    BtnXoaNQLSP As button:
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        OnSelect: |-
                            =If(
                                Or(maAddedNQLSP<>"",maUpdatedNQLSP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_QLCT_CHONS);
                                RemoveIf(
                                    DL_SAN_PHAM_QLCT_CHONS,
                                    MA_NHOMQL_SP=ThisItem.cr282_ma_dl
                                );
                                ClearCollect(
                                    tmpQLCTTBCollect,
                                    ShowColumns(
                                        SortByColumns(
                                            Filter(
                                                DL_SAN_PHAM_QLCT_CHONS,
                                                MA_SAN_PHAM=valMaSP
                                            ),
                                            "cr282_ma_ql_chitiet",
                                            SortOrder.Ascending
                                        ),
                                        "cr282_ma_ql_chitiet",
                                        "cr282_ma_nhomql_sp",
                                        "cr282_ten_hien_thi",
                                        "cr282_ma_nhom_ql"
                                    )
                                );
                                Refresh(DL_SAN_PHAM_NHOMQLS);
                                RemoveIf(
                                    DL_SAN_PHAM_NHOMQLS,
                                    MA_DL=ThisItem.cr282_ma_dl
                                );
                                Remove(tmpNQLSPCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800)
                            )
                        Size: =11
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1018
                        Y: =5
                        ZIndex: =37

                    BtnHuyNQLSP As button:
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_ma_dl=maAddedNQLSP,
                                Remove(tmpNQLSPCollect,ThisItem),
                                UpdateIf(
                                    tmpNQLSPCollect,
                                    cr282_ma_dl=ThisItem.cr282_ma_dl,
                                    {
                                        edited:0
                                    }
                                )
                            );
                            UpdateContext({
                                maAddedNQLSP:"",
                                maUpdatedNQLSP:""
                            });
                        Size: =11
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1018
                        Y: =5
                        ZIndex: =38

                    BtnCTNQLSP As button:
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        OnSelect: |-
                            =If(
                                Or(maAddedNQLSP<>"",maUpdatedNQLSP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Navigate(DLSanPhamQLCT);
                                Set(maDLNhomQLFwd,ThisItem.cr282_ma_dl);
                                Set(maNQLFwd,CbxNhomQLNQLSP_1.Selected.MA_NHOM_QL);
                                Set(maSPFwd,valMaSP)
                            )
                        Size: =11
                        Text: ="Chi tiết"
                        Visible: =ThisItem.edited=0
                        Width: =85
                        X: =1096
                        Y: =5
                        ZIndex: =39

                BadgeCanvas1_19 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Width: =1203
                    X: =0
                    Y: =111
                    ZIndex: =2

                TextCanvas2_77 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Nhóm quyền lợi"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =165
                    X: =0
                    Y: =111
                    ZIndex: =4

                TextCanvas2_78 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Tên hiển thị"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =160
                    X: =295
                    Y: =111
                    ZIndex: =5

                TextCanvas2_88 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =40
                    Size: =14
                    Text: ="Chương trình áp dụng"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =171
                    X: =748
                    Y: =110
                    ZIndex: =6

                TextCanvas2_87 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Nhóm tính phí"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =128
                    X: =465
                    Y: =111
                    ZIndex: =15

                TextCanvas2_80 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Loại"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =119
                    X: =165
                    Y: =111
                    ZIndex: =17

                TextCanvas2_79 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Phạm vi địa lý"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =142
                    X: =598
                    Y: =111
                    ZIndex: =18

                TextCanvas2_170 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =167
                    X: =966
                    Y: =112
                    ZIndex: =21

                Button4 As button:
                    Height: =30
                    OnSelect: |-
                        =ClearCollect(
                            tmpNQLSPCollect,
                            ShowColumns(
                                AddColumns(
                                    SortByColumns(
                                        Filter(
                                            DL_SAN_PHAM_NHOMQLS,
                                            MA_SP=valMaSP
                                        ),
                                        "cr282_ma_dl",
                                        SortOrder.Ascending
                                    ),
                                    "edited",
                                    0
                                ),
                                "cr282_ma_dl",
                                "cr282_chuongtrinh_apdung",
                                "cr282_loai",
                                "cr282_ma_nhom_ql",
                                "cr282_ma_nhom_tinhphi",
                                "cr282_phamvi_dialy",
                                "cr282_ten_hien_thi",
                                "edited"
                            )
                        );
                        UpdateContext({
                            maAddedNQLSP:"",
                            maUpdatedNQLSP:""
                        });
                    Size: =11
                    Text: ="Tải lại"
                    Visible: =false
                    Width: =96
                    X: =4
                    Y: =69
                    ZIndex: =23

                Button5 As button:
                    DisplayMode: =If(And(maAddedNQLSP="",maUpdatedNQLSP=""), DisplayMode.Edit,DisplayMode.Disabled)
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =If(
                            Or(maAddedNQLSP<>"",maUpdatedNQLSP<>""),
                            Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                            UpdateContext({
                                idMaNQLSP:If(
                                    CountIf(DL_SAN_PHAM_NHOMQLS,true)=0,
                                    1000,
                                    Value(Last(SortByColumns(DL_SAN_PHAM_NHOMQLS,"cr282_ma_dl",SortOrder.Ascending)).MA_DL)+1
                                )
                            });
                            Collect(
                                tmpNQLSPCollect,
                                {
                                    cr282_ma_dl:Text(idMaNQLSP),
                                    cr282_chuongtrinh_apdung:Blank(),
                                    cr282_loai:Blank(),
                                    cr282_ma_nhom_ql:Blank(),
                                    cr282_ma_nhom_tinhphi:Blank(),
                                    cr282_phamvi_dialy:Blank(),
                                    cr282_ten_hien_thi:Blank(),
                                    edited:1
                                }
                            );
                            UpdateContext({maAddedNQLSP:Text(idMaNQLSP)})
                        )
                    Size: =11
                    Text: ="Thêm mới"
                    Width: =96
                    Y: =60
                    ZIndex: =24

                Label1_14 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="3. Quyền lợi sản phẩm"
                    Width: =1076
                    ZIndex: =25

                Label1_15 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="3.1 Danh mục nhóm quyền lợi"
                    Width: =1076
                    Y: =30
                    ZIndex: =26

            "'3.2 Danhmucqlct' As groupContainer.manualLayoutContainer":
                Height: =524
                Width: =1214
                X: =67
                Y: =1452
                ZIndex: =7

                GalleryYTAH_2 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =402
                    Items: =SortByColumns(tmpQLCTTBCollect,"cr282_ma_ql_chitiet",SortOrder.Ascending)
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =41
                    Width: =1205
                    Y: =70
                    ZIndex: =1

                    TextTenYTAH_4 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =LookUp(DM_NHOM_QUYENLOIS,MA_NHOM_QL=ThisItem.cr282_ma_nhom_ql,TEN_NHOM_QL)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =250
                        X: =163
                        ZIndex: =9

                    TextTenYTAH_5 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =LookUp(DM_QUYENLOI_CHITIETS,MA_QL_CHITIET=ThisItem.cr282_ma_ql_chitiet,TEN_QL_CHITIET)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =418
                        X: =413
                        ZIndex: =10

                    TextTenYTAH_6 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_ten_hien_thi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =357
                        X: =831
                        ZIndex: =11

                    TextMaQLCTQLCTTB As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_ma_ql_chitiet
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Size: =11
                        Width: =163
                        ZIndex: =12

                BadgeCanvas1_21 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Width: =1205
                    X: =0
                    Y: =32
                    ZIndex: =2

                TextCanvas2_89 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Nhóm quyền lợi"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =250
                    X: =165
                    Y: =32
                    ZIndex: =3

                TextCanvas2_90 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Tên quyền lợi"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =423
                    X: =415
                    Y: =32
                    ZIndex: =5

                TextCanvas2_91 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Tên hiển thị"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =354
                    X: =838
                    Y: =32
                    ZIndex: =6

                "TextFilterQLCTTB_1 As 'Text input'":
                    BasePaletteColor: =
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =43
                    OnChange: =
                    Placeholder: ="Nhập giá trị lọc"
                    Visible: =loaiFilterQLCTTB=0
                    Width: =204
                    X: =556
                    Y: =33
                    ZIndex: =15

                CbxFilterQLCTTB_1 As Combobox.pcfdataset:
                    DefaultSelectedItems: =Filter(["Nhóm quyền lợi", "Tên quyền lợi"],Value="Nhóm quyền lợi")
                    DisplayMode: =DisplayMode.Edit
                    Height: =43
                    InputTextPlaceholder: ="Chọn chỉ tiêu lọc"
                    Items: =["Nhóm quyền lợi", "Tên quyền lợi"]
                    OnChange: |-
                        =If(
                            CbxFilterQLCTTB_1.Selected.Value="Nhóm quyền lợi",
                            UpdateContext({loaiFilterQLCTTB:1}),
                            UpdateContext({loaiFilterQLCTTB:0})
                        );
                        Reset(TextFilterQLCTTB_1);Reset(CbxFilterValueQLCTTB_1)
                    Visible: =false
                    Width: =188
                    X: =358
                    Y: =33
                    ZIndex: =17

                CbxFilterValueQLCTTB_1 As Combobox.pcfdataset:
                    DisplayMode: =DisplayMode.Edit
                    Height: =43
                    InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                    Items: =SortByColumns(DM_NHOM_QUYENLOIS,"cr282_ma_nhom_ql",SortOrder.Ascending)
                    Visible: =false
                    Width: =204
                    X: =556
                    Y: =33
                    ZIndex: =18

                    TEN_NHOM_QL2_1 As pcfDataField.textualColumn:
                        FieldDisplayName: ="TEN_NHOM_QL"
                        FieldName: ="cr282_ten_nhom_ql"
                        FieldType: ="s"
                        FieldVariantName: ="textualColumn"
                        Order: =1
                        ZIndex: =19

                    MA_NHOM_QL2_1 As pcfDataField.textualColumn:
                        FieldDisplayName: ="MA_NHOM_QL"
                        FieldName: ="cr282_ma_nhom_ql"
                        FieldType: ="s"
                        FieldVariantName: ="textualColumn"
                        Order: =2
                        ZIndex: =20

                TextCanvas2_168 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =38
                    Size: =14
                    Text: ="Mã quyền lợi"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =165
                    X: =0
                    Y: =32
                    ZIndex: =19

                Button5_1 As button:
                    DisplayMode: =If(Or(maAdded<>"",maUpdated<>""),DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =30
                    OnSelect: |-
                        =ClearCollect(
                            filterNQLSPCollect,
                            RenameColumns(
                                Filter(
                                    DM_QUYENLOI_CHITIETS,
                                    !IsBlank(Find(Lower(TextFilterQLCTTB_1.Value),Lower(TEN_QL_CHITIET)))
                                ),
                                "cr282_ma_ql_chitiet",
                                "MA_QLCT"
                            )
                        );
                        ClearCollect(
                            filterNQLSPCollectNQL,
                            RenameColumns(
                                Filter(DM_QUYENLOI_CHITIETS,MA_NHOM_QL=CbxFilterValueQLCTTB_1.Selected.MA_NHOM_QL),
                                "cr282_ma_ql_chitiet",
                                "MA_QLCT"
                            )
                        );
                        ClearCollect(
                            tmpQLCTTBCollect,
                            ShowColumns(
                                SortByColumns(
                                    Filter(
                                        DL_SAN_PHAM_QLCT_CHONS,
                                        And(
                                            MA_SAN_PHAM=valMaSP,
                                            Or(
                                                And(
                                                    TextFilterQLCTTB_1.Value="",
                                                    loaiFilterQLCTTB=0
                                                ),
                                                And(
                                                    IsBlank(CbxFilterValueQLCTTB_1.Selected.MA_NHOM_QL),
                                                    loaiFilterQLCTTB=1
                                                ),
                                                And(
                                                    CbxFilterQLCTTB_1.Selected.Value="Nhóm quyền lợi",
                                                    !IsBlank(LookUp(filterNQLSPCollectNQL,MA_QLCT=MA_QL_CHITIET))
                                                ),
                                                And(
                                                    CbxFilterQLCTTB_1.Selected.Value="Tên quyền lợi",
                                                    !IsBlank(LookUp(filterNQLSPCollect,MA_QLCT=MA_QL_CHITIET))
                                                )
                                            )
                                        )
                                    ),
                                    "cr282_ma_ql_chitiet",
                                    SortOrder.Ascending
                                ),
                                "cr282_ma_ql_chitiet",
                                "cr282_ma_nhomql_sp",
                                "cr282_ten_hien_thi",
                                "cr282_ma_nhom_ql"
                            )
                        )
                    Size: =11
                    Text: ="Tra cứu"
                    Visible: =false
                    Width: =96
                    X: =770
                    Y: =40
                    ZIndex: =21

                Label1_16 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    Size: =11
                    Text: ="3.2 Danh sách quyền lợi chi tiết"
                    Width: =1076
                    Y: =2
                    ZIndex: =22

            "'3.3 Thongtinqlkhac' As groupContainer.manualLayoutContainer":
                Height: =322
                Width: =1289
                X: =67
                Y: =1976
                ZIndex: =8

                ContainerQLK_1 As groupContainer.manualLayoutContainer:
                    Height: =322
                    Width: =1214
                    ZIndex: =1

                    GalleryQLK_1 As gallery.galleryVertical:
                        DelayItemLoading: =true
                        Height: =196
                        Items: =SortByColumns(tmpQLKCollect,"cr282_ma_dl",SortOrder.Ascending)
                        Layout: =Layout.Vertical
                        LoadingSpinner: =LoadingSpinner.Data
                        NavigationStep: =0
                        TemplateSize: =29
                        Width: =1204
                        Y: =126
                        ZIndex: =1

                        CbxNhomQLQLK_1 As combobox:
                            BorderColor: =RGBA(72, 163, 62, 1)
                            ChevronBackground: =RGBA(255, 255, 255, 1)
                            ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                            ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                            ChevronFill: =RGBA(72, 163, 62, 1)
                            ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                            ChevronHoverFill: =RGBA(72, 163, 62, 1)
                            DefaultSelectedItems: =Filter(DM_NHOM_QUYENLOIS,MA_NHOM_QL=ThisItem.cr282_ma_nhom_ql)
                            DisabledBorderColor: =RGBA(180, 214, 250, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(255, 255, 255, 1)
                            DisplayFields: =["cr282_ten_nhom_ql"]
                            DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                            Height: =28
                            HoverBorderColor: =RGBA(9, 33, 98, 1)
                            HoverFill: =RGBA(180, 214, 250, 1)
                            InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                            IsSearchable: =false
                            Items: =SortByColumns(DM_NHOM_QUYENLOIS,"cr282_ma_nhom_ql",SortOrder.Ascending)
                            OnSelect: =Select(Parent)
                            PressedColor: =RGBA(72, 163, 62, 1)
                            PressedFill: =RGBA(255, 255, 255, 1)
                            SearchFields: =["cr282_ten_nhom_ql"]
                            SearchItems: =[]
                            SelectionColor: =RGBA(0, 0, 0, 1)
                            SelectionFill: =RGBA(214, 221, 224, 1)
                            SelectMultiple: =false
                            Size: =11
                            Width: =285
                            ZIndex: =22

                        TextMoTaQLK_1 As text:
                            BorderColor: =RGBA(72, 163, 62, 1)
                            Default: =ThisItem.cr282_mo_ta
                            DisabledBorderColor: =RGBA(180, 214, 250, 1)
                            DisabledColor: =RGBA(0, 0, 0, 1)
                            DisabledFill: =RGBA(255, 255, 255, 1)
                            DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                            Height: =28
                            MaxLength: =1000
                            Mode: =TextMode.MultiLine
                            OnChange: =
                            OnSelect: =Select(Parent)
                            Size: =11
                            Width: =721
                            X: =285
                            ZIndex: =23

                        BtnLuuQLKSP As button:
                            FontWeight: =FontWeight.Bold
                            Height: =26
                            OnSelect: |
                                =If(
                                    IsBlank(CbxNhomQLQLK_1.Selected.MA_NHOM_QL),
                                    Notify("Bắt buộc nhập nhóm quyền lợi", NotificationType.Error,800),
                                    IsBlank(TextMoTaQLK_1.Text),
                                    Notify("Bắt buộc nhập mô tả", NotificationType.Error,800),
                                    !IsBlank(LookUp(DL_SAN_PHAM_QL_KHACS,MA_NHOM_QL=CbxNhomQLQLK_1.Selected.MA_NHOM_QL && MA_SP=ThisItem.cr282_ma_sp)),
                                    Notify("Đã tồn tại dữ liệu gắn với nhóm quyền lợi này", NotificationType.Error,800),
                                    If(
                                        ThisItem.cr282_ma_dl=maAddedQLK,
                                        Patch(
                                            DL_SAN_PHAM_QL_KHACS,
                                            {
                                                MA_DL:ThisItem.cr282_ma_dl,
                                                MA_NHOM_QL:CbxNhomQLQLK_1.Selected.MA_NHOM_QL,
                                                MA_SP:valMaSP,
                                                MO_TA:TextMoTaQLK_1.Text
                                            }
                                        ),
                                        UpdateIf(
                                            DL_SAN_PHAM_QL_KHACS,
                                            MA_DL=ThisItem.cr282_ma_dl,
                                            {
                                                MA_NHOM_QL:CbxNhomQLQLK_1.Selected.MA_NHOM_QL,
                                                MO_TA:TextMoTaQLK_1.Text
                                            }
                                        )
                                    );
                                    UpdateIf(
                                        tmpQLKCollect,
                                        cr282_ma_dl=ThisItem.cr282_ma_dl,
                                        {
                                            cr282_ma_dl:ThisItem.cr282_ma_dl,
                                            cr282_ma_nhom_ql:CbxNhomQLQLK_1.Selected.MA_NHOM_QL,
                                            cr282_mo_ta:TextMoTaQLK_1.Text,
                                            edited:0
                                        }
                                    );
                                    Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                    ClearCollect(
                                        tmpQLKCollect,
                                        ShowColumns(
                                            AddColumns(
                                                SortByColumns(
                                                    Filter(
                                                        DL_SAN_PHAM_QL_KHACS,
                                                        MA_SP=valMaSP
                                                    ),
                                                    "cr282_ma_dl",
                                                    SortOrder.Ascending
                                                ),
                                                "edited",
                                                0
                                            ),
                                            "cr282_ma_dl",
                                            "cr282_ma_nhom_ql",
                                            "cr282_mo_ta",
                                            "edited"
                                        )
                                    );
                                    UpdateContext({
                                        maAddedQLK:"",
                                        maUpdatedQLK:""
                                    });
                                    Reset(CbxFilterQLK_1); Reset(CbxFilterValueQLK_1)
                                )
                            Size: =11
                            Text: ="Lưu"
                            Visible: =ThisItem.edited=1
                            Width: =75
                            X: =1019
                            Y: =2
                            ZIndex: =28

                        BtnSuaQLKSP As button:
                            FontWeight: =FontWeight.Bold
                            Height: =26
                            OnSelect: |-
                                =If(
                                    Or(maAddedQLK<>"",maUpdatedQLK<>""),
                                    Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                    UpdateIf(
                                        tmpQLKCollect,
                                        cr282_ma_dl=ThisItem.cr282_ma_dl,
                                        {
                                            edited:1
                                        }
                                    );
                                    UpdateContext({
                                        maUpdatedQLK:ThisItem.cr282_ma_dl
                                    })
                                )
                            Size: =11
                            Text: ="Sửa"
                            Visible: =ThisItem.edited=0
                            Width: =75
                            X: =1019
                            Y: =2
                            ZIndex: =29

                        BtnXoaQLKSP As button:
                            FontWeight: =FontWeight.Bold
                            Height: =26
                            OnSelect: |-
                                =If(
                                    Or(maAddedQLK<>"",maUpdatedQLK<>""),
                                    Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                    Refresh(DL_SAN_PHAM_QL_KHACS);
                                    RemoveIf(
                                        DL_SAN_PHAM_QL_KHACS,
                                        MA_DL=ThisItem.cr282_ma_dl
                                    );
                                    Remove(tmpQLKCollect,ThisItem);
                                    Notify("Xóa dữ liệu thành công", NotificationType.Success,800)
                                )
                            Size: =11
                            Text: ="Xóa"
                            Visible: =ThisItem.edited=0
                            Width: =75
                            X: =1108
                            Y: =2
                            ZIndex: =30

                        BtnHuyQLKSP As button:
                            FontWeight: =FontWeight.Bold
                            Height: =26
                            OnSelect: |-
                                =If(
                                    ThisItem.cr282_ma_dl=maAddedQLK,
                                    Remove(tmpQLKCollect,ThisItem),
                                    UpdateIf(
                                        tmpQLKCollect,
                                        cr282_ma_dl=ThisItem.cr282_ma_dl,
                                        {
                                            edited:0
                                        }
                                    )
                                );
                                UpdateContext({
                                    maAddedQLK:"",
                                    maUpdatedQLK:""
                                });
                            Size: =11
                            Text: ="Hủy"
                            Visible: =ThisItem.edited=1
                            Width: =75
                            X: =1108
                            Y: =2
                            ZIndex: =31

                    BadgeCanvas1_22 As Badge:
                        BasePaletteColor: =
                        Content: =""
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        Height: =38
                        Width: =1199
                        X: =5
                        Y: =88
                        ZIndex: =2

                    TextCanvas2_92 As Text:
                        Align: ='TextCanvas.Align'.Center
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        Height: =38
                        Size: =14
                        Text: ="Nhóm quyền lợi"
                        Weight: ='TextCanvas.Weight'.Bold
                        Width: =280
                        X: =5
                        Y: =88
                        ZIndex: =4

                    TextCanvas2_93 As Text:
                        Align: ='TextCanvas.Align'.Center
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        Height: =38
                        Size: =14
                        Text: ="Mô tả"
                        Weight: ='TextCanvas.Weight'.Bold
                        Width: =703
                        X: =305
                        Y: =88
                        ZIndex: =5

                    CbxFilterQLK_1 As Combobox.pcfdataset:
                        DefaultSelectedItems: =Filter(["Nhóm quyền lợi"],Value="Nhóm quyền lợi")
                        DisplayMode: =DisplayMode.Edit
                        Height: =43
                        InputTextPlaceholder: ="Chọn chỉ tiêu lọc"
                        Items: =["Nhóm quyền lợi"]
                        OnChange: =
                        Visible: =false
                        Width: =152
                        X: =348
                        Y: =34
                        ZIndex: =11

                    CbxFilterValueQLK_1 As Combobox.pcfdataset:
                        DisplayMode: =DisplayMode.Edit
                        Height: =43
                        InputTextPlaceholder: |+
                            ="Chọn nhóm quyền lợi"
                            
                            
                        Items: |+
                            =SortByColumns(DM_NHOM_QUYENLOIS,"cr282_ma_nhom_ql",SortOrder.Ascending)
                            
                        Visible: =false
                        Width: =204
                        X: =509
                        Y: =34
                        ZIndex: =13

                        MA_NHOM_QL1_7 As pcfDataField.textualColumn:
                            FieldDisplayName: ="MA_NHOM_QL"
                            FieldName: ="cr282_ma_nhom_ql"
                            FieldType: ="s"
                            FieldVariantName: ="textualColumn"
                            Order: =2
                            ZIndex: =20

                        TEN_NHOM_QL1_7 As pcfDataField.textualColumn:
                            FieldDisplayName: ="TEN_NHOM_QL"
                            FieldName: ="cr282_ten_nhom_ql"
                            FieldType: ="s"
                            FieldVariantName: ="textualColumn"
                            Order: =1
                            ZIndex: =21

                        GHI_CHU1_7 As pcfDataField.textualColumn:
                            FieldDisplayName: ="GHI_CHU"
                            FieldName: ="cr282_ghi_chu"
                            FieldType: ="s"
                            FieldVariantName: ="textualColumn"
                            Order: =3
                            ZIndex: =22

                    TextCanvas2_169 As Text:
                        Align: ='TextCanvas.Align'.Center
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        Height: =38
                        Size: =14
                        Text: ="Thao tác"
                        Weight: ='TextCanvas.Weight'.Bold
                        Width: =196
                        X: =1008
                        Y: =88
                        ZIndex: =18

                    Button5_2 As button:
                        DisplayMode: =If(Or(maAddedQLK<>"",maUpdatedQLK<>""),DisplayMode.Disabled,DisplayMode.Edit)
                        Height: =30
                        OnSelect: |-
                            =ClearCollect(
                                tmpQLKCollect,
                                ShowColumns(
                                    AddColumns(
                                        SortByColumns(
                                            Filter(
                                                Filter(
                                                    DL_SAN_PHAM_QL_KHACS,
                                                    MA_SP=valMaSP
                                                ),
                                                Or(
                                                    IsBlank(CbxFilterValueQLK_1.Selected.MA_NHOM_QL),
                                                    MA_NHOM_QL=CbxFilterValueQLK_1.Selected.MA_NHOM_QL
                                                )
                                            ),
                                            "cr282_ma_dl",
                                            SortOrder.Ascending
                                        ),
                                        "edited",
                                        0
                                    ),
                                    "cr282_ma_dl",
                                    "cr282_ma_sp",
                                    "cr282_ma_nhom_ql",
                                    "cr282_mo_ta",
                                    "edited"
                                )
                            );
                        Size: =11
                        Text: ="Tra cứu"
                        Visible: =false
                        Width: =96
                        X: =724
                        Y: =40
                        ZIndex: =19

                    Button4_1 As button:
                        Height: =30
                        OnSelect: |-
                            =ClearCollect(
                                tmpQLKCollect,
                                ShowColumns(
                                    AddColumns(
                                        SortByColumns(
                                            Filter(
                                                DL_SAN_PHAM_QL_KHACS,
                                                MA_SP=valMaSP
                                            ),
                                            "cr282_ma_dl",
                                            SortOrder.Ascending
                                        ),
                                        "edited",
                                        0
                                    ),
                                    "cr282_ma_dl",
                                    "cr282_ma_nhom_ql",
                                    "cr282_mo_ta",
                                    "edited"
                                )
                            );
                            UpdateContext({
                                maAddedQLK:"",
                                maUpdatedQLK:"",
                                showConfirmQLK:0
                            });
                            Reset(CbxFilterQLK_1);Reset(CbxFilterValueQLK_1)
                        Size: =11
                        Text: ="Tải lại"
                        Visible: =false
                        Width: =96
                        X: =5
                        Y: =40
                        ZIndex: =20

                    Button5_3 As button:
                        DisplayMode: =If(And(maAddedQLK="",maUpdatedQLK=""), DisplayMode.Edit,DisplayMode.Disabled)
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        OnSelect: |
                            =If(
                                Or(maAddedQLK<>"",maUpdatedQLK<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_QL_KHACS);
                                UpdateContext({
                                    idMaQLK:If(
                                        CountIf(DL_SAN_PHAM_QL_KHACS,true)=0,
                                        1000,
                                        Value(Last(SortByColumns(DL_SAN_PHAM_QL_KHACS,"cr282_ma_dl",SortOrder.Ascending)).MA_DL)+1
                                    )
                                });
                                Collect(
                                    tmpQLKCollect,
                                    {
                                        cr282_ma_dl:Text(idMaQLK),
                                        cr282_ma_nhom_ql:Blank(),
                                        cr282_mo_ta:Blank(),
                                        edited:1
                                    }
                                );
                                UpdateContext({maAddedQLK:Text(idMaQLK)})
                            )
                        Size: =11
                        Text: ="Thêm mới"
                        Width: =96
                        X: =5
                        Y: =43
                        ZIndex: =21

                    Label1_17 As label:
                        Align: =Align.Justify
                        FontWeight: =FontWeight.Bold
                        Height: =30
                        Size: =11
                        Text: ="3.3 Thông tin quyền lợi khác"
                        Width: =1076
                        Y: =4
                        ZIndex: =22

        DataCard2_1 As dataCard.blankCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =739
            Width: =1366
            X: =0
            Y: =1
            ZIndex: =2

            YeuToAnhHuong_1 As groupContainer.manualLayoutContainer:
                Height: =721
                Width: =1214
                X: =67
                Y: =15
                ZIndex: =1

                ChuongTrinh_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =true
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =DisplayMode.Disabled
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Chương trình"
                    Width: =192
                    X: =36
                    Y: =40
                    ZIndex: =1

                GioiTinh_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_GIOITINH
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Giới tính"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Giới tính"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Giới tính"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Giới tính"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =192
                    X: =36
                    Y: =292
                    ZIndex: =3

                NganhNghe_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_NGANHNGHE
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Ngành nghề"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Ngành nghề"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Ngành nghề"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Ngành nghề"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =192
                    X: =36
                    Y: =350
                    ZIndex: =4

                NhomTP_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =true
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =DisplayMode.Disabled
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Nhóm tính phí"
                    Width: =192
                    X: =36
                    Y: =105
                    ZIndex: =5

                PVDiaLy_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =!IsBlank(LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).PHAM_VI_DL)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Phạm vi địa lý"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Phạm vi địa lý"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Phạm vi địa lý"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Phạm vi địa lý"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =192
                    X: =36
                    Y: =171
                    ZIndex: =6

                BH_SoTien_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_SOTIEN
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =38
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Số tiền bảo hiểm"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Số tiền bảo hiểm"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Số tiền bảo hiểm"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Số tiền bảo hiểm"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =192
                    X: =36
                    Y: =417
                    ZIndex: =7

                BH_SoNguoi_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_SONGUOI
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Số người được BH"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Số người được BH"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Số người được BH"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Số người được BH"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =192
                    X: =36
                    Y: =473
                    ZIndex: =8

                BH_ThoiHan_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_THOIHAN
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Thời hạn bảo hiểm"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Thời hạn bảo hiểm"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Thời hạn bảo hiểm"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Thời hạn bảo hiểm"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =212
                    X: =36
                    Y: =532
                    ZIndex: =9

                BH_PhuongThuc_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_DONGPHI
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =38
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Phương thức đóng phí"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Phương thức đóng phí"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Phương thức đóng phí"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Phương thức đóng phí"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =232
                    X: =36
                    Y: =606
                    ZIndex: =10

                Label_TienTe_1 As label:
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Size: =11
                    Text: ="Đơn vị tiền"
                    X: =36
                    Y: =666
                    ZIndex: =11

                DsTienTe_1 As dropdown:
                    BorderColor: =RGBA(72, 163, 62, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(180, 214, 250, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).DON_VI_TIEN
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    Items: =BH_DM_TIENTES
                    OnSelect: =Refresh(BH_DM_TIENTES)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SelectionColor: =RGBA(180, 214, 250, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    X: =294
                    Y: =666
                    ZIndex: =12

                Datafield_CT_1 As combobox:
                    BorderColor: =RGBA(72, 163, 62, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(72, 163, 62, 1)
                    DefaultSelectedItems: |-
                        =Filter(' DL_SAN_PHAM_CT',MA_SAN_PHAM=valMaSP)
                        //Split(Concatenate(Filter(DL_SAN_PHAM_NHOMQLS, MA_SP=valMaSP).CHUONGTRINH_APDUNG, "|" ),"|")
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_chuong_trinh"]
                    DisplayMode: =DisplayMode.Disabled
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =Filter(' DL_SAN_PHAM_CT',MA_SAN_PHAM=valMaSP)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_chuong_trinh"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Width: =900
                    X: =294
                    Y: =40
                    ZIndex: =13

                Datafield_Nhom_1 As combobox:
                    BorderColor: =RGBA(72, 163, 62, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(72, 163, 62, 1)
                    DefaultSelectedItems: =Filter(DL_SAN_PHAM_NHOMQLS, MA_SP=valMaSP)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ma_nhom_tinhphi"]
                    DisplayMode: =DisplayMode.Disabled
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =Filter(DL_SAN_PHAM_NHOMQLS, MA_SP=valMaSP)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ma_nhom_tinhphi"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Width: =900
                    X: =294
                    Y: =110
                    ZIndex: =14

                Datafield_DT_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: =Filter(DM_DO_TUOIS,MO_TA in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).DO_TUOI)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_mo_ta"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =DM_DO_TUOIS
                    OnSelect: =Refresh(DM_DO_TUOIS)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_mo_ta"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(DoTuoi_1.Value=true && DoTuoi_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =237
                    ZIndex: =15

                Datafield_GT_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: =Filter(DM_GIOI_TINHS,TEN_GIOI_TINH in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).GIOI_TINH)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_gioi_tinh"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: ="Find items"
                    IsSearchable: =false
                    Items: =DM_GIOI_TINHS
                    OnSelect: =Refresh(DM_GIOI_TINHS)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_gioi_tinh"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(GioiTinh_1.Value=true && GioiTinh_1.Visible=true, true,false)
                    Width: =900
                    X: =294
                    Y: =297
                    ZIndex: =16

                LuuYT_1 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |-
                        =Select(SuaYT_1);
                        UpdateContext(
                            {
                                valMaYT: If(
                                    CountIf(
                                        DL_SAN_PHAM_YT,
                                        true
                                    ) = 0,
                                    1,
                                    Value(
                                        Last(
                                            SortByColumns(
                                                DL_SAN_PHAM_YT,
                                                "cr282_ma_yeu_to_sp",
                                                SortOrder.Ascending
                                            )
                                        ).MA_YEU_TO_SP
                                    ) + 1
                                )
                            }
                        );
                        If(
                            IsBlank(
                                LookUp(
                                    DL_SAN_PHAM_YT,
                                    MA_SAN_PHAM = valMaSP
                                ).MA_YEU_TO_SP
                            ),
                            Patch(
                                DL_SAN_PHAM_YT,
                                {
                                    MA_SAN_PHAM: valMaSP,
                                    MA_YEU_TO_SP: Concatenate(
                                        If(
                                            valMaYT < 10,
                                            "00",
                                            If(
                                                valMaYT < 100 && valMaYT >= 10,
                                                "0",
                                                ""
                                            )
                                        ),
                                        Text(valMaYT)
                                    ),
                                    CHUONG_TRINH: Concat(
                                        Datafield_CT_1.SelectedItems,
                                        TEN_CHUONG_TRINH,
                                        "|"
                                    ),
                                    NHOM_TINH_PHI: Concat(
                                        Datafield_Nhom_1.SelectedItems,
                                        MA_NHOM_TINHPHI,
                                        "|"
                                    ),
                                    PHAM_VI_DL: Datafield_PV_1.Selected.TEN_PHAMVI,
                                    CHECKED_DOTUOI: If(
                                        DoTuoi_1.Visible = true && DoTuoi_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_GIOITINH: If(
                                        GioiTinh_1.Visible = true && GioiTinh_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_NGANHNGHE: If(
                                        NganhNghe_1.Visible = true && NganhNghe_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_SOTIEN: If(
                                        BH_SoTien_1.Visible = true && BH_SoTien_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_SONGUOI: If(
                                        BH_SoNguoi_1.Visible = true && BH_SoNguoi_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_THOIHAN: If(
                                        BH_ThoiHan_1.Visible = true && BH_ThoiHan_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_DONGPHI: If(
                                        BH_PhuongThuc_1.Visible = true && BH_PhuongThuc_1.Value = true,
                                        true,
                                        false
                                    ),
                                    DON_VI_TIEN: DsTienTe_1.Selected.TIEN_TE,
                                    DO_TUOI: Concat(
                                        Datafield_DT_1.SelectedItems,
                                        MO_TA,
                                        "|"
                                    ),
                                    GIOI_TINH: Concat(
                                        Datafield_GT_1.SelectedItems,
                                        TEN_GIOI_TINH,
                                        "|"
                                    ),
                                    NGANH_NGHE: Concat(
                                        Datafield_NN_1.SelectedItems,
                                        TEN_NGANH,
                                        "|"
                                    ),
                                    BH_SO_TIEN: Concat(
                                        Datafield_ST_1.SelectedItems,
                                        TEN_SOTIEN,
                                        "|"
                                    ),
                                    BH_SO_NGUOI: Concat(
                                        Datafield_SN_1.SelectedItems,
                                        TEN_SO_NGUOI,
                                        "|"
                                    ),
                                    BH_THOI_HAN: Concat(
                                        Datafield_TH_1.SelectedItems,
                                        TEN_THOI_HAN,
                                        "|"
                                    ),
                                    BH_PHUONG_THUC_DP: Concat(
                                        Datafield_DP_1.SelectedItems,
                                        TEN_PT,
                                        "|"
                                    )
                                }
                            ),
                            /*RemoveIf(
                                DL_SAN_PHAM_YT,
                                MA_SAN_PHAM = valMaSP
                            );*/
                            UpdateIf(
                                DL_SAN_PHAM_YT,
                                //Defaults(DL_SAN_PHAM_YT),//
                                MA_SAN_PHAM = valMaSP,
                                {
                                    MA_SAN_PHAM: valMaSP,
                                    MA_YEU_TO_SP: Concatenate(
                                        If(
                                            valMaYT < 10,
                                            "00",
                                            If(
                                                valMaYT < 100 && valMaYT >= 10,
                                                "0",
                                                ""
                                            )
                                        ),
                                        Text(valMaYT)
                                    ),
                                    CHUONG_TRINH: Concat(
                                        Datafield_CT_1.SelectedItems,
                                        TEN_CHUONG_TRINH,
                                        "|"
                                    ),
                                    NHOM_TINH_PHI: Concat(
                                        Datafield_Nhom_1.SelectedItems,
                                        MA_NHOM_TINHPHI,
                                        "|"
                                    ),
                                    PHAM_VI_DL: Datafield_PV_1.Selected.TEN_PHAMVI,
                                    CHECKED_DOTUOI: If(
                                        DoTuoi_1.Visible = true && DoTuoi_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_GIOITINH: If(
                                        GioiTinh_1.Visible = true && GioiTinh_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_NGANHNGHE: If(
                                        NganhNghe_1.Visible = true && NganhNghe_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_SOTIEN: If(
                                        BH_SoTien_1.Visible = true && BH_SoTien_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_SONGUOI: If(
                                        BH_SoNguoi_1.Visible = true && BH_SoNguoi_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_THOIHAN: If(
                                        BH_ThoiHan_1.Visible = true && BH_ThoiHan_1.Value = true,
                                        true,
                                        false
                                    ),
                                    CHECKED_DONGPHI: If(
                                        BH_PhuongThuc_1.Visible = true && BH_PhuongThuc_1.Value = true,
                                        true,
                                        false
                                    ),
                                    DON_VI_TIEN: DsTienTe_1.Selected.TIEN_TE,
                                    DO_TUOI: Concat(
                                        Datafield_DT_1.SelectedItems,
                                        MO_TA,
                                        "|"
                                    ),
                                    GIOI_TINH: Concat(
                                        Datafield_GT_1.SelectedItems,
                                        TEN_GIOI_TINH,
                                        "|"
                                    ),
                                    NGANH_NGHE: Concat(
                                        Datafield_NN_1.SelectedItems,
                                        TEN_NGANH,
                                        "|"
                                    ),
                                    BH_SO_TIEN: Concat(
                                        Datafield_ST_1.SelectedItems,
                                        TEN_SOTIEN,
                                        "|"
                                    ),
                                    BH_SO_NGUOI: Concat(
                                        Datafield_SN_1.SelectedItems,
                                        TEN_SO_NGUOI,
                                        "|"
                                    ),
                                    BH_THOI_HAN: Concat(
                                        Datafield_TH_1.SelectedItems,
                                        TEN_THOI_HAN,
                                        "|"
                                    ),
                                    BH_PHUONG_THUC_DP: Concat(
                                        Datafield_DP_1.SelectedItems,
                                        TEN_PT,
                                        "|"
                                    )
                                }
                            )
                        );
                        If(
                            !IsEmpty(
                                Filter(
                                    DL_SAN_PHAM_NHOMQLS,
                                    MA_SP = valMaSP
                                )
                            ),
                            ForAll(
                                Filter(
                                    DL_SAN_PHAM_NHOMQLS,
                                    MA_SP = valMaSP
                                ) As nql,
                                ForAll(
                                    Split(
                                        nql.CHUONGTRINH_APDUNG,
                                        "|"
                                    ) As ct,
                                    Patch(
                                        DL_SAN_PHAM_BANGYT,
                                        Defaults(DL_SAN_PHAM_BANGYT),
                                        {
                                            ID: 
                                            If(!IsBlank(LookUp(DL_SAN_PHAM_BANGYT,MA_SAN_PHAM = valMaSP && NHOM_TINH_PHI=nql.MA_NHOM_TINHPHI).ID),
                                            LookUp(DL_SAN_PHAM_BANGYT,MA_SAN_PHAM = valMaSP && NHOM_TINH_PHI=nql.MA_NHOM_TINHPHI).ID,
                                            If(
                                                CountIf(DL_SAN_PHAM_BANGYT,true) = 0,1000,
                                                Value(Last(SortByColumns(DL_SAN_PHAM_BANGYT,"cr282_id", SortOrder.Ascending)).ID)) + 1),
                                            CHUONGTRINH_NHOMTP: Concatenate(
                                                nql.MA_NHOM_TINHPHI,
                                                "- ",
                                                ct.Value
                                            ),
                                            MA_SAN_PHAM: valMaSP,
                                            TEN_CHUONG_TRINH: LookUp(
                                                ' DL_SAN_PHAM_CT',
                                                MA_SAN_PHAM = valMaSP && MA_CHUONG_TRINH = ct.Value
                                            ).TEN_CHUONG_TRINH,
                                            MA_CHUONG_TRINH: ct.Value,
                                            NHOM_TINH_PHI: nql.MA_NHOM_TINHPHI,
                                            TEN_NHOM_TP: nql.MA_NHOM_TINHPHI
                                        }
                                    )
                                )
                            );
                            
                        );
                        UpdateContext({showGrid: true});
                        Select(IconTaiLaiBYT);
                    Size: =11
                    Text: ="Lưu"
                    Width: =96
                    X: =1098
                    Y: =666
                    ZIndex: =17

                Datafield_PV_1 As dropdown:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).PHAM_VI_DL
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    Items: =DM_PHAMVI_DIALYS
                    OnSelect: =Refresh(DM_PHAMVI_DIALYS)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(PVDiaLy_1.Value=true && PVDiaLy_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =176
                    ZIndex: =18

                Datafield_NN_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: =Filter(BH_DM_NGANHNGHES,TEN_NGANH in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).NGANH_NGHE)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_nganh"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =BH_DM_NGANHNGHES
                    OnSelect: =Refresh(BH_DM_NGANHNGHES)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_nganh"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(NganhNghe_1.Value=true && NganhNghe_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =358
                    ZIndex: =19

                Datafield_ST_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: =Filter(BH_DM_SOTIEN,TEN_SOTIEN in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_SO_TIEN)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_sotien"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =BH_DM_SOTIEN
                    OnSelect: =Refresh(BH_DM_SOTIEN)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_sotien"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =417
                    ZIndex: =20

                Datafield_SN_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: |-
                        =//Split(LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_SO_NGUOI,"|")
                        Filter(BH_DM_SONGUOI,TEN_SO_NGUOI in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_SO_NGUOI)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_so_nguoi"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =BH_DM_SONGUOI
                    OnSelect: =Refresh(BH_DM_SONGUOI)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_so_nguoi"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =473
                    ZIndex: =21

                Datafield_TH_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: |-
                        =//Split(LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_THOI_HAN,"|")
                        Filter(BH_DM_THOIHAN,TEN_THOI_HAN in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_THOI_HAN)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_thoi_han"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =BH_DM_THOIHAN
                    OnSelect: =Refresh(BH_DM_THOIHAN)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_thoi_han"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =537
                    ZIndex: =22

                Datafield_DP_1 As combobox:
                    BorderColor: =RGBA(45, 128, 40, 1)
                    ChevronBackground: =RGBA(255, 255, 255, 1)
                    ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                    ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                    ChevronFill: =RGBA(45, 128, 40, 1)
                    DefaultSelectedItems: |-
                        =//Split(LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_PHUONG_THUC_DP,"|")
                        Filter(BH_DM_PT_DONG,TEN_PT in LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).BH_PHUONG_THUC_DP)
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayFields: =["cr282_ten_pt"]
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    Height: =35
                    InputTextPlaceholder: =""
                    IsSearchable: =false
                    Items: =BH_DM_PT_DONG
                    OnSelect: =Refresh(BH_DM_PT_DONG)
                    PressedFill: =RGBA(166, 215, 153, 1)
                    SearchFields: =["cr282_ten_pt"]
                    SearchItems: =[]
                    SelectionColor: =RGBA(72, 163, 62, 1)
                    SelectionFill: =RGBA(255, 255, 255, 1)
                    Size: =11
                    Visible: =If(BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true,true,false)
                    Width: =900
                    X: =294
                    Y: =606
                    ZIndex: =23

                SuaYT_1 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =RemoveIf(
                            DL_SAN_PHAM_BANGYT,
                            MA_SAN_PHAM = valMaSP
                        );
                        RemoveIf(
                            DL_SAN_PHAM_MATRANPHI,
                            MA_SAN_PHAM = valMaSP
                        );
                        UpdateContext({showGrid: false});
                        Select(IconTaiLaiBYT);
                    Size: =11
                    Text: ="Sửa"
                    Width: =96
                    X: =873
                    Y: =666
                    ZIndex: =24

                Label1_9 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="4.1.1. Các yếu tố ảnh hưởng"
                    Width: =1204
                    X: =3
                    ZIndex: =25

                DoTuoi_1 As checkbox:
                    BorderColor: =RGBA(71, 158, 245, 1)
                    CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                    Default: =LookUp(DL_SAN_PHAM_YT, MA_SAN_PHAM=valMaSP).CHECKED_DOTUOI
                    DisabledBorderColor: =RGBA(180, 214, 250, 1)
                    DisplayMode: =If(showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP)),DisplayMode.Disabled, DisplayMode.Edit)
                    HoverColor: =RGBA(180, 214, 250, 1)
                    Size: =11
                    Text: ="Độ tuổi"
                    Visible: |-
                        =LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Độ tuổi"
                        ).HIEU_LUC_TU <= Today() && (LookUp(
                            DM_YEUTO_AH_PHIS,
                            TEN_YEU_TO = "Độ tuổi"
                        ).HIEU_LUC_DEN >= Today() || IsBlank(
                            LookUp(
                                DM_YEUTO_AH_PHIS,
                                TEN_YEU_TO = "Độ tuổi"
                            ).HIEU_LUC_DEN
                        ))
                    Width: =192
                    X: =36
                    Y: =234
                    ZIndex: =26

        DataCard3_1 As dataCard.blankCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =950
            Width: =1366
            X: =0
            Y: =2
            ZIndex: =3

            Container3_1 As groupContainer.manualLayoutContainer:
                Height: =788
                Width: =1214
                X: =67
                ZIndex: =1

                BadgeCanvas1_18 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =42
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =1206
                    X: =4
                    Y: =79
                    ZIndex: =1

                "Gallery_1 As gallery.'BrowseLayout_Vertical_OneTextVariant_ver5.0'":
                    DelayItemLoading: =true
                    Height: =224
                    Items: |-
                        =/*GroupBy(
                            Filter(DL_SAN_PHAM_BANGYT,MA_SAN_PHAM=valMaSP),
                            "cr282_nhom_tinh_phi",
                            "cr282_do_tuoi",
                            "cr282_pham_vi_dl",
                            "cr282_bh_phuong_thuc",
                            "cr282_bh_songuoi",
                            "cr282_bh_sotien",
                            "cr282_bh_thoihan",
                            "cr282_gioi_tinh",
                            "cr282_nganh_nghe",
                            "cr282_id",
                            "CHUONG_TRINH_GROUP"
                        )*/
                        tmpBYTCollect
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =40
                    Width: =1191
                    X: =4
                    Y: =124
                    ZIndex: =2

                    Combo_CT_1 As combobox:
                        BorderColor: =RGBA(45, 128, 40, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(45, 128, 40, 1)
                        DefaultSelectedItems: =ThisItem.CHUONG_TRINH_GROUP
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisplayFields: =["cr282_ten_chuong_trinh"]
                        Height: =30
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: =""
                        IsSearchable: =false
                        Items: |-
                            =Filter(' DL_SAN_PHAM_CT', MA_SAN_PHAM=valMaSP)
                            //Datafield_CT_1.SelectedItems
                        OnSelect: =Select(Parent)
                        SearchFields: =["cr282_ten_chuong_trinh"]
                        SearchItems: =[]
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        Size: =11
                        Width: =188
                        X: =4
                        Y: =5
                        ZIndex: =5

                    Dropdown_TP_1 As dropdown:
                        BorderColor: =RGBA(45, 128, 40, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(45, 128, 40, 1)
                        Default: =ThisItem.cr282_nhom_tinh_phi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        Height: =30
                        HoverFill: =RGBA(180, 214, 250, 1)
                        Items: =Filter(DL_SAN_PHAM_NHOMQLS, MA_SP=valMaSP)
                        OnSelect: =Select(Parent)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        Size: =11
                        Width: =145
                        X: =192
                        Y: =5
                        ZIndex: =6

                    Checkbox_PV_1 As checkbox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_pham_vi_dl
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(PVDiaLy_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =363
                        Y: =5
                        ZIndex: =7

                    Checkbox_DT_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_do_tuoi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(DoTuoi_1.Value=true, DisplayMode.Edit,DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =445
                        Y: =5
                        ZIndex: =8

                    Checkbox_GT_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_gioi_tinh
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(GioiTinh_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =531
                        Y: =5
                        ZIndex: =9

                    Icon1_3 As icon.Cancel:
                        Color: =RGBA(255, 0, 0, 1)
                        Height: =30
                        Icon: =Icon.Cancel
                        OnSelect: |-
                            =RemoveIf(
                                DL_SAN_PHAM_BANGYT,
                                ID = "NULL"
                            );
                            If(
                                !IsEmpty(DL_SAN_PHAM_BANGYT),
                                RemoveIf(
                                    DL_SAN_PHAM_BANGYT,
                                    ID = ThisItem.cr282_id
                                );
                                
                            );
                            /*ForAll(
                                Combo_CT_1.SelectedItems As ct,
                                //If(CountRows(DL_SAN_PHAM_BANGYT)>0,
                                RemoveIf(
                                    DL_SAN_PHAM_BANGYT,
                                    ID = ThisItem.cr282_id
                                )//)
                            );*/
                            Select(IconTaiLaiBYT);
                        Width: =38
                        X: =1153
                        Y: =5
                        ZIndex: =10

                    Icon2_2 As icon.Save:
                        BorderColor: =RGBA(152, 208, 70, 1)
                        Color: =RGBA(72, 163, 62, 1)
                        Height: =30
                        Icon: =Icon.Save
                        OnSelect: |
                            =RemoveIf(
                                DL_SAN_PHAM_BANGYT,
                                ID = "NULL"
                            );
                            If(
                                !IsEmpty(DL_SAN_PHAM_BANGYT),
                                RemoveIf(
                                    DL_SAN_PHAM_BANGYT,
                                    ID = ThisItem.cr282_id
                                );
                                
                            );
                            
                            ForAll(
                                Combo_CT_1.SelectedItems As ct,
                                Patch(
                                    DL_SAN_PHAM_BANGYT,
                                    Defaults(DL_SAN_PHAM_BANGYT),
                                    {
                                        ID: ThisItem.cr282_id,
                                        CHUONGTRINH_NHOMTP: Concatenate(
                                            Dropdown_TP_1.Selected.MA_NHOM_TINHPHI,
                                            "- ",
                                            ct.TEN_CHUONG_TRINH
                                        ),
                                        MA_SAN_PHAM: valMaSP,
                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                        MA_CHUONG_TRINH: LookUp(' DL_SAN_PHAM_CT', MA_SAN_PHAM = valMaSP && TEN_CHUONG_TRINH =ct.TEN_CHUONG_TRINH).MA_CHUONG_TRINH,
                                        NHOM_TINH_PHI: Dropdown_TP_1.Selected.MA_NHOM_TINHPHI,
                                        TEN_NHOM_TP: Dropdown_TP_1.Selected.MA_NHOM_TINHPHI,
                                        GIOI_TINH: Checkbox_GT_1.Value,
                                        PHAM_VI_DL: Checkbox_PV_1.Value,
                                        DO_TUOI: Checkbox_DT_1.Value,
                                        NGANH_NGHE: Checkbox_NN_1.Value,
                                        BH_SOTIEN: Checkbox_ST_1.Value,
                                        BH_SONGUOI: Checkbox_SN_1.Value,
                                        BH_THOIHAN: Checkbox_TH_1.Value,
                                        BH_PHUONG_THUC: Checkbox_PT_1.Value
                                    }
                                )
                            );
                            Select(IconTaiLaiBYT);
                        Width: =38
                        X: =1096
                        Y: =5
                        ZIndex: =11

                    Checkbox_NN_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_nganh_nghe
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(NganhNghe_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =618
                        Y: =5
                        ZIndex: =12

                    Checkbox_ST_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_bh_sotien
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(BH_SoTien_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =729
                        Y: =5
                        ZIndex: =13

                    Checkbox_SN_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_bh_songuoi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(BH_SoNguoi_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =805
                        Y: =5
                        ZIndex: =14

                    Checkbox_TH_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_bh_thoihan
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(BH_ThoiHan_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =925
                        Y: =5
                        ZIndex: =15

                    Checkbox_PT_1 As checkbox:
                        CheckboxBorderColor: =RGBA(71, 158, 245, 1)
                        Default: =ThisItem.cr282_bh_phuong_thuc
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisplayMode: =If(BH_PhuongThuc_1.Value=true, DisplayMode.Edit, DisplayMode.Disabled)
                        Height: =30
                        OnSelect: =Select(Parent)
                        Text: =""
                        Width: =50
                        X: =1023
                        Y: =5
                        ZIndex: =16

                Label_ct_1 As label:
                    Height: =45
                    Text: ="Chương trình"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =128
                    X: =17
                    Y: =77
                    ZIndex: =3

                Label_nhom_1 As label:
                    Height: =45
                    Text: ="Nhóm tính phí"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =144
                    X: =179
                    Y: =76
                    ZIndex: =4

                Label_pv_1 As label:
                    Height: =45
                    Text: ="Phạm vi"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =85
                    X: =341
                    Y: =76
                    ZIndex: =5

                Label_dt_1 As label:
                    Height: =45
                    Text: ="Độ tuổi"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =81
                    X: =426
                    Y: =77
                    ZIndex: =6

                Label_gt_1 As label:
                    Height: =45
                    Text: ="Giới tính"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =83
                    X: =501
                    Y: =76
                    ZIndex: =7

                Label_thaotac_1 As label:
                    Height: =45
                    Text: ="Thao tác"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =81
                    X: =1107
                    Y: =77
                    ZIndex: =8

                ThemMoiBYT As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =/*Patch(
                            DL_SAN_PHAM_BANGYT,
                            Defaults(DL_SAN_PHAM_BANGYT),
                            {
                                ID:"NULL",
                                MA_SAN_PHAM: valMaSP
                            }
                        );*/
                        If(
                            Or(maBYTAdded<>"",maBYTUpdated<>""),
                            Select(IconTaiLaiBYT),
                            UpdateContext({
                                idMaBYT:If(
                                    CountIf(DL_SAN_PHAM_BANGYT,true)=0,
                                    1000,
                                    Value(Last(SortByColumns(DL_SAN_PHAM_BANGYT,"cr282_id",SortOrder.Ascending)).ID)+1
                                )
                            });
                            Collect(
                                tmpBYTCollect,
                                {
                                    cr282_id:Text(idMaBYT),
                                    edited:1
                                }
                            );
                            UpdateContext({maBYTAdded:Text(idMaBYT)})
                        )
                    Size: =11
                    Text: ="Thêm mới"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =96
                    Y: =40
                    ZIndex: =9

                Label_st_1 As label:
                    Height: =44
                    Text: |-
                        ="Số tiền 
                        bảo hiểm"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =99
                    X: =694
                    Y: =80
                    ZIndex: =10

                Label_nn_1 As label:
                    Height: =45
                    Text: ="Ngành nghề"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =113
                    X: =581
                    Y: =77
                    ZIndex: =11

                Label_th_1 As label:
                    Height: =44
                    Text: |-
                        ="Thời hạn 
                        bảo hiểm"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =94
                    X: =895
                    Y: =77
                    ZIndex: =12

                Label_pt_1 As label:
                    Height: =43
                    Text: |-
                        ="Phương thức
                        đóng phí"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =127
                    X: =980
                    Y: =79
                    ZIndex: =13

                LuuYeuTo_1 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =RemoveIf(
                            DL_SAN_PHAM_MATRANPHI,
                            MA_SAN_PHAM = valMaSP
                        );
                        If(
                            !IsEmpty(DL_SAN_PHAM_BANGYT),
                            ForAll(
                                Filter(
                                    DL_SAN_PHAM_BANGYT,
                                    MA_SAN_PHAM = valMaSP
                                )As ct,
                                If(
                                    ct.DO_TUOI = true && CountRows(Datafield_DT_1.SelectedItems) > 0,
                                    ForAll(
                                        Datafield_DT_1.SelectedItems As dt,
                                        If(
                                            ct.GIOI_TINH = true && CountRows(Datafield_GT_1.SelectedItems) > 0,
                                            ForAll(
                                                Datafield_GT_1.SelectedItems As gt,
                                                If(
                                                    ct.NGANH_NGHE = true && CountRows(Datafield_NN_1.SelectedItems) > 0,
                                                    ForAll(
                                                        Datafield_NN_1.SelectedItems As nn,
                                                        If(
                                                            ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_ST_1.SelectedItems As st,
                                                                If(
                                                                    ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_SN_1.SelectedItems As sn,
                                                                        If(
                                                                            ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_TH_1.SelectedItems As th,
                                                                                If(
                                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                    ForAll(
                                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                            {
                                                                                                ID: ct.ID,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                                DO_TUOI: dt.MO_TA,
                                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                PHAM_VI_DL: If(
                                                                                                    ct.PHAM_VI_DL = true,
                                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                    ""
                                                                                                ),
                                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: dt.MO_TA,
                                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                                            PHUONG_THUC_DP: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                ForAll(
                                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: dt.MO_TA,
                                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            THOI_HAN: "",
                                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: "",
                                                                                        PHUONG_THUC_DP: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_TH_1.SelectedItems As th,
                                                                            If(
                                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                ForAll(
                                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: dt.MO_TA,
                                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                                            SO_NGUOI: "",
                                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: "",
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: "",
                                                                                        THOI_HAN: "",
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_SN_1.SelectedItems As sn,
                                                                    If(
                                                                        ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_TH_1.SelectedItems As th,
                                                                            If(
                                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                ForAll(
                                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: dt.MO_TA,
                                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                                            SO_TIEN: "",
                                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: "",
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: "",
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: "",
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: "",
                                                                                        SO_NGUOI: "",
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_ST_1.SelectedItems As st,
                                                            If(
                                                                ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_SN_1.SelectedItems As sn,
                                                                    If(
                                                                        ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_TH_1.SelectedItems As th,
                                                                            If(
                                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                ForAll(
                                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: dt.MO_TA,
                                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: "",
                                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: "",
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: "",
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: "",
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: "",
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: "",
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_SN_1.SelectedItems As sn,
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: "",
                                                                                        SO_TIEN: "",
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: dt.MO_TA,
                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            ),
                                            If(
                                                ct.NGANH_NGHE = true && CountRows(Datafield_NN_1.SelectedItems) > 0,
                                                ForAll(
                                                    Datafield_NN_1.SelectedItems As nn,
                                                    If(
                                                        ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_ST_1.SelectedItems As st,
                                                            If(
                                                                ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_SN_1.SelectedItems As sn,
                                                                    If(
                                                                        ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_TH_1.SelectedItems As th,
                                                                            If(
                                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                ForAll(
                                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: dt.MO_TA,
                                                                                            GIOI_TINH: "",
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: "",
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: "",
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: "",
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: "",
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: "",
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_SN_1.SelectedItems As sn,
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: "",
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: "",
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: dt.MO_TA,
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                ),
                                                If(
                                                    ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                    ForAll(
                                                        Datafield_ST_1.SelectedItems As st,
                                                        If(
                                                            ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_SN_1.SelectedItems As sn,
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: dt.MO_TA,
                                                                                        GIOI_TINH: "",
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: "",
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: dt.MO_TA,
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_SN_1.SelectedItems As sn,
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: dt.MO_TA,
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: dt.MO_TA,
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_TH_1.SelectedItems As th,
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: dt.MO_TA,
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: dt.MO_TA,
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: dt.MO_TA,
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                        }
                                                                    )
                                                                ),
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: dt.MO_TA,
                                                                        GIOI_TINH: "",
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: "",
                                                                        SO_TIEN: "",
                                                                        SO_NGUOI: "",
                                                                        THOI_HAN: "",
                                                                        PHUONG_THUC_DP: ""
                                                                    }
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    If(
                                        ct.GIOI_TINH = true && CountRows(Datafield_GT_1.SelectedItems) > 0,
                                        ForAll(
                                            Datafield_GT_1.SelectedItems As gt,
                                            If(
                                                ct.NGANH_NGHE = true && CountRows(Datafield_NN_1.SelectedItems) > 0,
                                                ForAll(
                                                    Datafield_NN_1.SelectedItems As nn,
                                                    If(
                                                        ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_ST_1.SelectedItems As st,
                                                            If(
                                                                ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_SN_1.SelectedItems As sn,
                                                                    If(
                                                                        ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_TH_1.SelectedItems As th,
                                                                            If(
                                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                                ForAll(
                                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                        {
                                                                                            ID: ct.ID,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                            DO_TUOI: "",
                                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            PHAM_VI_DL: If(
                                                                                                ct.PHAM_VI_DL = true,
                                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                                ""
                                                                                            ),
                                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: "",
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: "",
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: "",
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: "",
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: "",
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_SN_1.SelectedItems As sn,
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: "",
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: "",
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                ),
                                                If(
                                                    ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                    ForAll(
                                                        Datafield_ST_1.SelectedItems As st,
                                                        If(
                                                            ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_SN_1.SelectedItems As sn,
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: "",
                                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: "",
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_SN_1.SelectedItems As sn,
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_TH_1.SelectedItems As th,
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                        }
                                                                    )
                                                                ),
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: "",
                                                                        GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: "",
                                                                        SO_TIEN: "",
                                                                        SO_NGUOI: "",
                                                                        THOI_HAN: "",
                                                                        PHUONG_THUC_DP: ""
                                                                    }
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        If(
                                            ct.NGANH_NGHE = true && CountRows(Datafield_NN_1.SelectedItems) > 0,
                                            ForAll(
                                                Datafield_NN_1.SelectedItems As nn,
                                                If(
                                                    ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                    ForAll(
                                                        Datafield_ST_1.SelectedItems As st,
                                                        If(
                                                            ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_SN_1.SelectedItems As sn,
                                                                If(
                                                                    ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_TH_1.SelectedItems As th,
                                                                        If(
                                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                            ForAll(
                                                                                Datafield_DP_1.SelectedItems As dp,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                    {
                                                                                        ID: ct.ID,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                        DO_TUOI: "",
                                                                                        GIOI_TINH: "",
                                                                                        PHAM_VI_DL: If(
                                                                                            ct.PHAM_VI_DL = true,
                                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                            ""
                                                                                        ),
                                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: "",
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: "",
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_SN_1.SelectedItems As sn,
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: nn.TEN_NGANH,
                                                                                    SO_TIEN: "",
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_TH_1.SelectedItems As th,
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: nn.TEN_NGANH,
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: nn.TEN_NGANH,
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                        }
                                                                    )
                                                                ),
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: "",
                                                                        GIOI_TINH: "",
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: nn.TEN_NGANH,
                                                                        SO_TIEN: "",
                                                                        SO_NGUOI: "",
                                                                        THOI_HAN: "",
                                                                        PHUONG_THUC_DP: ""
                                                                    }
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            ),
                                            If(
                                                ct.BH_SOTIEN = true && CountRows(Datafield_ST_1.SelectedItems) > 0,
                                                ForAll(
                                                    Datafield_ST_1.SelectedItems As st,
                                                    If(
                                                        ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_SN_1.SelectedItems As sn,
                                                            If(
                                                                ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_TH_1.SelectedItems As th,
                                                                    If(
                                                                        ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                        ForAll(
                                                                            Datafield_DP_1.SelectedItems As dp,
                                                                            Patch(
                                                                                DL_SAN_PHAM_MATRANPHI,
                                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                                {
                                                                                    ID: ct.ID,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                    DO_TUOI: "",
                                                                                    GIOI_TINH: "",
                                                                                    PHAM_VI_DL: If(
                                                                                        ct.PHAM_VI_DL = true,
                                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                        ""
                                                                                    ),
                                                                                    NGANH_NGHE: "",
                                                                                    SO_TIEN: st.TEN_SOTIEN,
                                                                                    SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    THOI_HAN: th.TEN_THOI_HAN,
                                                                                    PHUONG_THUC_DP: dp.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: "",
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_TH_1.SelectedItems As th,
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: st.TEN_SOTIEN,
                                                                                SO_NGUOI: "",
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: st.TEN_SOTIEN,
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                        }
                                                                    )
                                                                ),
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: "",
                                                                        GIOI_TINH: "",
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: "",
                                                                        SO_TIEN: st.TEN_SOTIEN,
                                                                        SO_NGUOI: "",
                                                                        THOI_HAN: "",
                                                                        PHUONG_THUC_DP: ""
                                                                    }
                                                                )
                                                            )
                                                        )
                                                    )
                                                ),
                                                If(
                                                    ct.BH_SONGUOI = true && CountRows(Datafield_SN_1.SelectedItems) > 0,
                                                    ForAll(
                                                        Datafield_SN_1.SelectedItems As sn,
                                                        If(
                                                            ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_TH_1.SelectedItems As th,
                                                                If(
                                                                    ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                    ForAll(
                                                                        Datafield_DP_1.SelectedItems As dp,
                                                                        Patch(
                                                                            DL_SAN_PHAM_MATRANPHI,
                                                                            Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                            {
                                                                                ID: ct.ID,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                                NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                                DO_TUOI: "",
                                                                                GIOI_TINH: "",
                                                                                PHAM_VI_DL: If(
                                                                                    ct.PHAM_VI_DL = true,
                                                                                    Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                    ""
                                                                                ),
                                                                                NGANH_NGHE: "",
                                                                                SO_TIEN: "",
                                                                                SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                THOI_HAN: th.TEN_THOI_HAN,
                                                                                PHUONG_THUC_DP: dp.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                            PHUONG_THUC_DP: ""
                                                                        }
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                            THOI_HAN: "",
                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                        }
                                                                    )
                                                                ),
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: "",
                                                                        GIOI_TINH: "",
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: "",
                                                                        SO_TIEN: "",
                                                                        SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                        THOI_HAN: "",
                                                                        PHUONG_THUC_DP: ""
                                                                    }
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        ct.BH_THOIHAN = true && CountRows(Datafield_TH_1.SelectedItems) > 0,
                                                        ForAll(
                                                            Datafield_TH_1.SelectedItems As th,
                                                            If(
                                                                ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                                ForAll(
                                                                    Datafield_DP_1.SelectedItems As dp,
                                                                    Patch(
                                                                        DL_SAN_PHAM_MATRANPHI,
                                                                        Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                        {
                                                                            ID: ct.ID,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                            NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                            DO_TUOI: "",
                                                                            GIOI_TINH: "",
                                                                            PHAM_VI_DL: If(
                                                                                ct.PHAM_VI_DL = true,
                                                                                Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                                ""
                                                                            ),
                                                                            NGANH_NGHE: "",
                                                                            SO_TIEN: "",
                                                                            SO_NGUOI: "",
                                                                            THOI_HAN: th.TEN_THOI_HAN,
                                                                            PHUONG_THUC_DP: dp.TEN_PT
                                                                        }
                                                                    )
                                                                ),
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: "",
                                                                        GIOI_TINH: "",
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: "",
                                                                        SO_TIEN: "",
                                                                        SO_NGUOI: "",
                                                                        THOI_HAN: th.TEN_THOI_HAN,
                                                                        PHUONG_THUC_DP: ""
                                                                    }
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            ct.BH_PHUONG_THUC = true && CountRows(Datafield_DP_1.SelectedItems) > 0,
                                                            ForAll(
                                                                Datafield_DP_1.SelectedItems As dp,
                                                                Patch(
                                                                    DL_SAN_PHAM_MATRANPHI,
                                                                    Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                    {
                                                                        ID: ct.ID,
                                                                        MA_SAN_PHAM: valMaSP,
                                                                        CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                        MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                        NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                        DO_TUOI: "",
                                                                        GIOI_TINH: "",
                                                                        PHAM_VI_DL: If(
                                                                            ct.PHAM_VI_DL = true,
                                                                            Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                            ""
                                                                        ),
                                                                        NGANH_NGHE: "",
                                                                        SO_TIEN: "",
                                                                        SO_NGUOI: "",
                                                                        THOI_HAN: "",
                                                                        PHUONG_THUC_DP: dp.TEN_PT
                                                                    }
                                                                )
                                                            ),
                                                            Patch(
                                                                DL_SAN_PHAM_MATRANPHI,
                                                                Defaults(DL_SAN_PHAM_MATRANPHI),
                                                                {
                                                                    ID: ct.ID,
                                                                    MA_SAN_PHAM: valMaSP,
                                                                    CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                    MA_CHUONG_TRINH: ct.MA_CHUONG_TRINH,
                                                                    NHOM_TINH_PHI: ct.NHOM_TINH_PHI,
                                                                    DO_TUOI: "",
                                                                    GIOI_TINH: "",
                                                                    PHAM_VI_DL: If(
                                                                        ct.PHAM_VI_DL = true,
                                                                        Datafield_PV_1.Selected.TEN_PHAMVI,
                                                                        ""
                                                                    ),
                                                                    NGANH_NGHE: "",
                                                                    SO_TIEN: "",
                                                                    SO_NGUOI: "",
                                                                    THOI_HAN: "",
                                                                    PHUONG_THUC_DP: ""
                                                                }
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        );
                    Size: =11
                    Text: ="Lưu"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =96
                    X: =200
                    Y: =40
                    ZIndex: =14

                Label1_10 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="4.1.2. Bảng thông tin "
                    Width: =1207
                    X: =3
                    ZIndex: =15

                Label_sn_1 As label:
                    Height: =44
                    Text: |-
                        ="Số người 
                        được BH"
                    Visible: =showGrid||!IsEmpty(Filter(DL_SAN_PHAM_BANGYT, MA_SAN_PHAM=valMaSP))
                    Width: =94
                    X: =793
                    Y: =80
                    ZIndex: =16

                MaTranLoaiTru As groupContainer.horizontalAutoLayoutContainer:
                    Height: =362
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowX: =LayoutOverflow.Scroll
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    Width: =Parent.Width
                    Y: =424
                    ZIndex: =17

                    MaTran As groupContainer.manualLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        FillPortions: =0
                        Height: =350
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        Width: =1835
                        ZIndex: =1

                        GalleryNQL_1 As gallery.galleryVertical:
                            DelayItemLoading: =true
                            Height: =200
                            Items: =tmpLTCollect
                            Layout: =Layout.Vertical
                            LoadingSpinner: =LoadingSpinner.Data
                            NavigationStep: =0
                            TemplateSize: =40
                            Width: =1827
                            Y: =123
                            ZIndex: =1

                            CbxCTLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_chuong_trinh"]
                                DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: |-
                                    =Filter(' DL_SAN_PHAM_CT', MA_SAN_PHAM=valMaSP)
                                    //Datafield_CT_1.SelectedItems
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_chuong_trinh"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                ZIndex: =20

                            DsNhomLT As dropdown:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(153, 207, 236, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(99, 139, 44, 1)
                                Default: =ThisItem.cr282_ten_nhom_tp
                                DisabledBorderColor: =RGBA(153, 207, 236, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                Items: =Filter(DL_SAN_PHAM_NHOMQLS, MA_SP=valMaSP)
                                OnSelect: =Select(Parent)
                                PaddingBottom: =5
                                PaddingLeft: =5
                                PaddingRight: =5
                                PaddingTop: =5
                                PressedColor: =RGBA(127, 178, 57, 1)
                                PressedFill: =RGBA(237, 237, 237, 1)
                                SelectionFill: =RGBA(237, 237, 237, 1)
                                Size: =11
                                Width: =134
                                X: =158
                                ZIndex: =21

                            DsPhamViLT As dropdown:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(153, 207, 236, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(99, 139, 44, 1)
                                DisabledBorderColor: =RGBA(153, 207, 236, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =If(ThisItem.edited=1 && PVDiaLy_1.Value=true && PVDiaLy_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                Items: |-
                                    =//DM_PHAMVI_DIALYS
                                    Datafield_PV_1.SelectedText
                                OnSelect: =Select(Parent)
                                PaddingBottom: =5
                                PaddingLeft: =5
                                PaddingRight: =5
                                PaddingTop: =5
                                PressedColor: =RGBA(127, 178, 57, 1)
                                PressedFill: =RGBA(237, 237, 237, 1)
                                SelectionFill: =RGBA(237, 237, 237, 1)
                                Size: =11
                                Width: =134
                                X: =292
                                ZIndex: =22

                            CbxDoTuoiLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_mo_ta"]
                                DisplayMode: =If(ThisItem.edited=1 && DoTuoi_1.Value=true && DoTuoi_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =DM_DO_TUOIS
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_mo_ta"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                X: =426
                                ZIndex: =23

                            CbxGioiTinhLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_gioi_tinh"]
                                DisplayMode: =If(ThisItem.edited=1 && GioiTinh_1.Value=true && GioiTinh_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =DM_GIOI_TINHS
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_gioi_tinh"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                X: =584
                                ZIndex: =24

                            CbxNganhLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_nganh"]
                                DisplayMode: =If(ThisItem.edited=1 && NganhNghe_1.Value=true && NganhNghe_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =BH_DM_NGANHNGHES
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_nganh"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                X: =742
                                ZIndex: =25

                            CbxSoTienLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_sotien"]
                                DisplayMode: =If(ThisItem.edited=1 && BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =BH_DM_SOTIEN
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_sotien"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                X: =900
                                ZIndex: =26

                            CbxSoNguoiLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_so_nguoi"]
                                DisplayMode: =If(ThisItem.edited=1 && BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =BH_DM_SONGUOI
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_so_nguoi"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                X: =1058
                                ZIndex: =27

                            CbxThoiHanLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_thoi_han"]
                                DisplayMode: =If(ThisItem.edited=1 && BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =BH_DM_THOIHAN
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_thoi_han"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =158
                                X: =1216
                                ZIndex: =28

                            CbxPhuongThucLT As combobox:
                                BorderColor: =RGBA(99, 139, 44, 1)
                                ChevronBackground: =RGBA(255, 255, 255, 1)
                                ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                                ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                                ChevronFill: =RGBA(72, 163, 62, 1)
                                ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                                ChevronHoverFill: =RGBA(72, 163, 62, 1)
                                DefaultSelectedItems: =ThisItem.GROUP_COLS
                                DisabledBorderColor: =RGBA(180, 214, 250, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayFields: =["cr282_ten_pt"]
                                DisplayMode: =If(ThisItem.edited=1 && BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true,DisplayMode.Edit,DisplayMode.Disabled) 
                                HoverBorderColor: =RGBA(9, 33, 98, 1)
                                HoverFill: =RGBA(180, 214, 250, 1)
                                InputTextPlaceholder: ="Chọn đơn vị tuổi"
                                IsSearchable: =false
                                Items: =BH_DM_PT_DONG
                                OnSelect: =Select(Parent)
                                PressedColor: =RGBA(72, 163, 62, 1)
                                PressedFill: =RGBA(255, 255, 255, 1)
                                SearchFields: =["cr282_ten_pt"]
                                SearchItems: =[]
                                SelectionColor: =RGBA(0, 0, 0, 1)
                                SelectionFill: =RGBA(214, 221, 224, 1)
                                Size: =11
                                Width: =175
                                X: =1374
                                ZIndex: =29

                            Btn_SuaLT As button:
                                FontWeight: =FontWeight.Bold
                                OnSelect: |-
                                    =If(
                                        Or(maLTAdded<>"",maLTUpdated<>""),
                                        Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                        UpdateIf(
                                            tmpLTCollect,
                                            cr282_id=ThisItem.cr282_id,
                                            {
                                                edited:1
                                            }
                                        );
                                        UpdateContext({
                                            maLTUpdated:ThisItem.cr282_id
                                        })
                                    )
                                Size: =11
                                Text: ="Sửa"
                                Visible: =ThisItem.edited=0
                                Width: =102
                                X: =1561
                                ZIndex: =30

                            Btn_XoaLT As button:
                                FontWeight: =FontWeight.Bold
                                OnSelect: |-
                                    =If(
                                        Or(maLTAdded<>"",maLTUpdated<>""),
                                        Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                        Refresh(DL_SAN_PHAM_LOAITRU);
                                        RemoveIf(
                                            DL_SAN_PHAM_LOAITRU,
                                            ID=ThisItem.cr282_id
                                        );
                                        Remove(tmpLTCollect,ThisItem);
                                        Notify("Xóa dữ liệu thành công", NotificationType.Success,800)
                                    )
                                Size: =11
                                Text: ="Xóa"
                                Visible: =ThisItem.edited=0
                                Width: =102
                                X: =1712
                                ZIndex: =31

                            Btn_LuuLT As button:
                                FontWeight: =FontWeight.Bold
                                OnSelect: |-
                                    =If(
                                        !IsEmpty(DL_SAN_PHAM_LOAITRU),
                                        RemoveIf(
                                            DL_SAN_PHAM_LOAITRU,
                                            ID = ThisItem.cr282_id
                                        );
                                        
                                    );
                                    ForAll(
                                        CbxCTLT.SelectedItems As ct,
                                        If(
                                            DoTuoi_1.Value=true && DoTuoi_1.Visible=true && CountRows(CbxDoTuoiLT.SelectedItems)>0,
                                            ForAll(
                                                CbxDoTuoiLT.SelectedItems As dt,
                                                If(
                                                    GioiTinh_1.Value=true && GioiTinh_1.Visible=true && CountRows(CbxGioiTinhLT.SelectedItems)>0,
                                                    ForAll(
                                                        CbxGioiTinhLT.SelectedItems As gt,
                                                        If(
                                                            NganhNghe_1.Value=true && NganhNghe_1.Visible=true && CountRows(CbxNganhLT.SelectedItems)>0,
                                                            ForAll(
                                                                CbxNganhLT.SelectedItems As nn,
                                                                If(
                                                                    BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoTienLT.SelectedItems As st,
                                                                        If(
                                                                            BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxSoNguoiLT.SelectedItems As sn,
                                                                                If(
                                                                                    BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxThoiHanLT.SelectedItems As th,
                                                                                        If(
                                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                            ForAll(
                                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                                Patch(
                                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                    {
                                                                                                        ID: ThisItem.cr282_id,
                                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                        MO_TA: dt.MO_TA,
                                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                        TEN_PT: pt.TEN_PT
                                                                                                    }
                                                                                                )
                                                                                            ),
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: dt.MO_TA,
                                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                    TEN_PT: ""
                                                                                                }
                                                                                            )
                                                                                        )
                                                                                    ),
                                                                                    If(
                                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                        ForAll(
                                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: dt.MO_TA,
                                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                    TEN_THOI_HAN: "",
                                                                                                    TEN_PT: pt.TEN_PT
                                                                                                }
                                                                                            )
                                                                                        ),
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: "",
                                                                                                TEN_PT: ""
                                                                                            }
                                                                                        )
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxThoiHanLT.SelectedItems As th,
                                                                                    If(
                                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                        ForAll(
                                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: dt.MO_TA,
                                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                    TEN_SO_NGUOI: "",
                                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                    TEN_PT: pt.TEN_PT
                                                                                                }
                                                                                            )
                                                                                        ),
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: "",
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: ""
                                                                                            }
                                                                                        )
                                                                                    )
                                                                                ),
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: "",
                                                                                                TEN_THOI_HAN: "",
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxSoNguoiLT.SelectedItems As sn,
                                                                            If(
                                                                                BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxThoiHanLT.SelectedItems As th,
                                                                                    If(
                                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                        ForAll(
                                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: dt.MO_TA,
                                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                                    TEN_SOTIEN: "",
                                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                    TEN_PT: pt.TEN_PT
                                                                                                }
                                                                                            )
                                                                                        ),
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: "",
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: ""
                                                                                            }
                                                                                        )
                                                                                    )
                                                                                ),
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: "",
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: "",
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: "",
                                                                                                TEN_SO_NGUOI: "",
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoTienLT.SelectedItems As st,
                                                                    If(
                                                                        BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxSoNguoiLT.SelectedItems As sn,
                                                                            If(
                                                                                BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxThoiHanLT.SelectedItems As th,
                                                                                    If(
                                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                        ForAll(
                                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: dt.MO_TA,
                                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                    TEN_NGANH: "",
                                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                    TEN_PT: pt.TEN_PT
                                                                                                }
                                                                                            )
                                                                                        ),
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: "",
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: ""
                                                                                            }
                                                                                        )
                                                                                    )
                                                                                ),
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: "",
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: "",
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: "",
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: "",
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoNguoiLT.SelectedItems As sn,
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: "",
                                                                                                TEN_SOTIEN: "",
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: dt.MO_TA,
                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        NganhNghe_1.Value=true && NganhNghe_1.Visible=true && CountRows(CbxNganhLT.SelectedItems)>0,
                                                        ForAll(
                                                            CbxNganhLT.SelectedItems As nn,
                                                            If(
                                                                BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoTienLT.SelectedItems As st,
                                                                    If(
                                                                        BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxSoNguoiLT.SelectedItems As sn,
                                                                            If(
                                                                                BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxThoiHanLT.SelectedItems As th,
                                                                                    If(
                                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                        ForAll(
                                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: dt.MO_TA,
                                                                                                    TEN_GIOI_TINH: "",
                                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                    TEN_PT: pt.TEN_PT
                                                                                                }
                                                                                            )
                                                                                        ),
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: "",
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: ""
                                                                                            }
                                                                                        )
                                                                                    )
                                                                                ),
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: "",
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: "",
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: "",
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: "",
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoNguoiLT.SelectedItems As sn,
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: "",
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: "",
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: dt.MO_TA,
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                            ForAll(
                                                                CbxSoTienLT.SelectedItems As st,
                                                                If(
                                                                    BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoNguoiLT.SelectedItems As sn,
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: dt.MO_TA,
                                                                                                TEN_GIOI_TINH: "",
                                                                                                TEN_NGANH: "",
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: dt.MO_TA,
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoNguoiLT.SelectedItems As sn,
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: dt.MO_TA,
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: dt.MO_TA,
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxThoiHanLT.SelectedItems As th,
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: dt.MO_TA,
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: dt.MO_TA,
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: dt.MO_TA,
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: pt.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: dt.MO_TA,
                                                                                TEN_GIOI_TINH: "",
                                                                                TEN_NGANH: "",
                                                                                TEN_SOTIEN: "",
                                                                                TEN_SO_NGUOI: "",
                                                                                TEN_THOI_HAN: "",
                                                                                TEN_PT: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            ),
                                            If(
                                                GioiTinh_1.Value=true && GioiTinh_1.Visible=true,
                                                ForAll(
                                                    CbxGioiTinhLT.SelectedItems As gt,
                                                    If(
                                                        NganhNghe_1.Value=true && NganhNghe_1.Visible=true && CountRows(CbxNganhLT.SelectedItems)>0,
                                                        ForAll(
                                                            CbxNganhLT.SelectedItems As nn,
                                                            If(
                                                                BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoTienLT.SelectedItems As st,
                                                                    If(
                                                                        BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxSoNguoiLT.SelectedItems As sn,
                                                                            If(
                                                                                BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxThoiHanLT.SelectedItems As th,
                                                                                    If(
                                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                        ForAll(
                                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                                            Patch(
                                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                                {
                                                                                                    ID: ThisItem.cr282_id,
                                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                    MO_TA: "",
                                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                    TEN_PT: pt.TEN_PT
                                                                                                }
                                                                                            )
                                                                                        ),
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: "",
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: ""
                                                                                            }
                                                                                        )
                                                                                    )
                                                                                ),
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: "",
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: "",
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: "",
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: "",
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoNguoiLT.SelectedItems As sn,
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: "",
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: "",
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                            ForAll(
                                                                CbxSoTienLT.SelectedItems As st,
                                                                If(
                                                                    BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoNguoiLT.SelectedItems As sn,
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: "",
                                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                                TEN_NGANH: "",
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoNguoiLT.SelectedItems As sn,
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxThoiHanLT.SelectedItems As th,
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: pt.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: "",
                                                                                TEN_GIOI_TINH: gt.TEN_GIOI_TINH,
                                                                                TEN_NGANH: "",
                                                                                TEN_SOTIEN: "",
                                                                                TEN_SO_NGUOI: "",
                                                                                TEN_THOI_HAN: "",
                                                                                TEN_PT: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                ),
                                                If(
                                                    NganhNghe_1.Value=true && NganhNghe_1.Visible=true && CountRows(CbxNganhLT.SelectedItems)>0,
                                                    ForAll(
                                                        CbxNganhLT.SelectedItems As nn,
                                                        If(
                                                            BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                            ForAll(
                                                                CbxSoTienLT.SelectedItems As st,
                                                                If(
                                                                    BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxSoNguoiLT.SelectedItems As sn,
                                                                        If(
                                                                            BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxThoiHanLT.SelectedItems As th,
                                                                                If(
                                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                    ForAll(
                                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                                        Patch(
                                                                                            DL_SAN_PHAM_LOAITRU,
                                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                            {
                                                                                                ID: ThisItem.cr282_id,
                                                                                                MA_SAN_PHAM: valMaSP,
                                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                                MO_TA: "",
                                                                                                TEN_GIOI_TINH: "",
                                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                                TEN_PT: pt.TEN_PT
                                                                                            }
                                                                                        )
                                                                                    ),
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: ""
                                                                                        }
                                                                                    )
                                                                                )
                                                                            ),
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: "",
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: "",
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoNguoiLT.SelectedItems As sn,
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: nn.TEN_NGANH,
                                                                                            TEN_SOTIEN: "",
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxThoiHanLT.SelectedItems As th,
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: nn.TEN_NGANH,
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: nn.TEN_NGANH,
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: pt.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: "",
                                                                                TEN_GIOI_TINH: "",
                                                                                TEN_NGANH: nn.TEN_NGANH,
                                                                                TEN_SOTIEN: "",
                                                                                TEN_SO_NGUOI: "",
                                                                                TEN_THOI_HAN: "",
                                                                                TEN_PT: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    ),
                                                    If(
                                                        BH_SoTien_1.Value=true && BH_SoTien_1.Visible=true && CountRows(CbxSoTienLT.SelectedItems)>0,
                                                        ForAll(
                                                            CbxSoTienLT.SelectedItems As st,
                                                            If(
                                                                BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxSoNguoiLT.SelectedItems As sn,
                                                                    If(
                                                                        BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxThoiHanLT.SelectedItems As th,
                                                                            If(
                                                                                BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                                ForAll(
                                                                                    CbxPhuongThucLT.SelectedItems As pt,
                                                                                    Patch(
                                                                                        DL_SAN_PHAM_LOAITRU,
                                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                        {
                                                                                            ID: ThisItem.cr282_id,
                                                                                            MA_SAN_PHAM: valMaSP,
                                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                            MO_TA: "",
                                                                                            TEN_GIOI_TINH: "",
                                                                                            TEN_NGANH: "",
                                                                                            TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                            TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                            TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                            TEN_PT: pt.TEN_PT
                                                                                        }
                                                                                    )
                                                                                ),
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: ""
                                                                                    }
                                                                                )
                                                                            )
                                                                        ),
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: "",
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxThoiHanLT.SelectedItems As th,
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                        TEN_SO_NGUOI: "",
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: pt.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: "",
                                                                                TEN_GIOI_TINH: "",
                                                                                TEN_NGANH: "",
                                                                                TEN_SOTIEN: st.TEN_SOTIEN,
                                                                                TEN_SO_NGUOI: "",
                                                                                TEN_THOI_HAN: "",
                                                                                TEN_PT: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        ),
                                                        If(
                                                            BH_SoNguoi_1.Value=true && BH_SoNguoi_1.Visible=true && CountRows(CbxSoNguoiLT.SelectedItems)>0,
                                                            ForAll(
                                                                CbxSoNguoiLT.SelectedItems As sn,
                                                                If(
                                                                    BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxThoiHanLT.SelectedItems As th,
                                                                        If(
                                                                            BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                            ForAll(
                                                                                CbxPhuongThucLT.SelectedItems As pt,
                                                                                Patch(
                                                                                    DL_SAN_PHAM_LOAITRU,
                                                                                    Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                    {
                                                                                        ID: ThisItem.cr282_id,
                                                                                        MA_SAN_PHAM: valMaSP,
                                                                                        TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                        TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                        TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                        MO_TA: "",
                                                                                        TEN_GIOI_TINH: "",
                                                                                        TEN_NGANH: "",
                                                                                        TEN_SOTIEN: "",
                                                                                        TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                        TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                        TEN_PT: pt.TEN_PT
                                                                                    }
                                                                                )
                                                                            ),
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                    TEN_PT: ""
                                                                                }
                                                                            )
                                                                        )
                                                                    ),
                                                                    If(
                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                    TEN_THOI_HAN: "",
                                                                                    TEN_PT: pt.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: "",
                                                                                TEN_GIOI_TINH: "",
                                                                                TEN_NGANH: "",
                                                                                TEN_SOTIEN: "",
                                                                                TEN_SO_NGUOI: sn.TEN_SO_NGUOI,
                                                                                TEN_THOI_HAN: "",
                                                                                TEN_PT: ""
                                                                            }
                                                                        )
                                                                    )
                                                                )
                                                            ),
                                                            If(
                                                                BH_ThoiHan_1.Value=true && BH_ThoiHan_1.Visible=true && CountRows(CbxThoiHanLT.SelectedItems)>0,
                                                                ForAll(
                                                                    CbxThoiHanLT.SelectedItems As th,
                                                                    If(
                                                                        BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                        ForAll(
                                                                            CbxPhuongThucLT.SelectedItems As pt,
                                                                            Patch(
                                                                                DL_SAN_PHAM_LOAITRU,
                                                                                Defaults(DL_SAN_PHAM_LOAITRU),
                                                                                {
                                                                                    ID: ThisItem.cr282_id,
                                                                                    MA_SAN_PHAM: valMaSP,
                                                                                    TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                    TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                    TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                    MO_TA: "",
                                                                                    TEN_GIOI_TINH: "",
                                                                                    TEN_NGANH: "",
                                                                                    TEN_SOTIEN: "",
                                                                                    TEN_SO_NGUOI: "",
                                                                                    TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                    TEN_PT: pt.TEN_PT
                                                                                }
                                                                            )
                                                                        ),
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: "",
                                                                                TEN_GIOI_TINH: "",
                                                                                TEN_NGANH: "",
                                                                                TEN_SOTIEN: "",
                                                                                TEN_SO_NGUOI: "",
                                                                                TEN_THOI_HAN: th.TEN_THOI_HAN,
                                                                                TEN_PT: ""
                                                                            }
                                                                        )
                                                                    )
                                                                ),
                                                                If(
                                                                    BH_PhuongThuc_1.Value=true && BH_PhuongThuc_1.Visible=true && CountRows(CbxPhuongThucLT.SelectedItems)>0,
                                                                    ForAll(
                                                                        CbxPhuongThucLT.SelectedItems As pt,
                                                                        Patch(
                                                                            DL_SAN_PHAM_LOAITRU,
                                                                            Defaults(DL_SAN_PHAM_LOAITRU),
                                                                            {
                                                                                ID: ThisItem.cr282_id,
                                                                                MA_SAN_PHAM: valMaSP,
                                                                                TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                                TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                                TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                                MO_TA: "",
                                                                                TEN_GIOI_TINH: "",
                                                                                TEN_NGANH: "",
                                                                                TEN_SOTIEN: "",
                                                                                TEN_SO_NGUOI: "",
                                                                                TEN_THOI_HAN: "",
                                                                                TEN_PT: pt.TEN_PT
                                                                            }
                                                                        )
                                                                    ),
                                                                    Patch(
                                                                        DL_SAN_PHAM_LOAITRU,
                                                                        Defaults(DL_SAN_PHAM_LOAITRU),
                                                                        {
                                                                            ID: ThisItem.cr282_id,
                                                                            MA_SAN_PHAM: valMaSP,
                                                                            TEN_CHUONG_TRINH: ct.TEN_CHUONG_TRINH,
                                                                            TEN_NHOM_TP: DsNhomLT.Selected.MA_NHOM_TINHPHI,
                                                                            TEN_PHAMVI: DsPhamViLT.Selected.TEN_PHAMVI,
                                                                            MO_TA: "",
                                                                            TEN_GIOI_TINH: "",
                                                                            TEN_NGANH: "",
                                                                            TEN_SOTIEN: "",
                                                                            TEN_SO_NGUOI: "",
                                                                            TEN_THOI_HAN: "",
                                                                            TEN_PT: ""
                                                                        }
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    );
                                    Select(IconTaiLaiLT);
                                Size: =11
                                Text: ="Lưu"
                                Visible: =ThisItem.edited=1
                                Width: =102
                                X: =1561
                                ZIndex: =32

                            Btn_HuyLT As button:
                                FontWeight: =FontWeight.Bold
                                OnSelect: |-
                                    =If(
                                        ThisItem.cr282_id=maLTAdded,
                                        Remove(tmpLTCollect,ThisItem),
                                        UpdateIf(
                                            tmpLTCollect,
                                            cr282_id=ThisItem.cr282_id,
                                            {
                                                edited:0
                                            }
                                        )
                                    );
                                    UpdateContext({
                                        maLTAdded:"",
                                        maLTUpdated:""
                                    });
                                Size: =11
                                Text: ="Hủy"
                                Visible: =ThisItem.edited=1
                                Width: =102
                                X: =1712
                                ZIndex: =33

                        BadgeCanvas1_30 As Badge:
                            BasePaletteColor: =
                            Content: =""
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =41
                            Width: =1827
                            X: =0
                            Y: =82
                            ZIndex: =2

                        TextCanvas2_131 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Chương trình"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =96
                            X: =35
                            Y: =81
                            ZIndex: =3

                        TextCanvas2_134 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Nhóm tính phí"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =103
                            X: =185
                            Y: =81
                            ZIndex: =4

                        TextCanvas2_138 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Độ tuổi"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =60
                            X: =481
                            Y: =81
                            ZIndex: =5

                        TextCanvas2_137 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Phạm vi"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =64
                            X: =338
                            Y: =81
                            ZIndex: =9

                        TextCanvas2_139 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Giới tính"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =60
                            X: =638
                            Y: =81
                            ZIndex: =10

                        TextCanvas2_132 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Ngành nghề"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =96
                            X: =778
                            Y: =81
                            ZIndex: =11

                        TextCanvas2_140 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Số tiền"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =56
                            X: =958
                            Y: =81
                            ZIndex: =12

                        TextCanvas2_135 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Số người"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =80
                            X: =1104
                            Y: =81
                            ZIndex: =13

                        TextCanvas2_141 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Size: =14
                            Text: ="Thời hạn"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =80
                            X: =1258
                            Y: =83
                            ZIndex: =14

                        TextCanvas2_133 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =40
                            Size: =14
                            Text: ="Phương thức đóng phí"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =159
                            X: =1386
                            Y: =83
                            ZIndex: =15

                        TextCanvas2_136 As Text:
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =40
                            Size: =14
                            Text: ="Thao tác"
                            Weight: ='TextCanvas.Weight'.Bold
                            Width: =66
                            X: =1658
                            Y: =83
                            ZIndex: =16

                        ThemMoiLT As button:
                            Height: =30
                            OnSelect: |
                                =//RemoveIf(DL_SAN_PHAM_LOAITRU,true);
                                If(
                                    Or(maLTAdded<>"",maLTUpdated<>""),
                                    Select(IconTaiLaiLT),
                                    UpdateContext({
                                        idMaLT:If(
                                            CountIf(DL_SAN_PHAM_LOAITRU,true)=0,
                                            1,
                                            Value(Last(SortByColumns(DL_SAN_PHAM_LOAITRU,"cr282_id",SortOrder.Ascending)).ID)+1
                                        )
                                    });
                                    Collect(
                                        tmpLTCollect,
                                        {
                                            cr282_id:Text(idMaLT),
                                            edited:1
                                        }
                                    );
                                    UpdateContext({maLTAdded:Text(idMaLT)})
                                )
                            Size: =13
                            Text: ="Thêm mới"
                            Width: =96
                            Y: =45
                            ZIndex: =17

                        IconTaiLaiLT As icon.Sync:
                            Color: =RGBA(83, 144, 164, 1)
                            Height: =36
                            Icon: =Icon.Sync
                            OnSelect: |
                                =ClearCollect(
                                    tmpLTCollect,
                                    GroupBy(
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(DL_SAN_PHAM_LOAITRU,MA_SAN_PHAM=valMaSP),
                                                "cr282_ma_san_pham",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                        "cr282_id",
                                        "cr282_ma_san_pham",
                                        "cr282_ten_chuong_trinh",
                                        "cr282_ten_nhom_tp",
                                        "cr282_ten_phamvi",
                                        "cr282_mo_ta",
                                        "cr282_ten_gioi_tinh",
                                        "cr282_ten_nganh",
                                        "cr282_ten_sotien",
                                        "cr282_ten_so_nguoi",
                                        "cr282_ten_thoi_han",
                                        "cr282_ten_pt",
                                        "edited"
                                    ), 
                                    "cr282_id",
                                    "cr282_ma_san_pham",
                                    "cr282_ten_nhom_tp",
                                    "cr282_ten_phamvi",
                                    "edited","GROUP_COLS"
                                    )
                                );
                                UpdateContext(
                                    {
                                        maLTAdded: "",
                                        maLTUpdated: ""
                                    }
                                );
                            Tooltip: ="Tải lại"
                            Visible: =false
                            Width: =32
                            X: =233
                            Y: =45
                            ZIndex: =18

                        "'Label_4.1.3' As label":
                            Align: =Align.Justify
                            FontWeight: =FontWeight.Bold
                            Size: =11
                            Text: ="4.1.3. Thông tin loại trừ ma trận"
                            Width: =1207
                            ZIndex: =19

                IconTaiLaiBYT As icon.Sync:
                    Color: =RGBA(83, 144, 164, 1)
                    Height: =36
                    Icon: =Icon.Sync
                    OnSelect: |
                        =ClearCollect(
                            tmpBYTCollect,
                            GroupBy(
                                ShowColumns(
                                    AddColumns(
                                        SortByColumns(
                                            Filter(
                                                DL_SAN_PHAM_BANGYT,
                                                MA_SAN_PHAM = valMaSP
                                            ),
                                            "cr282_ma_san_pham",
                                            SortOrder.Ascending
                                        ),
                                        "edited",
                                        0
                                    ),
                                    "cr282_id",
                                    "cr282_ma_san_pham",
                                    "cr282_chuongtrinh_nhomtp",
                                    "cr282_ten_chuong_trinh",
                                    "cr282_nhom_tinh_phi",
                                    "cr282_ten_nhom_tp",
                                    "cr282_pham_vi_dl",
                                    "cr282_do_tuoi",
                                    "cr282_gioi_tinh",
                                    "cr282_nganh_nghe",
                                    "cr282_bh_sotien",
                                    "cr282_bh_songuoi",
                                    "cr282_bh_thoihan",
                                    "cr282_bh_phuong_thuc",
                                    "edited"
                                ),
                                "cr282_id",
                                "cr282_ma_san_pham",
                                "cr282_nhom_tinh_phi",
                                "cr282_pham_vi_dl",
                                "cr282_do_tuoi",
                                "cr282_gioi_tinh",
                                "cr282_nganh_nghe",
                                "cr282_bh_sotien",
                                "cr282_bh_songuoi",
                                "cr282_bh_thoihan",
                                "cr282_bh_phuong_thuc",
                                "edited",
                                "CHUONG_TRINH_GROUP"
                            )
                        );
                        UpdateContext(
                            {
                                maBYTAdded: "",
                                maBYTUpdated: ""
                            }
                        );
                    Tooltip: ="Tải lại"
                    Visible: =false
                    Width: =31
                    X: =407
                    Y: =40
                    ZIndex: =18

            CtnXuLyExcel As groupContainer.manualLayoutContainer:
                Height: =162
                Width: =1214
                X: =67
                Y: =788
                ZIndex: =2

                "'Label_4.1.4' As label":
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Text: ="4.1.4. Bảng phí"
                    Width: =1207
                    ZIndex: =1

                btnXuatFile As button:
                    DisplayMode: =If(!IsEmpty(Filter(DL_SAN_PHAM_MATRANPHI, MA_SAN_PHAM=valMaSP)), DisplayMode.Edit,DisplayMode.Disabled)
                    Fill: =RGBA(39, 113, 194, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =Clear(OldCollection);
                        Set(
                            varCheck_CT,
                            ChuongTrinh_1.Value
                        );
                        Set(
                            varCheck_NTP,
                            NhomTP_1.Value
                        );
                        Set(
                            varCheck_PV,
                            PVDiaLy_1.Value
                        );
                        Set(
                            varCheck_DT,
                            DoTuoi_1.Value
                        );
                        Set(
                            varCheck_GT,
                            GioiTinh_1.Value
                        );
                        Set(
                            varCheck_NN,
                            NganhNghe_1.Value
                        );
                        Set(
                            varCheck_ST,
                            BH_SoTien_1.Value
                        );
                        Set(
                            varCheck_SN,
                            BH_SoNguoi_1.Value
                        );
                        Set(
                            varCheck_TH,
                            BH_ThoiHan_1.Value
                        );
                        Set(
                            varCheck_PT,
                            BH_PhuongThuc_1.Value
                        );
                        Collect(
                            NewCollection,
                            {}
                        );
                        
                        Collect(
                            OldCollection,
                            {       MA_SAN_PHAM: "",
                                    MA_CHUONG_TRINH: "",
                                    TEN_SAN_PHAM: "",
                                    TEN_CHUONG_TRINH: "",
                                    NHOM_TINH_PHI: "",
                                    PHAMVI: "",
                                    DO_TUOI: "",
                                    GIOI_TINH: "",
                                    NGANH_NGHE: "",
                                    SOTIEN: "",
                                    SO_NGUOI: "",
                                    THOI_HAN: "",
                                    PHUONG_THUC: "",
                                    PHI: "",
                                    TY_LE: ""
                        
                            }
                        );
                        
                        
                        ClearCollect(
                           OldCollection,
                          ForAll(
                               Filter(
                                  DL_SAN_PHAM_MATRANPHI,
                                   MA_SAN_PHAM = valMaSP
                               ),
                               {    MA_SAN_PHAM: valMaSP,
                                    MA_CHUONG_TRINH: MA_CHUONG_TRINH,
                                    TEN_SAN_PHAM: valTenSP,
                                    TEN_CHUONG_TRINH: CHUONG_TRINH,
                                    NHOM_TINH_PHI: NHOM_TINH_PHI,
                                    PHAMVI: PHAM_VI_DL,
                                    DO_TUOI: DO_TUOI,
                                    GIOI_TINH: GIOI_TINH,
                                    NGANH_NGHE: NGANH_NGHE,
                                    SOTIEN: SO_TIEN,
                                    SO_NGUOI: SO_NGUOI,
                                    THOI_HAN: THOI_HAN,
                                    PHUONG_THUC: PHUONG_THUC_DP,
                                    PHI: "",
                                    TY_LE: ""
                            }
                           )
                        );
                        
                        ForAll(Filter(DL_SAN_PHAM_LOAITRU, MA_SAN_PHAM=valMaSP) As lt,
                        RemoveIf(OldCollection,
                            MA_SAN_PHAM=lt.MA_SAN_PHAM &&
                                 TEN_CHUONG_TRINH=lt.TEN_CHUONG_TRINH &&
                                 NHOM_TINH_PHI=lt.TEN_NHOM_TP &&
                                 PHAMVI=lt.TEN_PHAMVI &&
                                 DO_TUOI=lt.MO_TA &&
                                 GIOI_TINH=lt.TEN_GIOI_TINH &&
                                 NGANH_NGHE=lt.TEN_NGANH &&
                                 SOTIEN=lt.TEN_SOTIEN &&
                                 SO_NGUOI=lt.TEN_SO_NGUOI &&
                                 THOI_HAN=lt.TEN_THOI_HAN &&
                                 PHUONG_THUC=lt.TEN_PT
                        )
                        );
                        
                        ClearCollect(
                            NewCollection,
                            OldCollection
                        );
                        
                        
                        ExportToExcel.Run(
                            JSON(
                                NewCollection,
                                JSONFormat.IgnoreBinaryData// & JSONFormat.IgnoreUnsupportedTypes
                            )
                        );
                        //Download("https://5ddm0q.sharepoint.com/:x:/s/Test/EW4AFywm7c9EhhALbkXGoEEBKRl3CeUjPhJpm75mUbZ4Ug?e=ZyjhT1");
                    Size: =11
                    Text: ="Xuất file mẫu"
                    X: =28
                    Y: =65
                    ZIndex: =2

                Label2_3 As label:
                    Height: =53
                    Text: =gbl_var_excel_data
                    Visible: =false
                    Width: =208
                    X: =853
                    Y: =125
                    ZIndex: =4

                "gal_UL_Attachments As gallery.'BrowseLayout_Vertical_OneTextOneImageVariant_ver4.0'":
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =48
                    Items: =col_attachment
                    Layout: =Layout.Vertical
                    TemplatePadding: =0
                    TemplateSize: =48
                    Visible: =false
                    Width: =142
                    X: =685
                    Y: =146
                    ZIndex: =5

                    img_Data_Stream As image:
                        Height: =42
                        Image: =ThisItem.Value
                        OnSelect: =Select(Parent)
                        Width: =96
                        X: =46
                        ZIndex: =1

                    lbl_File_Name As label:
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =ThisItem.Name
                        VerticalAlign: =VerticalAlign.Top
                        Width: =Parent.TemplateWidth - img_Data_Stream.Width - 104
                        X: =img_Data_Stream.X + img_Data_Stream.Width + 24
                        Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
                        ZIndex: =2

                    Separator4 As rectangle:
                        Height: =1
                        OnSelect: =Select(Parent)
                        Width: =Parent.TemplateWidth
                        Y: =Parent.TemplateHeight - 1
                        ZIndex: =4

                att_attachExcel As attachments:
                    BorderColor: =
                    DisplayMode: =
                    Height: =91
                    IsInDataCard: =true
                    Items: =
                    NoAttachmentsText: ="Bảng phí"
                    OnAddFile: |+
                        =ClearCollect(col_attachment, Self.Attachments)
                        
                        
                        /*
                        Switch(Right(Last(Self.Attachments.Name).Name,4) = "xlsx", true, 
                        ClearCollect(col_attachment, Self.Attachments), Notify("Kindly Use the Provided Template", NotificationType.Warning);Set(gbl_var_reset, true);
                        Set(gbl_var_reset, false);)*/
                        
                        
                    OnRemoveFile: =ClearCollect(col_attachment, Self.Attachments)
                    PaddingBottom: =5
                    PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                    PaddingRight: =5
                    PaddingTop: =5
                    Reset: =gbl_var_reset
                    Size: =12
                    Tooltip: =
                    Width: =199
                    X: =291
                    Y: =34
                    ZIndex: =6

                ThemMoiCT_12 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =Clear(col_response);
                        Clear(col_attachment_flow);
                        Set(
                            gbl_var_spinner,
                            true
                        );
                        ForAll(
                            gal_UL_Attachments.AllItems,
                            Collect(
                                col_attachment_flow,
                                {
                                    Title: lbl_File_Name.Text,
                                    Datastream: img_Data_Stream.Image
                                }
                            )
                        );
                        Set(
                            gbl_var_excel_data,
                            ImportExcel.Run(
                                JSON(
                                    col_attachment_flow,
                                    JSONFormat.IncludeBinaryData
                                )
                            ).response
                        );
                        Set(
                            gbl_var_reset,
                            true
                        );
                        Set(
                            gbl_var_reset,
                            false
                        );
                        ClearCollect(
                            col_response,
                            MatchAll(
                                gbl_var_excel_data,
                                "(""ma_san_pham"":""(?<ma_san_pham>[^""]*)"",""ma_chuong_trinh"":""(?<ma_chuong_trinh>[^""]*)"",""ten_san_pham"":""(?<ten_san_pham>[^""]*)"",""ten_chuong_trinh"":""(?<ten_chuong_trinh>[^""]*)"",""nhom_tinh_phi"":""(?<nhom_tinh_phi>[^""]*)"",""phamvi"":""(?<phamvi>[^""]*)"",""do_tuoi"":""(?<do_tuoi>[^""]*)"",""gioi_tinh"":""(?<gioi_tinh>[^""]*)"",""nganh_nghe"":""(?<nganh_nghe>[^""]*)"",""so_tien"":""(?<so_tien>[^""]*)"",""so_nguoi"":""(?<so_nguoi>[^""]*)"",""thoi_han"":""(?<thoi_han>[^""]*)"",""phuong_thuc"":""(?<phuong_thuc>[^""]*)"",""phi"":""(?<phi>[^""]*)"",""ty_le"":""(?<ty_le>[^""]*)"")"
                            )
                        );
                        // XOÁ DỮ LIỆU CŨ
                         If(CountRows(col_response) > 0,
                         RemoveIf(
                                DL_CHUONG_TRINH_BANG_PHIS,
                                MA_SAN_PHAM =valMaSP
                            )
                         );
                        // THÊM DỮ LIỆU MỚI    
                        ForAll(
                            col_response As x,
                            Patch(
                                DL_CHUONG_TRINH_BANG_PHIS,
                                Defaults(DL_CHUONG_TRINH_BANG_PHIS),
                                {
                                    MA_BANG_PHI: Max(DL_CHUONG_TRINH_BANG_PHIS, MA_BANG_PHI) + 1,
                                    MA_SAN_PHAM: valMaSP,
                                    MA_CHUONG_TRINH:x.ma_chuong_trinh,
                                    TEN_SAN_PHAM:x.ten_san_pham,
                                    TEN_CHUONG_TRINH:x.ten_chuong_trinh,
                                    NHOM_TINH_PHI:x.nhom_tinh_phi,
                                    MA_PHAMVI_DIALY:x.phamvi,
                                    MA_DO_TUOI:x.do_tuoi,
                                    MA_GIOI_TINH:x.gioi_tinh,
                                    SO_TIEN:x.so_tien,
                                    PHI_BH:Value(x.phi),
                                    TYLE_PHI:Value(x.ty_le),
                                    NHOM_NGANH_NGHE:x.nganh_nghe,
                                    PTHUC_DONG_PHI:x.phuong_thuc,
                                    THOI_HAN_BH:x.thoi_han
                                }
                            )
                        );
                        Notify("Nhận dữ liệu từ file excel thành công", NotificationType.Success,800);
                        
                        Set(
                            gbl_var_spinner,
                            false
                        );
                    Size: =11
                    Text: ="Nhận file excel"
                    X: =507
                    Y: =61
                    ZIndex: =8

        DataCard5_1 As dataCard.blankCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =951
            Width: =1366
            X: =0
            Y: =3
            ZIndex: =5

            "'4.2Giamtruphi_2' As groupContainer.manualLayoutContainer":
                Height: =442
                Width: =1214
                X: =67
                ZIndex: =1

                GalleryCT_5 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =310
                    Items: =tmpGPCCollect
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =40
                    Width: =1208
                    Y: =116
                    ZIndex: =1

                    Btn_SuaCT_5 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedGP<>"",maUpdatedGP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpGPCCollect,
                                    cr282_id_giamphi=ThisItem.cr282_id_giamphi,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdatedGP:ThisItem.cr282_id_giamphi
                                })
                            )
                        Size: =13
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1016
                        ZIndex: =17

                    Btn_XoaCT_5 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedGP<>"",maUpdatedGP<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_GPS);
                                RemoveIf(
                                    DL_SAN_PHAM_GPS,
                                    ID_GIAMPHI=ThisItem.cr282_id_giamphi
                                );
                                Remove(tmpGPCCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800) 
                            )
                        Size: =13
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1103
                        ZIndex: =18

                    Btn_LuuCT_5 As button:
                        OnSelect: |
                            =
                                If( ThisItem.cr282_id_giamphi=maAddedGP,
                                    Patch(
                                        DL_SAN_PHAM_GPS,
                                        {
                                            ID_GIAMPHI:ThisItem.cr282_id_giamphi,
                                            MA_SAN_PHAM:valMaSP,
                                            THONG_TIN:TxtThongtin_1.Text,
                                            MO_TA:TxtMota_2.Text,
                                            SO_TIEN:Value(TxtSo_tien_2.Text),
                                            DONVI_TIEN: TxtDonvi_tien_2.Text,
                                            TY_LE:TxtTy_le_2.Text
                                        }
                                    ),
                                    UpdateIf(
                                        DL_SAN_PHAM_GPS,
                                        ID_GIAMPHI=ThisItem.cr282_id_giamphi,
                                        {
                                            THONG_TIN:TxtThongtin_1.Text,
                                            MA_SAN_PHAM:valMaSP,
                                            MO_TA:TxtMota_2.Text,
                                            SO_TIEN:Value(TxtSo_tien_2.Text),
                                            DONVI_TIEN: TxtDonvi_tien_2.Text,
                                            TY_LE:TxtTy_le_2.Text
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpGPCCollect,
                                    cr282_id_giamphi=ThisItem.cr282_id_giamphi,
                                    {
                                            cr282_thong_tin:TxtThongtin_1.Text,
                                            cr282_mo_ta:TxtMota_2.Text,
                                            cr282_so_tien:Value(TxtSo_tien_2.Text),
                                            cr282_donvi_tien: TxtDonvi_tien_2.Text,
                                            cr282_ty_le:TxtTy_le_2.Text,
                                        edited:0
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpGPCCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(DL_SAN_PHAM_GPS,MA_SAN_PHAM=valMaSP),
                                                "cr282_id_giamphi",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                    "cr282_id_giamphi",
                                    "cr282_ma_san_pham",
                                    "cr282_thong_tin",
                                    "cr282_mo_ta",
                                    "cr282_so_tien",
                                    "cr282_donvi_tien",
                                    "cr282_ty_le",
                                    "edited"
                                    )
                                );
                                UpdateContext({
                                    maAddedGP:"",
                                    maUpdatedGP:""
                                });
                        Size: =13
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1016
                        ZIndex: =19

                    Btn_HuyCT_5 As button:
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_id_giamphi=maAddedGP,
                                Remove(tmpGPCCollect,ThisItem),
                                UpdateIf(
                                    tmpGPCCollect,
                                    cr282_id_giamphi=ThisItem.cr282_id_giamphi,
                                    {
                                        edited:0
                                    }
                                )
                            );
                            UpdateContext({maAddedGP:"",maUpdatedGP:""});
                        Size: =13
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1103
                        ZIndex: =20

                    TxtID_GP_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_id_giamphi
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Visible: =false
                        Width: =134
                        X: =3
                        ZIndex: =21

                    TxtThongtin_1 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_thong_tin
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Width: =205
                        ZIndex: =22

                    TxtMota_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_mo_ta
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Width: =241
                        X: =205
                        ZIndex: =23

                    TxtSo_tien_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_so_tien
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        Format: =TextFormat.Number
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Width: =138
                        X: =446
                        ZIndex: =24

                    TxtDonvi_tien_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_donvi_tien
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Width: =202
                        X: =584
                        ZIndex: =25

                    TxtTy_le_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_ty_le
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Width: =191
                        X: =786
                        ZIndex: =26

                BadgeCanvas1_20 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =30
                    Visible: =true
                    Width: =1197
                    X: =0
                    Y: =86
                    ZIndex: =2

                TextCanvas2_81 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =32
                    Size: =14
                    Text: ="Thông tin"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =204
                    X: =0
                    Y: =86
                    ZIndex: =3

                TextCanvas2_82 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =30
                    Size: =14
                    Text: ="Mô tả"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =246
                    X: =204
                    Y: =86
                    ZIndex: =4

                TextCanvas2_84 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =32
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =207
                    X: =990
                    Y: =84
                    ZIndex: =5

                ThemMoiCT_5 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =If( Or(maAddedGP<>"",maUpdatedGP<>""),
                            Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                            UpdateContext({
                                idMa:If(
                                    CountRows(tmpGPCCollect) = 0,
                                    Max(DL_SAN_PHAM_GPS, ID_GIAMPHI) + 1,
                                    Max(DL_SAN_PHAM_GPS, ID_GIAMPHI) + 1
                                )
                            });
                            Collect(
                                tmpGPCCollect,
                                {
                                    cr282_id_giamphi:Text(idMa),
                                    cr282_ma_san_pham:valMaSP,
                                    cr282_thong_tin:"",
                                    cr282_mo_ta:"",
                                    cr282_so_tien:0,
                                    cr282_donvi_tien:"",
                                    cr282_donvi_ty_le:"",
                                    edited:1
                                }
                            );
                          UpdateContext({maAddedGP:Text(idMa)})
                        )
                    Size: =11
                    Text: ="Thêm mới"
                    Width: =96
                    X: =5
                    Y: =45
                    ZIndex: =11

                TextCanvas2_85 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =34
                    Size: =14
                    Text: ="Số tiền"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =136
                    X: =450
                    Y: =86
                    ZIndex: =14

                TextCanvas2_86 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =31
                    Size: =14
                    Text: ="Đơn vị tiền"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =199
                    X: =586
                    Y: =86
                    ZIndex: =15

                TextCanvas2_83 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =32
                    Size: =14
                    Text: ="Tỷ lệ"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =205
                    X: =785
                    Y: =84
                    ZIndex: =16

                Label2 As label:
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="4.2 Thông tin giảm trừ phí"
                    Width: =1197
                    ZIndex: =17

                IconTaiLaiGiamTru As icon.Sync:
                    Color: =RGBA(83, 144, 164, 1)
                    Height: =36
                    Icon: =Icon.Sync
                    OnSelect: |
                        =ClearCollect(
                            tmpGPCCollect,
                            ShowColumns(
                                AddColumns(
                                    SortByColumns(
                                        Filter(
                                            DL_SAN_PHAM_GPS,
                                            MA_SAN_PHAM = valMaSP
                                        ),
                                        "cr282_id_giamphi",
                                        SortOrder.Ascending
                                    ),
                                    "edited",
                                    0
                                ),
                                "cr282_id_giamphi",
                                "cr282_ma_san_pham",
                                "cr282_thong_tin",
                                "cr282_mo_ta",
                                "cr282_so_tien",
                                "cr282_donvi_tien",
                                "cr282_ty_le",
                                "edited"
                            )
                        );
                        UpdateContext(
                            {
                                maAddedGP: "",
                                maUpdatedGP: ""
                            }
                        );
                    Tooltip: ="Tải lại"
                    Visible: =false
                    Width: =32
                    X: =192
                    Y: =48
                    ZIndex: =18

            "'4.3Thongtinphikhac' As groupContainer.manualLayoutContainer":
                Height: =472
                Width: =1214
                X: =67
                Y: =452
                ZIndex: =2

                GalleryCT_4 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =257
                    Items: =tmpPhiKhacCollect
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    NavigationStep: =0
                    TemplateSize: =40
                    Width: =1214
                    Y: =122
                    ZIndex: =1

                    Btn_SuaCT_4 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedPhiKhac<>"",maUpdatedPhiKhac<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                UpdateIf(
                                    tmpPhiKhacCollect,
                                    cr282_id=ThisItem.cr282_id,
                                    {
                                        edited:1
                                    }
                                );
                                UpdateContext({
                                    maUpdatedPhiKhac:ThisItem.cr282_id
                                })
                            )
                        Size: =13
                        Text: ="Sửa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1025
                        ZIndex: =17

                    Btn_XoaCT_4 As button:
                        OnSelect: |-
                            =If(
                                Or(maAddedPhiKhac<>"",maAddedPhiKhac<>""),
                                Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                                Refresh(DL_SAN_PHAM_PHIKHACS);
                                RemoveIf(
                                    DL_SAN_PHAM_PHIKHACS,
                                    ID=ThisItem.cr282_id
                                );
                                Remove(tmpPhiKhacCollect,ThisItem);
                                Notify("Xóa dữ liệu thành công", NotificationType.Success,800) 
                            )
                        Size: =13
                        Text: ="Xóa"
                        Visible: =ThisItem.edited=0
                        Width: =68
                        X: =1115
                        ZIndex: =18

                    Btn_LuuCT_4 As button:
                        OnSelect: |
                            =
                                If( ThisItem.cr282_id=maAddedPhiKhac,
                                    Patch(
                                        DL_SAN_PHAM_PHIKHACS,
                                        {
                                            ID:ThisItem.cr282_id,
                                            NHOM_THONG_TIN:CbxNhom_thongtin.Selected.MA_YEU_TO ,
                                            MA_SAN_PHAM:valMaSP,
                                            MO_TA:TxtMota.Text
                                        }
                                    ),
                                    UpdateIf(
                                        DL_SAN_PHAM_PHIKHACS,
                                        ID=ThisItem.cr282_id,
                                        {
                                            NHOM_THONG_TIN:CbxNhom_thongtin.Selected.MA_YEU_TO ,
                                            MA_SAN_PHAM:valMaSP,
                                            MO_TA:TxtMota.Text
                                        }
                                    )
                                );
                                UpdateIf(
                                    tmpPhiKhacCollect,
                                    cr282_id=ThisItem.cr282_id,
                                    {
                                           cr282_nhom_thong_tin:CbxNhom_thongtin.Selected.MA_YEU_TO,
                                           cr282_mo_ta: TxtMota.Text,
                                           cr282_ma_san_pham: valMaSP
                                    }
                                );
                                Notify("Lưu dữ liệu thành công", NotificationType.Success,800);
                                ClearCollect(
                                    tmpPhiKhacCollect,
                                    ShowColumns(
                                        AddColumns(
                                            SortByColumns(
                                                Filter(DL_SAN_PHAM_PHIKHACS,MA_SAN_PHAM= valMaSP),
                            
                                                "cr282_id",
                                                SortOrder.Ascending
                                            ),
                                            "edited",
                                            0
                                        ),
                                    "cr282_id",
                                    "cr282_ma_san_pham",
                                    "cr282_nhom_thong_tin",
                                    "cr282_mo_ta",
                                    "edited"
                                    )
                                );
                                UpdateContext({
                                    maAddedPhiKhac:"",
                                    maUpdatedPhiKhac:""
                                });
                        Size: =13
                        Text: ="Lưu"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1025
                        ZIndex: =19

                    Btn_HuyCT_4 As button:
                        OnSelect: |-
                            =If(
                                ThisItem.cr282_id=maAddedPhiKhac,
                                Remove(tmpPhiKhacCollect,ThisItem),
                                UpdateIf(
                                    tmpPhiKhacCollect,
                                    cr282_id=ThisItem.cr282_id,
                                    {
                                        edited:0
                                    }
                                )
                            );
                             Set(  maAddedPhiKhac, "");
                             Set(  maUpdatedPhiKhac,"");
                        Size: =13
                        Text: ="Hủy"
                        Visible: =ThisItem.edited=1
                        Width: =68
                        X: =1115
                        ZIndex: =20

                    TxtID_2 As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_id
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        Visible: =false
                        Width: =134
                        X: =3
                        ZIndex: =21

                    TxtMota As text:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        Default: =ThisItem.cr282_mo_ta
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        OnChange: =
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Width: =558
                        X: =451
                        ZIndex: =23

                    CbxNhom_thongtin As combobox:
                        BorderColor: =RGBA(72, 163, 62, 1)
                        ChevronBackground: =RGBA(255, 255, 255, 1)
                        ChevronDisabledBackground: =RGBA(180, 214, 250, 1)
                        ChevronDisabledFill: =RGBA(255, 255, 255, 1)
                        ChevronFill: =RGBA(72, 163, 62, 1)
                        ChevronHoverBackground: =RGBA(255, 255, 255, 1)
                        ChevronHoverFill: =RGBA(72, 163, 62, 1)
                        DefaultSelectedItems: =LookUp(DM_YEUTO_AH_PHIS, MA_YEU_TO =ThisItem.cr282_nhom_thong_tin)
                        DisabledBorderColor: =RGBA(180, 214, 250, 1)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayFields: =["cr282_ten_yeu_to"]
                        DisplayMode: =If(ThisItem.edited=0,DisplayMode.Disabled,DisplayMode.Edit) 
                        HoverBorderColor: =RGBA(9, 33, 98, 1)
                        HoverFill: =RGBA(180, 214, 250, 1)
                        InputTextPlaceholder: ="Chọn nhóm quyền lợi"
                        IsSearchable: =false
                        Items: =Filter(DM_YEUTO_AH_PHIS, LHNV = "Sức khoẻ")
                        OnSelect: =Select(Parent)
                        PressedColor: =RGBA(72, 163, 62, 1)
                        PressedFill: =RGBA(255, 255, 255, 1)
                        SearchFields: =["cr282_ten_yeu_to"]
                        SearchItems: =[]
                        SelectionColor: =RGBA(0, 0, 0, 1)
                        SelectionFill: =RGBA(214, 221, 224, 1)
                        SelectMultiple: =false
                        Width: =451
                        ZIndex: =24

                BadgeCanvas1_23 As Badge:
                    BasePaletteColor: =
                    Content: =""
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =27
                    Visible: =true
                    Width: =1198
                    X: =0
                    Y: =95
                    ZIndex: =2

                TextCanvas2_95 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =26
                    Size: =14
                    Text: ="Nhóm thông tin"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =454
                    X: =0
                    Y: =95
                    ZIndex: =3

                TextCanvas2_94 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =26
                    Size: =14
                    Text: ="Mô tả"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =556
                    X: =447
                    Y: =95
                    ZIndex: =4

                TextCanvas2_96 As Text:
                    Align: ='TextCanvas.Align'.Center
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =26
                    Size: =14
                    Text: ="Thao tác"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =185
                    X: =1004
                    Y: =95
                    ZIndex: =5

                ThemMoiCT_4 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |
                        =If( Or(maAddedPhiKhac<>"",maUpdatedPhiKhac<>""),
                            Notify("Có dữ liệu chưa được lưu",NotificationType.Warning,800),
                            UpdateContext({
                                idMa:If(
                                    CountRows(tmpPhiKhacCollect) = 0,
                                    Max(DL_SAN_PHAM_PHIKHACS, ID) + 1,
                                    Max(DL_SAN_PHAM_PHIKHACS, ID) + 1
                                )
                            });
                            Collect(
                                tmpPhiKhacCollect,
                                {
                                    cr282_id:Text(idMa),
                                    cr282_ma_san_pham:valMaSP,
                                    cr282_nhom_thong_tin:"",
                                    cr282_mo_ta:"",
                                    edited:1
                                }
                            );
                          UpdateContext({maAddedPhiKhac:Text(idMa),
                          maUpdatedPhiKhac : ""
                          })
                        )
                    Size: =11
                    Text: ="Thêm mới"
                    Width: =96
                    Y: =48
                    ZIndex: =11

                Label1_11 As label:
                    Align: =Align.Justify
                    FontWeight: =FontWeight.Bold
                    Size: =11
                    Text: ="4.3. Thông tin phí khác"
                    Width: =1076
                    Y: =4
                    ZIndex: =13

                LuuThongTinCT_1 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: |-
                        =If(
                            Or(
                                maAdded <> "",
                                maUpdated <> ""
                            ),
                            Notify(
                                "Có dữ liệu chưa được lưu",
                                NotificationType.Warning,
                                800
                            ),
                        //lấy danh sách chương trình có trạng thái = 0
                            ClearCollect(
                                tempCTTrangThai0,
                                Filter(
                                    ' DL_SAN_PHAM_CT',
                                    TRANG_THAI = 0
                                )
                            );
                        // quét từng chương trình để chuyển dữ liệu
                        ForAll(
                                tempCTTrangThai0 As CT,
                            // chuyển dữ liệu điều khoản chung
                            RemoveIf(DL_CHUONGTRINH_DKCHUNGS, MA_SAN_PHAM = valMaSP && MA_CHUONG_TRINH = CT.MA_CHUONG_TRINH);
                            ForAll(Filter(DL_SAN_PHAM_DKCHUNGS,ma_san_pham = valMaSP ) As dkc,
                                Patch(
                                    DL_CHUONGTRINH_DKCHUNGS,
                                    Defaults(DL_CHUONGTRINH_DKCHUNGS),
                                    {
                                        MA_DIEU_KHOAN: Max(DL_CHUONGTRINH_DKCHUNGS, MA_DIEU_KHOAN) + 1,
                                        MA_SAN_PHAM:valMaSP,
                                        MA_CHUONG_TRINH: CT.MA_CHUONG_TRINH,
                                        NHOM_THONG_TIN:dkc.nhom_thong_tin,
                                        THONG_TIN: dkc.thong_tin,
                                        NOI_DUNG:dkc.noi_dung
                                    }
                                )
                            );
                            // chuyển dữ liệu quyền lợi chi tiết
                            RemoveIf(DL_SAN_PHAM_QLCT_CHONS, MA_SAN_PHAM = valMaSP && MaCT = CT.MA_CHUONG_TRINH);
                            ForAll(Filter(DL_SAN_PHAM_QLCT_CHONS,MA_SAN_PHAM = valMaSP ) As qlc,
                                Patch(
                                    DL_CHUONGTRINH_QLCTS,
                                    Defaults(DL_CHUONGTRINH_QLCTS),
                                    {
                                        TT_HIENTHI: Max(Filter(DL_CHUONGTRINH_QLCTS,MA_SAN_PHAM = valMaSP && MA_CHUONG_TRINH = CT.MA_CHUONG_TRINH) , TT_HIENTHI) + 1,
                                        MA_SAN_PHAM:valMaSP,
                                        MA_NHOM_QL: qlc.MA_NHOM_QL,
                                        MA_CHUONG_TRINH:CT.MA_CHUONG_TRINH,
                                        MA_QL_CT:qlc.MA_QL_CHITIET,
                                        MA_SP:valMaSP,
                                        MA_CT:CT.MA_CHUONG_TRINH,
                                        MA_NHOMQL_SP:qlc.MA_QL_CHITIET, 
                                        TEN_QUYEN_LOI_HT:qlc.TEN_HIEN_THI
                                    }
                                )
                            );
                            // chuyển dữ liệu quyền lợi khác
                            //RemoveIf(DL_SAN_PHAM_QL_KHACS, MA_SAN_PHAM = valMaSP &&  MA_CHUONG_TRINH= CT.MA_CHUONG_TRINH);
                            ForAll(Filter(DL_SAN_PHAM_QL_KHACS,MA_SP = valMaSP ) As qlk,
                                Patch(
                                    DL_CHUONGTRINH_QL_KHACS,
                                    Defaults(DL_CHUONGTRINH_QL_KHACS),
                                    {
                                        MA_DL_CT: Max(DL_CHUONGTRINH_QL_KHACS, MA_DL_CT) + 1,
                                        MA_SAN_PHAM:valMaSP,
                                        MA_CHUONG_TRINH: CT.MA_CHUONG_TRINH,
                                        MA_NHOM_QL_CT:qlk.MA_NHOM_QL,
                                        MO_TA_CT:qlk.MO_TA
                                    }
                                )
                            );
                            // chuyển dữ liệu ma trận phí
                            // Nếu đã nhận file excel thì k chuyển sang nữa
                            If(CountRows(Filter( DL_CHUONG_TRINH_BANG_PHIS, MA_SAN_PHAM =valMaSP && MA_CHUONG_TRINH= CT.MA_CHUONG_TRINH )) <= 0,
                            RemoveIf(DL_SAN_PHAM_MATRANPHI, MA_SAN_PHAM = valMaSP &&  MA_CHUONG_TRINH= CT.MA_CHUONG_TRINH);
                            ForAll(Filter(DL_SAN_PHAM_MATRANPHI, MA_SAN_PHAM = valMaSP  && MA_CHUONG_TRINH= CT.MA_CHUONG_TRINH) As mtp,
                                Patch(
                                    DL_CHUONG_TRINH_BANG_PHIS,
                                    Defaults(DL_CHUONG_TRINH_BANG_PHIS),
                                    {
                                        MA_BANG_PHI: Max(DL_CHUONG_TRINH_BANG_PHIS, MA_BANG_PHI) + 1,
                                        MA_SAN_PHAM:valMaSP,
                                        MA_CHUONG_TRINH:CT.MA_CHUONG_TRINH,
                                        TEN_CHUONG_TRINH: mtp.CHUONG_TRINH,
                                        TEN_SAN_PHAM:valTenSP,
                                        NHOM_TINH_PHI:mtp.NHOM_TINH_PHI,
                                        MA_PHAMVI_DIALY:mtp.PHAM_VI_DL,
                                        MA_DO_TUOI:mtp.DO_TUOI,
                                        MA_GIOI_TINH:mtp.GIOI_TINH,
                                        NHOM_NGANH_NGHE:mtp.NGANH_NGHE,
                                        SO_TIEN:mtp.SO_TIEN, 
                                        THOI_HAN_BH:mtp.THOI_HAN,
                                        PTHUC_DONG_PHI: mtp.PHUONG_THUC_DP 
                                    }
                                )
                            )
                            );
                            // chuyển dữ liệu thông tin giảm trừ phí
                            ForAll(Filter(DL_SAN_PHAM_GPS, MA_SAN_PHAM = valMaSP ) As gp,
                                Patch(
                                    DL_CHUONGTRINH_GPS,
                                    Defaults(DL_CHUONGTRINH_GPS),
                                    {
                                        ID: Max(DL_CHUONGTRINH_GPS, ID) + 1,
                                        MA_SAN_PHAM:valMaSP,
                                        MA_CHUONG_TRINH:CT.MA_CHUONG_TRINH,
                                        DONVI_TIEN:gp.DONVI_TIEN,
                                        MO_TA:gp.MO_TA,
                                        SO_TIEN:gp.SO_TIEN,
                                        THONG_TIN:gp.THONG_TIN,
                                        TY_LE:gp.TY_LE               
                                    }
                                )
                            );
                           // chuyển dữ liệu phí khác
                            ForAll(Filter(DL_SAN_PHAM_PHIKHACS, MA_SAN_PHAM = valMaSP ) As pk,
                                Patch(
                                    DL_CHUONGTRINH_PHIKHACS,
                                    Defaults(DL_CHUONGTRINH_PHIKHACS),
                                    {
                                        ID: Max(DL_CHUONGTRINH_PHIKHACS, ID) + 1,
                                        MA_SAN_PHAM:valMaSP,
                                        MA_CHUONG_TRINH:CT.MA_CHUONG_TRINH,
                                        NHOM_THONG_TIN:  pk.NHOM_THONG_TIN,           
                                        MO_TA: pk.MO_TA
                                    }
                                )
                            );
                        
                        );
                            If(
                                CountRows(tmpCTCollect) > 0,
                                UpdateIf(
                                    ' DL_SAN_PHAM_CT',
                                    Txt_MaSP_1.Text = MA_SAN_PHAM && TRANG_THAI = 0,
                                    {TRANG_THAI: 1}
                                )
                            )
                        );
                        Select(IconTaiLaiCT_1);
                    Size: =11
                    Text: ="Lưu thông tin"
                    Visible: |-
                        =If(
                            CountRows(Filter(' DL_SAN_PHAM_CT',MA_SAN_PHAM=Txt_MaSP_1.Text)) > 0,
                            true,
                            false
                        )
                    Width: =159
                    X: =1030
                    Y: =441
                    ZIndex: =14

                ThemMoiCT_10 As button:
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    OnSelect: =Back()
                    Size: =11
                    Text: ="Quay lại"
                    Width: =114
                    X: =900
                    Y: =441
                    ZIndex: =15

    LeftNavigation_21 As LeftNavigation_9:
        Width: =LeftNavigation_21.MenuWidth - 10
        ZIndex: =4

